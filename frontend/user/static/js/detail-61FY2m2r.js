var ze=Object.defineProperty,Pe=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var be=(t,o,n)=>o in t?ze(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,le=(t,o)=>{for(var n in o||(o={}))Me.call(o,n)&&be(t,n,o[n]);if(ye)for(var n of ye(o))Be.call(o,n)&&be(t,n,o[n]);return t},he=(t,o)=>Pe(t,Ee(o));var X=(t,o,n)=>new Promise((l,_)=>{var u=b=>{try{d(n.next(b))}catch(a){_(a)}},y=b=>{try{d(n.throw(b))}catch(a){_(a)}},d=b=>b.done?l(b.value):Promise.resolve(b.value).then(u,y);d((n=n.apply(t,o)).next())});import{k as g,aW as Re,l as F,d as ve,z as j,V as Y,v as Ie,r as T,i as C,o as w,au as Ue,aK as Ne,j as c,e as p,c as L,a0 as H,a1 as Q,f as I,g as $,aF as je,aX as Le,B as me,a4 as Ke,w as He,Z as Qe,ag as We,_ as De,a9 as Ge,m as we,ab as ce,A as Z,h as re,aY as Ve,y as Fe,aH as Je,s as Xe,u as Ze,aZ as Ye,a_ as ea,I as Ae}from"./index-BEJyLMoZ.js";import{s as Te,a as aa,v as pe}from"./product-BCSRqpAX.js";import{r as ta,i as Ce}from"./isIP-FezrihkG.js";import{u as la}from"./dialog-9iTy18gV.js";import{u as xe}from"./hooks-BpllrbqK.js";const ra={csr_generate:1,encryption:{alg:"rsa",bits:2048,digest_alg:"sha256"}};function Sa(t){return g.get("/order",{params:t})}function na(t){return g.get(`/order/${t}`)}function ka(t){return g.get("/order/batch",{params:{ids:t}})}function oa(t){return g.post("/order/new",{data:t})}function sa(t){return g.post("/order/batch-new",{data:t})}function ia(t){return g.post("/order/renew",{data:t})}function ua(t){return g.post("/order/reissue",{data:t})}function Ra(t,o){return g.post(`/order/pay/${t}`,{data:o})}function Da(t){return g.post(`/order/commit/${t}`)}function $a(t){return g.post(`/order/revalidate/${t}`)}function qa(t,o){return g.post(`/order/update-dcv/${t}`,{data:{method:o}})}function za(t){return g.post(`/order/remove-mdc-domain/${t}`)}function Pa(t){return g.post(`/order/sync/${t}`)}function Ea(t){return g.post(`/order/commit-cancel/${t}`)}function Ma(t){return g.post(`/order/revoke-cancel/${t}`)}function Ba(t,o){return g.post(`/order/remark/${t}`,{data:{remark:o}})}function Ia(t,o){return g.get("/order/download",{params:{ids:t,type:o}},{responseType:"blob",beforeResponseCallback:n=>{const l=n.headers["content-disposition"];let _="certs.zip";if(l){const y=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(l);y!=null&&y[1]&&(_=decodeURIComponent(y[1].replace(/['"]/g,"")))}n.data instanceof Blob&&Re(n.data,_)}})}function Ua(t){return g.get(`/order/download-validate-file/${t}`,{},{responseType:"blob",beforeResponseCallback:o=>{const n=o.headers["content-disposition"];let l="验证文件.zip";if(n){const u=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(n);u!=null&&u[1]&&(l=decodeURIComponent(u[1].replace(/['"]/g,"")))}o.data instanceof Blob&&Re(o.data,l)}})}function Na(t,o){return g.get(`/order/send-active/${t}`,{params:{email:o}})}function ja(t){return g.post("/order/batch-pay",{data:{ids:t}})}function La(t){return g.post("/order/batch-commit",{data:{ids:t}})}function Ka(t){return g.post("/order/batch-revalidate",{data:{ids:t}})}function Ha(t){return g.post("/order/batch-sync",{data:{ids:t}})}function Qa(t){return g.post("/order/batch-commit-cancel",{data:{ids:t}})}function Wa(t){return g.post("/order/batch-revoke-cancel",{data:{ids:t}})}const Ga=[{label:"全部",value:"all"},{label:"活动中",value:"activating"},{label:"已存档",value:"archived"}],Ja=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"}],Xa=[{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],Za={unpaid:"warning",pending:"primary",processing:"primary",approving:"primary",active:"success",failed:"danger",cancelling:"danger",cancelled:"danger",renewed:"info",replaced:"info",reissued:"info",expired:"info",revoked:"danger"},Ya={unpaid:"待支付",pending:"待提交",processing:"待验证",approving:"待审核",active:"已签发",cancelling:"待取消",cancelled:"已取消",renewed:"已续期",replaced:"已替换",reissued:"已重签",expired:"已过期",revoked:"已吊销",failed:"已失败"},et=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"},{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],at={new:"新购",renew:"续期",reissue:"重签"},tt={new:"success",renew:"success",reissue:"info"},lt=[{label:"新购",value:"new"},{label:"续期",value:"renew"},{label:"重签",value:"reissue"}],rt={admin:"后台",web:"网站",api:"API",acme:"ACME"},nt={admin:"warning",web:"info",api:"primary",acme:"success"},ot={cname:"解析验证(CNAME)",txt:"解析验证(TXT)",file:"文件验证(FILE)",http:"文件验证(HTTP)",https:"文件验证(HTTPS)",admin:"邮件验证(ADMIN)",administrator:"邮件验证(ADMINISTRATOR)",hostmaster:"邮件验证(HOSTMASTER)",postmaster:"邮件验证(POSTMASTER)",webmaster:"邮件验证(WEBMASTER)"};function st(){const t=F({visible:!1,type:"",id:0});return{action:t,openAction:(n="apply",l=0)=>{t.value.id=l,t.value.type=n,t.value.visible=!0}}}const fe=ve({__name:"index",props:{modelValue:{},uri:{},searchField:{},labelField:{default:"name"},valueField:{default:"id"},placeholder:{default:"请选择"},pageSize:{default:7},showPagination:{type:Boolean,default:!0},queryParams:{default:()=>({})},itemsField:{default:"items"},totalField:{default:"total"},refreshKey:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{expose:o,emit:n}){const l=t,_=n,u=F([]),y=F(!1),d=F(1),b=F(l.pageSize),a=F(0),x=F(""),R=F(l.refreshKey),E=F(!0),ee=F(!0),se=j(()=>Math.ceil(a.value/b.value));Y(()=>l.refreshKey,(i,f)=>{i!==f&&f!==void 0&&(d.value=1,x.value="",E.value=!0,K()),R.value=i},{immediate:!0}),Y(()=>l.modelValue,i=>{i&&!M(i)&&P()&&W(i)},{immediate:!0});function P(){return l.refreshKey===void 0||l.refreshKey===null?!0:typeof l.refreshKey=="number"?l.refreshKey>0:l.refreshKey!==""}function M(i){return i?Array.isArray(i)?i.every(f=>u.value.some(V=>V.value===f)):u.value.some(f=>f.value===i):!0}Ie(()=>X(null,null,function*(){l.modelValue&&P()&&(yield W(l.modelValue))}));function W(i){return X(this,null,function*(){if(i&&!M(i))try{y.value=!0;let f="",V={};if(Array.isArray(i)){const k=i.filter(O=>!u.value.some(U=>U.value===O));if(k.length===0)return;l.valueField==="id"?(f=`${l.uri}/batch`,V={ids:k}):(f=`${l.uri}`,V={[l.valueField]:k.join(",")})}else l.valueField==="id"?f=`${l.uri}/${i}`:(f=`${l.uri}`,V={[l.valueField]:i});const A=yield g.get(f,{params:V});if(A.data){const O=(Array.isArray(A.data.items)?A.data.items:Array.isArray(A.data)?A.data:[A.data]).map(U=>({label:U[l.labelField],value:U[l.valueField]}));u.value=ae(u.value,O)}}finally{y.value=!1}})}function ae(i,f){const V=[...i];for(const A of f)V.some(O=>O.value===A.value)||V.push(A);return V}function G(i){_("update:modelValue",i),_("change",i)}function ie(i){i&&ee.value&&(ee.value=!1,E.value=!0,K())}function K(){return X(this,arguments,function*(i={}){if(!(y.value||!E.value))try{y.value=!0;const f=yield g.get(l.uri,{params:le(le({currentPage:d.value,pageSize:b.value},l.queryParams),i)});if(f.data){const V=(f.data[l.itemsField]||[]).map(k=>({label:k[l.labelField],value:k[l.valueField]})),A=te();u.value=ae(A,V),a.value=f.data[l.totalField]||0}E.value=!1}finally{y.value=!1}})}function te(){if(!l.modelValue)return[];const i=Array.isArray(l.modelValue)?l.modelValue:[l.modelValue];return u.value.filter(f=>i.includes(f.value))}o({getSelectedOptions:te,options:u});function q(i){if(x.value===""&&i==="")return;x.value=i,d.value=1,E.value=!0;const f={};f[l.searchField]=i,K(f)}function ue(i){d.value=i,E.value=!0;const f={};x.value&&(f[l.searchField]=x.value),K(f)}return(i,f)=>{const V=T("el-option"),A=T("el-pagination"),k=T("el-select");return w(),C(k,Ue({"model-value":i.modelValue,placeholder:i.placeholder,filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","remote-method":q,loading:y.value,multiple:i.multiple},i.$attrs,{"onUpdate:modelValue":G,onVisibleChange:ie}),Ne({default:c(()=>[(w(!0),L(H,null,Q(u.value,O=>(w(),C(V,{key:O.value,label:O.label,value:O.value},null,8,["label","value"]))),128))]),_:2},[i.showPagination&&se.value>1?{name:"footer",fn:c(()=>[p(A,{"current-page":d.value,"onUpdate:currentPage":f[0]||(f[0]=O=>d.value=O),"page-size":b.value,"pager-count":5,total:a.value,layout:"total, prev, pager, next",onCurrentChange:ue},null,8,["current-page","page-size","total"])]),key:"0"}:void 0]),1040,["model-value","placeholder","loading","multiple"])}}}),da={class:"re-collapse-container"},ca={class:"re-collapse-left"},pa={class:"re-collapse-title"},fa=ve({__name:"index",props:{title:{type:String,required:!0},modelValue:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{emit:o}){const n=t,l=o,_=F(n.modelValue),u=F(null);Y(()=>n.modelValue,d=>{_.value=d}),Y(()=>_.value,d=>{l("update:modelValue",d)});const y=()=>{_.value=!_.value};return(d,b)=>{const a=T("el-icon");return w(),L("div",da,[I("div",{class:"re-collapse-header",onClick:y},[I("div",ca,[p(a,{class:"re-collapse-icon"},{default:c(()=>[_.value?(w(),C($(je),{key:0})):(w(),C($(Le),{key:1}))]),_:1}),I("span",pa,me(t.title),1)])]),p(Ke,{name:"re-collapse"},{default:c(()=>[He(I("div",{ref_key:"collapseContent",ref:u,class:"re-collapse-content"},[We(d.$slots,"default",{},void 0,!0)],512),[[Qe,_.value]])]),_:3})])}}}),ma=De(fa,[["__scopeId","data-v-bfb881f6"]]);var ne={exports:{}},oe={exports:{}},Oe;function va(){return Oe||(Oe=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=n;function n(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;for(var u in _)typeof l[u]=="undefined"&&(l[u]=_[u]);return l}t.exports=o.default,t.exports.default=o.default}(oe,oe.exports)),oe.exports}var Se;function ga(){return Se||(Se=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=y;var n=_(ta()),l=_(va());function _(d){return d&&d.__esModule?d:{default:d}}var u={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function y(d,b){(0,n.default)(d),b=(0,l.default)(b,u),b.allow_trailing_dot&&d[d.length-1]==="."&&(d=d.substring(0,d.length-1)),b.allow_wildcard===!0&&d.indexOf("*.")===0&&(d=d.substring(2));var a=d.split("."),x=a[a.length-1];return b.require_tld&&(a.length<2||!b.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(x)||/\s/.test(x))||!b.allow_numeric_tld&&/^\d+$/.test(x)?!1:a.every(function(R){return!(R.length>63&&!b.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(R)||/[\uff01-\uff5e]/.test(R)||/^-|-$/.test(R)||!b.allow_underscores&&/_/.test(R))})}t.exports=o.default,t.exports.default=o.default}(ne,ne.exports)),ne.exports}var _a=ga();const ke=Ge(_a),ya={class:"order-action-form"},ba={class:"inline-field"},ha={class:"inline-field"},wa={class:"order-action-footer"},Va=ve({__name:"action",props:{visible:{type:Boolean,default:!1},actionType:{type:String,default:""},orderId:{type:Number,default:0}},emits:["update:visible","success","close"],setup(t,{emit:o}){const n=t,l=o,{dialogSize:_}=la(),u=F(),y=F(),d=F(!1),b=F([]),a=we({}),x=F([]),R=F([]),E=j(()=>{var r;return(r=a.product)==null?void 0:r.encryption_alg.map(e=>({label:e.toUpperCase(),value:e.toLowerCase()}))}),ee=j(()=>a.encryption.alg==="rsa"?[{label:"2048",value:2048},{label:"4096",value:4096}]:[{label:"256",value:256},{label:"384",value:384},{label:"512",value:512}]),se=j(()=>{var r;return(r=a.product)==null?void 0:r.signature_digest_alg.map(e=>({label:e.toUpperCase(),value:e.toLowerCase()}))}),P=j(()=>n.actionType==="batchApply"),M=j(()=>{var r;return(((r=a.product)==null?void 0:r.validation_type)||"dv")!=="dv"}),W=F(!1),ae=j(()=>n.actionType==="apply"?"申请证书":n.actionType==="batchApply"?"批量申请":n.actionType==="renew"?"续费证书":n.actionType==="reissue"?"重签证书":""),G=(r,e,v,m)=>{const h=r.slice(0,2)=="*.";if(h&&!e.includes("wildcard"))m[v]=r.slice(2),a.domains=m.join(`
`);else if(Ce(r,4)){if(!e.includes("ipv4"))return r+" 不能为IPV4"}else if(Ce(r,6)){if(!e.includes("ipv6"))return r+" 不能为IPV6"}else if(ke(r)&&!e.includes("standard"))m[v]="*."+r,a.domains=m.join(`
`);else if(!ke(h?r.slice(2):r))return r+" 格式错误";return""},ie=r=>r.includes("*.www.")?Je.confirm("检测到域名中包含 *.www. 通配符，通常情况下 www. 不需要包含在通配符证书中。是否继续？","域名确认",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(()=>!0).catch(()=>!1):Promise.resolve(!0),K=(r,e,v)=>{if(!e)return v(new Error("请输入域名"));a.domains=e.replaceAll(" ","").replaceAll("　","").replaceAll("	","").toLowerCase(),a.domains=a.domains.replace(/(\n[\s\t]*\r*\n)/g,`
`).replace(/^[\n\r\t]*|[\n\r\t]*$/g,""),ie(a.domains).then(m=>{if(!m)return v(new Error("请删除 www."));te(v)})},te=r=>{var N,z,S;((N=a.product)==null?void 0:N.total_max)===1&&!P.value&&(a.domains=a.domains.split(`
`)[0]);const e=a.domains.split(`
`).filter(D=>D!==""),v=[...new Set(e)];if(e.length!==v.length)return r(new Error("域名重复"));if(!((z=a.product)!=null&&z.common_name_types))return r(new Error("请选择产品"));const m=[];if(e.length>0)if(m.push(G(e[0],a.product.common_name_types,0,e)||""),P.value)e.slice(1).forEach((D,B)=>{m.push(G(D,a.product.common_name_types,B+1,e)||"")});else{if(e.length>1&&!((S=a.product)!=null&&S.alternative_name_types))return r(new Error("请选择产品"));e.length>1&&e.slice(1).forEach((D,B)=>{m.push(G(D,a.product.alternative_name_types,B+1,e)||"")})}const h=m.filter(Boolean);h.length>0?r(new Error(h.join(`
`))):r()},q=we({csr_generate:[{required:!0,message:"请选择CSR生成方式",trigger:"change"}],csr:[{required:!0,message:"请输入CSR",trigger:"blur"}],product_id:[{required:!0,message:"请选择产品",trigger:"change"}],domains:[{required:!0,validator:K,trigger:"blur"}],validation_method:[{required:!0,message:"请选择验证方式",trigger:"change"}],period:[{required:!0,message:"请选择周期",trigger:"change"}]}),ue=()=>{a.encryption.bits=a.encryption.alg==="rsa"?2048:256},i=r=>{r&&Te(r).then(({data:e})=>{if(a.product=he(le({},a.product),{total_max:e.total_max,validation_type:e.validation_type,common_name_types:e.common_name_types,alternative_name_types:e.alternative_name_types,encryption_alg:e.encryption_alg,signature_digest_alg:e.signature_digest_alg,name:e.name,brand:e.brand,add_san:e.add_san,replace_san:e.replace_san,renew:e.renew,reissue:e.reissue,reuse_csr:e.reuse_csr,gift_root_domain:e.gift_root_domain,period:{option:[]},validation_method:{option:[]}}),a.period="",x.value=[],e.periods&&e.periods.length>0){const v=e.periods.sort((m,h)=>m-h);x.value=v.map(m=>({label:aa[m],value:m})),a.period=v[0]}if(a.validation_method="",R.value=[],e.validation_methods&&e.validation_methods.length>0){const v=e.validation_methods.sort((m,h)=>Object.keys(pe).indexOf(m)-Object.keys(pe).indexOf(h));R.value=v.map(m=>({label:pe[m],value:m})),a.validation_method=v[0]}a.product.reuse_csr||(a.csr=""),n.actionType==="reissue"&&a.product.reuse_csr&&(a.csr_generate=0),q.organization=[{required:M.value,message:"请选择组织",trigger:"change"}],q.contact=[{required:M.value&&["apply","batchApply","renew"].includes(n.actionType),message:"请选择联系人",trigger:"change"}]})},f=r=>{na(r).then(({data:e})=>{var v,m,h;a.product_id=e.product_id,b.value=["product_id"],(v=e.latest_cert)!=null&&v.alternative_names&&(a.domains=e.latest_cert.alternative_names.replaceAll(",",`
`).trim()),n.actionType==="reissue"&&((m=e.latest_cert)!=null&&m.csr)&&(a.csr=e.latest_cert.csr),((h=e.product)==null?void 0:h.alternative_name_types.length)===0&&(a.domains=e.latest_cert.common_name),a.order_id=r,i(e.product_id)})},V=()=>{var e,v;const r={csr_generate:a.csr_generate};return a.csr_generate?r.encryption=a.encryption:r.csr=a.csr,["apply","batchApply","renew","reissue"].includes(n.actionType)&&(r.domains=(e=a.domains)==null?void 0:e.replace(/\n/g,","),r.validation_method=a.validation_method),["apply","batchApply","renew"].includes(n.actionType)&&(r.period=a.period),M.value&&n.actionType!=="reissue"&&(r.organization=a.organization,r.contact=a.contact),["apply","batchApply"].includes(n.actionType)&&(r.product_id=a.product_id,r.plus=(v=ce.currentRoute.value.query.plus)!=null?v:1),["renew","reissue"].includes(n.actionType)&&(r.order_id=a.order_id),r},A=()=>X(null,null,function*(){if(u.value)try{if(yield u.value.validate(),d.value=!0,n.actionType==="apply")yield oa(V());else if(n.actionType==="batchApply")yield sa(V());else if(n.actionType==="renew")yield ia(V());else if(n.actionType==="reissue")yield ua(V());else{Fe("未知的操作类型",{type:"error"}),d.value=!1;return}Fe("提交成功",{type:"success"}),l("success"),l("update:visible",!1)}finally{d.value=!1}}),k=()=>{l("update:visible",!1),l("close")},O=r=>{l("update:visible",!1),l("close"),setTimeout(()=>{ce.push(r)},200)},U=()=>{Object.keys(a).forEach(r=>{delete a[r]}),Object.entries(ra).forEach(([r,e])=>{typeof e=="object"&&e!==null?a[r]=JSON.parse(JSON.stringify(e)):a[r]=e}),b.value=[],x.value=[],R.value=[],setTimeout(()=>{var r;(r=u.value)==null||r.clearValidate()},0)};U();const{product_id:ge}=ce.currentRoute.value.query;return Y(()=>[n.visible,n.orderId,n.actionType],([r,e,v],m)=>{const[h=!1,N=null,z=null]=Array.isArray(m)?m:[];r&&!h&&(e!==N||v!==z)&&(U(),setTimeout(()=>{if(e&&["renew","reissue"].includes(v)&&f(e),["batchApply","apply"].includes(v)&&ge){const S=Number(ge);Te(S).then(({data:D})=>{setTimeout(()=>{if(y.value){const B={label:D.name,value:D.id};y.value.options||(y.value.options=[]),y.value.options.some(de=>de.value===D.id)||y.value.options.push(B),setTimeout(()=>{a.product_id=S,i(S)},100)}else a.product_id=S,i(S)},200)})}},100))}),(r,e)=>{const v=T("el-radio"),m=T("el-radio-group"),h=T("el-form-item"),N=T("el-input"),z=T("el-option"),S=T("el-select"),D=T("el-col"),B=T("el-row"),J=T("el-button"),de=T("el-form"),$e=T("el-dialog");return w(),C($e,{"model-value":t.visible,title:ae.value,width:$(_),"before-close":k,"destroy-on-close":"","append-to-body":"","onUpdate:modelValue":e[14]||(e[14]=s=>r.$emit("update:visible",s))},{footer:c(()=>[I("div",wa,[p(J,{onClick:k},{default:c(()=>e[17]||(e[17]=[re("取消")])),_:1}),p(J,{type:"primary",loading:d.value,onClick:A},{default:c(()=>e[18]||(e[18]=[re("提交")])),_:1},8,["loading"])])]),default:c(()=>[I("div",ya,[p(de,{ref_key:"formRef",ref:u,model:a,"label-position":$(_)=="90%"?"top":"right","label-width":"90px"},{default:c(()=>[p(h,{label:" ",prop:"csr_generate"},{default:c(()=>[p(m,{modelValue:a.csr_generate,"onUpdate:modelValue":e[0]||(e[0]=s=>a.csr_generate=s),disabled:P.value},{default:c(()=>[p(v,{value:1},{default:c(()=>e[15]||(e[15]=[re(me("自动生成CSR"))])),_:1}),p(v,{value:0},{default:c(()=>e[16]||(e[16]=[re(me("已有CSR"))])),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),parseInt(a.csr_generate)?Z("",!0):(w(),C(h,{key:0,label:"CSR",prop:"csr",rules:q.csr},{default:c(()=>[p(N,{modelValue:a.csr,"onUpdate:modelValue":e[1]||(e[1]=s=>a.csr=s),type:"textarea",rows:5,placeholder:"请输入CSR"},null,8,["modelValue"])]),_:1},8,["rules"])),["apply","batchApply"].includes(t.actionType)?(w(),C(h,{key:1,label:"产品",prop:"product_id",rules:q.product_id},{default:c(()=>[p($(fe),{ref_key:"productSelectRef",ref:y,modelValue:a.product_id,"onUpdate:modelValue":e[2]||(e[2]=s=>a.product_id=s),uri:"/product",searchField:"quickSearch",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择产品",pageSize:100,showPagination:!1,disabled:b.value.includes("product_id"),queryParams:{domains:P.value?"single":""},onChange:i},null,8,["modelValue","disabled","queryParams"])]),_:1},8,["rules"])):Z("",!0),p(h,{label:"域名",prop:"domains",rules:q.domains},{default:c(()=>{var s,_e;return[p(N,{modelValue:a.domains,"onUpdate:modelValue":e[3]||(e[3]=qe=>a.domains=qe),type:P.value||((s=a.product)==null?void 0:s.total_max)>1?"textarea":"text",autosize:{minRows:3,maxRows:10},placeholder:"请输入域名"+(P.value||((_e=a.product)==null?void 0:_e.total_max)>1?"，一行一个":"")},null,8,["modelValue","type","placeholder"])]}),_:1},8,["rules"]),p(B,{gutter:20},{default:c(()=>[p(D,{span:12},{default:c(()=>[p(h,{label:"有效期",prop:"period",rules:q.period},{default:c(()=>[p(S,{modelValue:a.period,"onUpdate:modelValue":e[4]||(e[4]=s=>a.period=s),placeholder:"请选择有效期",style:{width:"100%"}},{default:c(()=>[(w(!0),L(H,null,Q(x.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),p(h,{label:"验证方式",prop:"validation_method",rules:q.validation_method},{default:c(()=>[p(S,{modelValue:a.validation_method,"onUpdate:modelValue":e[5]||(e[5]=s=>a.validation_method=s),placeholder:"请选择验证方式",style:{width:"100%"}},{default:c(()=>[(w(!0),L(H,null,Q(R.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),M.value&&n.actionType!=="reissue"?(w(),C(h,{key:2,label:"组织",prop:"organization",rules:q.organization},{default:c(()=>[I("div",ba,[p($(fe),{modelValue:a.organization,"onUpdate:modelValue":e[6]||(e[6]=s=>a.organization=s),uri:"/organization",searchField:"name",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择组织",disabled:!a.product_id,style:{flex:"1"}},null,8,["modelValue","disabled"]),p(J,{size:"small",circle:"",icon:$(xe)($(Ve)),disabled:!a.product_id,class:"ml-auto",onClick:e[7]||(e[7]=s=>O("/organization"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):Z("",!0),M.value&&n.actionType!=="reissue"?(w(),C(h,{key:3,label:"联系人",prop:"contact",rules:q.contact},{default:c(()=>[I("div",ha,[p($(fe),{modelValue:a.contact,"onUpdate:modelValue":e[8]||(e[8]=s=>a.contact=s),uri:"/contact",searchField:"first_name",labelField:"first_name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择联系人",disabled:!a.product_id},null,8,["modelValue","disabled"]),p(J,{size:"small",circle:"",icon:$(xe)($(Ve)),disabled:!a.product_id,class:"ml-auto",onClick:e[9]||(e[9]=s=>O("/contact"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):Z("",!0),a.csr_generate===1?(w(),C($(ma),{key:4,modelValue:W.value,"onUpdate:modelValue":e[13]||(e[13]=s=>W.value=s),title:"加密选项",border:!1},{default:c(()=>[p(B,{gutter:20},{default:c(()=>[p(D,{span:12},{default:c(()=>[p(h,{label:"加密算法",prop:"encryption.alg"},{default:c(()=>[p(S,{modelValue:a.encryption.alg,"onUpdate:modelValue":e[10]||(e[10]=s=>a.encryption.alg=s),placeholder:"请选择加密算法",style:{width:"100%"},onChange:ue},{default:c(()=>[(w(!0),L(H,null,Q(E.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),p(h,{label:"密钥长度",prop:"encryption.bits"},{default:c(()=>[p(S,{modelValue:a.encryption.bits,"onUpdate:modelValue":e[11]||(e[11]=s=>a.encryption.bits=s),placeholder:"请选择密钥长度",style:{width:"100%"}},{default:c(()=>[(w(!0),L(H,null,Q(ee.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),p(h,{label:"摘要算法",prop:"encryption.digest_alg"},{default:c(()=>[p(S,{modelValue:a.encryption.digest_alg,"onUpdate:modelValue":e[12]||(e[12]=s=>a.encryption.digest_alg=s),placeholder:"请选择摘要算法",style:{width:"100%"}},{default:c(()=>[(w(!0),L(H,null,Q(se.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):Z("",!0)]),_:1},8,["model","label-position"])])]),_:1},8,["model-value","title","width"])}}}),it=De(Va,[["__scopeId","data-v-0702c2fb"]]);function ut(){const t=Xe(),o=Ze(),n=Ye(t.params)?t.query:t.params;function l(u,y){Object.keys(u).forEach(d=>{ea(u[d])||(u[d]=u[d].toString())}),y==="query"?(Ae().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",query:u,meta:{title:"订单详情",dynamicLevel:10}}),o.push({name:"OrderDetails",query:u})):y==="params"&&(Ae().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",params:u,meta:{title:"订单详情"}}),o.push({name:"OrderDetails",params:u}))}return{toDetail:l,initToDetail:u=>{n&&l(n,u)},getParameter:n,router:o}}export{Xa as A,st as B,Na as C,na as D,ot as E,Ua as F,qa as G,za as H,Ba as I,it as O,lt as a,et as b,Ja as c,rt as d,nt as e,at as f,tt as g,Ya as h,Sa as i,Za as j,Ia as k,Pa as l,Da as m,Ea as n,Ma as o,Ra as p,ka as q,$a as r,Ga as s,ja as t,ut as u,La as v,Ka as w,Ha as x,Qa as y,Wa as z};
