var h=(e,a,t)=>new Promise((s,r)=>{var i=o=>{try{n(t.next(o))}catch(c){r(c)}},u=o=>{try{n(t.throw(o))}catch(c){r(c)}},n=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,u);n((t=t.apply(e,a)).next())});import{R as S,S as g,V as m,c1 as T,X as R,a4 as d,c2 as f,an as p,aJ as E,c8 as l}from"./index-D5efkW8k.js";import{e as b,l as y}from"./auth-8X049xxM.js";const _=S("pure-user",{state:()=>{var e,a,t,s,r,i,u,n;return{username:(a=(e=m().getItem(l))==null?void 0:e.username)!=null?a:"",balance:(s=(t=m().getItem(l))==null?void 0:t.balance)!=null?s:"0.00",roles:(i=(r=m().getItem(l))==null?void 0:r.roles)!=null?i:[],permissions:(n=(u=m().getItem(l))==null?void 0:u.permissions)!=null?n:[],isRemembered:!1,loginDay:7}},actions:{SET_USERNAME(e){this.username=e},SET_BALANCE(e){this.balance=e},SET_ROLES(e){this.roles=e},SET_PERMS(e){this.permissions=e},SET_ISREMEMBERED(e){this.isRemembered=e},SET_LOGINDAY(e){this.loginDay=Number(e)},loginByAccount(e){return h(this,null,function*(){return new Promise((a,t)=>{y(e).then(s=>{(s==null?void 0:s.code)===1&&E(s.data),a(s)}).catch(s=>{t(s)})})})},handRefreshToken(e){return h(this,null,function*(){return new Promise((a,t)=>{b(e).then(s=>{(s==null?void 0:s.code)===1?(E(s.data),a(s)):this.logOut()}).catch(s=>{t(s)})})})},logOut(){this.username="",this.balance="",this.roles=[],this.permissions=[],T(),R().handleTags("equal",[...d]),f(),p.push("/login")}}});function M(){return _(g)}export{M as u};
