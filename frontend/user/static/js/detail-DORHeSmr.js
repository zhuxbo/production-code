var Qe=Object.defineProperty,Ge=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var ke=(l,i,r)=>i in l?Qe(l,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[i]=r,se=(l,i)=>{for(var r in i||(i={}))He.call(i,r)&&ke(l,r,i[r]);if(xe)for(var r of xe(i))We.call(i,r)&&ke(l,r,i[r]);return l},Ae=(l,i)=>Ge(l,Je(i));var te=(l,i,r)=>new Promise((n,g)=>{var s=y=>{try{d(r.next(y))}catch(a){g(a)}},_=y=>{try{d(r.throw(y))}catch(a){g(a)}},d=y=>y.done?n(y.value):Promise.resolve(y.value).then(s,_);d((r=r.apply(l,i)).next())});import{p as be,r as F,w as re,l as O,F as J,v,y as Q,k as m,x as c,u as V,G as B,aL as Xe,b0 as Ye,A as ye,ah as Ze,I as ea,ab as aa,as as la,_ as Ee,q as x,C as ta,e as b,aF as ra,aQ as na,ad as Y,ae as Z,b1 as Ue,am as oa,f as Oe,an as ve,J as U,z as ue,K as Se,m as Te,aN as ia,N as sa,M as ua,b2 as da,b3 as ca,X as Re}from"./index-D5efkW8k.js";import{s as qe,a as pa,v as ge}from"./product-CqZQfo2c.js";import{r as fa,i as De}from"./isIP-De3RazRf.js";import{u as ma}from"./dialog-DRVOK9xO.js";const va={class:"re-collapse-container"},ga={class:"re-collapse-left"},_a={class:"re-collapse-title"},ya=be({__name:"index",props:{title:{type:String,required:!0},modelValue:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(l,{emit:i}){const r=l,n=i,g=F(r.modelValue),s=F(null);re(()=>r.modelValue,d=>{g.value=d}),re(()=>g.value,d=>{n("update:modelValue",d)});const _=()=>{g.value=!g.value};return(d,y)=>{const a=O("el-icon");return v(),J("div",va,[Q("div",{class:"re-collapse-header",onClick:_},[Q("div",ga,[m(a,{class:"re-collapse-icon"},{default:c(()=>[g.value?(v(),V(B(Xe),{key:0})):(v(),V(B(Ye),{key:1}))]),_:1}),Q("span",_a,ye(l.title),1)])]),m(Ze,{name:"re-collapse"},{default:c(()=>[ea(Q("div",{ref_key:"collapseContent",ref:s,class:"re-collapse-content"},[la(d.$slots,"default",{},void 0,!0)],512),[[aa,g.value]])]),_:3})])}}}),ba=Ee(ya,[["__scopeId","data-v-039ad107"]]),_e=be({__name:"index",props:{modelValue:{},uri:{},searchField:{default:"keyword"},labelField:{default:"name"},valueField:{default:"id"},placeholder:{default:"请选择"},pageSize:{default:7},showPagination:{type:Boolean,default:!0},queryParams:{default:()=>({})},itemsField:{default:"items"},totalField:{default:"total"},refreshKey:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(l,{expose:i,emit:r}){const n=l,g=r,s=F([]),_=F(!1),d=F(1),y=F(n.pageSize),a=F(0),S=F(""),$=F(n.refreshKey),N=F(!0),H=F(!0),pe=x(()=>Math.ceil(a.value/y.value));re(()=>n.refreshKey,(u,p)=>{u!==p&&p!==void 0&&(d.value=1,S.value="",N.value=!0,I()),$.value=u},{immediate:!0}),re(()=>n.modelValue,u=>{u&&!M(u)&&E()&&j(u)},{immediate:!0});function E(){return n.refreshKey===void 0||n.refreshKey===null?!0:typeof n.refreshKey=="number"?n.refreshKey>0:n.refreshKey!==""}function M(u){return u?Array.isArray(u)?u.every(p=>s.value.some(k=>k.value===p)):s.value.some(p=>p.value===u):!0}ta(()=>te(null,null,function*(){n.modelValue&&E()&&(yield j(n.modelValue))}));function j(u){return te(this,null,function*(){if(u&&!M(u))try{_.value=!0;let p="",k={};if(Array.isArray(u)){const T=u.filter(z=>!s.value.some(G=>G.value===z));if(T.length===0)return;n.valueField==="id"?(p=`${n.uri}/batch`,k={ids:T}):(p=`${n.uri}`,k={[n.valueField]:T.join(",")})}else n.valueField==="id"?p=`${n.uri}/${u}`:(p=`${n.uri}`,k={[n.valueField]:u});const A=yield b.get(p,{params:k});if(A.data){const z=(Array.isArray(A.data.items)?A.data.items:Array.isArray(A.data)?A.data:[A.data]).map(G=>({label:G[n.labelField],value:G[n.valueField]}));s.value=L(s.value,z)}}finally{_.value=!1}})}function L(u,p){const k=[...u];for(const A of p)k.some(z=>z.value===A.value)||k.push(A);return k}function W(u){g("update:modelValue",u),g("change",u)}function ee(){H.value&&(H.value=!1,N.value=!0,I())}function ae(u){u&&H.value&&(H.value=!1,N.value=!0,I())}function I(){return te(this,arguments,function*(u={}){if(!(_.value||!N.value))try{_.value=!0;const p=yield b.get(n.uri,{params:se(se({currentPage:d.value,pageSize:y.value},n.queryParams),u)});if(p.data){const k=(p.data[n.itemsField]||[]).map(T=>({label:T[n.labelField],value:T[n.valueField]})),A=X();s.value=L(A,k),a.value=p.data[n.totalField]||0}N.value=!1}finally{_.value=!1}})}function X(){if(!n.modelValue)return[];const u=Array.isArray(n.modelValue)?n.modelValue:[n.modelValue];return s.value.filter(p=>u.includes(p.value))}i({getSelectedOptions:X,options:s});function ne(u){if(S.value===""&&u==="")return;S.value=u,d.value=1,N.value=!0;const p={};p[n.searchField]=u,I(p)}function fe(u){d.value=u,N.value=!0;const p={};S.value&&(p[n.searchField]=S.value),I(p)}return(u,p)=>{const k=O("el-option"),A=O("el-pagination"),T=O("el-select");return v(),V(T,ra({"model-value":l.modelValue,placeholder:l.placeholder,filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","remote-method":ne,loading:_.value,multiple:l.multiple},u.$attrs,{"onUpdate:modelValue":W,onVisibleChange:ae,onFocus:ee}),na({default:c(()=>[(v(!0),J(Y,null,Z(s.value,z=>(v(),V(k,{key:z.value,label:z.label,value:z.value},null,8,["label","value"]))),128))]),_:2},[l.showPagination&&pe.value>1?{name:"footer",fn:c(()=>[m(A,{"current-page":d.value,"onUpdate:currentPage":p[0]||(p[0]=z=>d.value=z),"page-size":y.value,"pager-count":5,total:a.value,layout:"total, prev, pager, next",onCurrentChange:fe},null,8,["current-page","page-size","total"])]),key:"0"}:void 0]),1040,["model-value","placeholder","loading","multiple"])}}}),ha={csr_generate:1,encryption:{alg:"rsa",bits:2048,digest_alg:"sha256"}};function Ba(l){return b.get("/order",{params:l})}function wa(l){return b.get(`/order/${l}`)}function Na(l){return b.get("/order/batch",{params:{ids:l}})}function Va(l){return b.post("/order/new",{data:l})}function Fa(l){return b.post("/order/batch-new",{data:l})}function Ca(l){return b.post("/order/renew",{data:l})}function xa(l){return b.post("/order/reissue",{data:l})}function Ma(l,i){return b.post(`/order/pay/${l}`,{data:i})}function Ia(l){return b.post(`/order/commit/${l}`)}function ja(l){return b.post(`/order/revalidate/${l}`)}function La(l,i){return b.post(`/order/update-dcv/${l}`,{data:{method:i}})}function Ka(l){return b.post(`/order/sync/${l}`)}function Qa(l){return b.post(`/order/commit-cancel/${l}`)}function Ga(l){return b.post(`/order/revoke-cancel/${l}`)}function Ja(l,i){return b.post(`/order/remark/${l}`,{data:{remark:i}})}function Ha(l,i){return b.get("/order/download",{params:{ids:l,type:i}},{responseType:"blob",beforeResponseCallback:r=>{const n=r.headers["content-disposition"];let g="certs.zip";if(n){const _=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(n);_!=null&&_[1]&&(g=decodeURIComponent(_[1].replace(/['"]/g,"")))}r.data instanceof Blob&&Ue(r.data,g)}})}function Wa(l){return b.get(`/order/download-validate-file/${l}`,{},{responseType:"blob",beforeResponseCallback:i=>{const r=i.headers["content-disposition"];let n="验证文件.zip";if(r){const s=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(r);s!=null&&s[1]&&(n=decodeURIComponent(s[1].replace(/['"]/g,"")))}i.data instanceof Blob&&Ue(i.data,n)}})}function Xa(l,i){return b.get(`/order/send-active/${l}`,{params:{email:i}})}function Ya(l){return b.post("/order/batch-pay",{data:{ids:l}})}function Za(l){return b.post("/order/batch-commit",{data:{ids:l}})}function el(l){return b.post("/order/batch-revalidate",{data:{ids:l}})}function al(l){return b.post("/order/batch-sync",{data:{ids:l}})}function ll(l){return b.post("/order/batch-commit-cancel",{data:{ids:l}})}function tl(l){return b.post("/order/batch-revoke-cancel",{data:{ids:l}})}const rl=[{label:"全部",value:"all"},{label:"活动中",value:"activating"},{label:"已存档",value:"archived"}],nl=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"}],ol=[{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],il={unpaid:"warning",pending:"primary",processing:"primary",approving:"primary",active:"success",failed:"danger",cancelling:"danger",cancelled:"danger",renewed:"info",replaced:"info",reissued:"info",expired:"info",revoked:"danger"},sl={unpaid:"待支付",pending:"待提交",processing:"待验证",approving:"待审核",active:"已签发",cancelling:"待取消",cancelled:"已取消",renewed:"已续期",replaced:"已替换",reissued:"已重签",expired:"已过期",revoked:"已吊销",failed:"已失败"},ul=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"},{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],dl={new:"新购",renew:"续期",reissue:"重签"},cl={new:"success",renew:"success",reissue:"info"},pl=[{label:"新购",value:"new"},{label:"续期",value:"renew"},{label:"重签",value:"reissue"}],fl={admin:"后台",web:"网站",api:"API",acme:"ACME",auto:"自动部署"},ml={admin:"warning",web:"info",api:"primary",acme:"success",auto:"success"};function vl(){const l=F({visible:!1,type:"",id:0});return{action:l,openAction:(r="apply",n=0)=>{l.value.id=n,l.value.type=r,l.value.visible=!0}}}var de={exports:{}},ce={exports:{}},ze;function ka(){return ze||(ze=1,(function(l,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=arguments.length>1?arguments[1]:void 0;for(var s in g)typeof n[s]=="undefined"&&(n[s]=g[s]);return n}l.exports=i.default,l.exports.default=i.default})(ce,ce.exports)),ce.exports}var $e;function Aa(){return $e||($e=1,(function(l,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=_;var r=g(fa()),n=g(ka());function g(d){return d&&d.__esModule?d:{default:d}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function _(d,y){(0,r.default)(d),y=(0,n.default)(y,s),y.allow_trailing_dot&&d[d.length-1]==="."&&(d=d.substring(0,d.length-1)),y.allow_wildcard===!0&&d.indexOf("*.")===0&&(d=d.substring(2));var a=d.split("."),S=a[a.length-1];return y.require_tld&&(a.length<2||!y.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(S)||/\s/.test(S))||!y.allow_numeric_tld&&/^\d+$/.test(S)?!1:a.every(function($){return!($.length>63&&!y.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test($)||/[\uff01-\uff5e]/.test($)||/^-|-$/.test($)||!y.allow_underscores&&/_/.test($))})}l.exports=i.default,l.exports.default=i.default})(de,de.exports)),de.exports}var Oa=Aa();const Pe=oa(Oa),Sa={class:"order-action-form"},Ta={class:"inline-field"},Ra={class:"inline-field"},qa={class:"order-action-footer"},Da=be({__name:"action",props:{visible:{type:Boolean,default:!1},actionType:{type:String,default:""},orderId:{type:Number,default:0}},emits:["update:visible","success","close"],setup(l,{emit:i}){const r=l,n=i,{dialogSize:g}=ma(),s=F(),_=F(),d=F(!1),y=F([]),a=Oe({}),S=F([]),$=F([]),N=x(()=>{var t;return(t=a.product)==null?void 0:t.encryption_alg.map(e=>({label:e.toUpperCase(),value:e.toLowerCase()}))}),H=x(()=>a.encryption.alg==="rsa"?[{label:"2048",value:2048},{label:"4096",value:4096}]:[{label:"256",value:256},{label:"384",value:384},{label:"512",value:512}]),pe=x(()=>{var t;return(t=a.product)==null?void 0:t.signature_digest_alg.map(e=>({label:e.toUpperCase(),value:e.toLowerCase()}))}),E=x(()=>r.actionType==="batchApply"),M=x(()=>{var t;return(((t=a.product)==null?void 0:t.validation_type)||"dv")!=="dv"}),j=x(()=>{var t;return((t=a.product)==null?void 0:t.product_type)||"ssl"}),L=x(()=>j.value==="ssl"),W=x(()=>j.value==="smime"),ee=x(()=>j.value==="codesign"),ae=x(()=>j.value==="docsign"),I=x(()=>{var e;if(!W.value)return"";const t=(((e=a.product)==null?void 0:e.code)||"").toLowerCase();return t.includes("mailbox")?"mailbox":t.includes("individual")?"individual":t.includes("sponsor")?"sponsor":t.includes("organization")?"organization":"unknown"}),X=x(()=>["individual","sponsor","organization"].includes(I.value)),ne=x(()=>["sponsor","organization"].includes(I.value)),fe=x(()=>["sponsor","organization"].includes(I.value)),u=x(()=>!0),p=x(()=>a.csr_generate===1),k=F(!1),A=x(()=>r.actionType==="apply"?"申请证书":r.actionType==="batchApply"?"批量申请":r.actionType==="renew"?"续费证书":r.actionType==="reissue"?"重签证书":""),T=(t,e,h,w)=>{const f=t.slice(0,2)=="*.";if(f&&!e.includes("wildcard"))w[h]=t.slice(2),a.domains=w.join(`
`);else if(De(t,4)){if(!e.includes("ipv4"))return t+" 不能为IPV4"}else if(De(t,6)){if(!e.includes("ipv6"))return t+" 不能为IPV6"}else if(Pe(t)&&!e.includes("standard"))w[h]="*."+t,a.domains=w.join(`
`);else if(!Pe(f?t.slice(2):t))return t+" 格式错误";return""},z=t=>t.includes("*.www.")?ia.confirm("检测到域名中包含 *.www. 通配符，通常情况下 www. 不需要包含在通配符证书中。是否继续？","域名确认",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(()=>!0).catch(()=>!1):Promise.resolve(!0),G=(t,e,h)=>{if(!e)return h(new Error("请输入域名"));a.domains=e.replaceAll(" ","").replaceAll("　","").replaceAll("	","").toLowerCase(),a.domains=a.domains.replace(/(\n[\s\t]*\r*\n)/g,`
`).replace(/^[\n\r\t]*|[\n\r\t]*$/g,""),z(a.domains).then(w=>{if(!w)return h(new Error("请删除 www."));Be(h)})},Be=t=>{var C,q,D;((C=a.product)==null?void 0:C.total_max)===1&&!E.value&&(a.domains=a.domains.split(`
`)[0]);const e=a.domains.split(`
`).filter(P=>P!==""),h=[...new Set(e)];if(e.length!==h.length)return t(new Error("域名重复"));if(!((q=a.product)!=null&&q.common_name_types))return t(new Error("请选择产品"));const w=[];if(e.length>0)if(w.push(T(e[0],a.product.common_name_types,0,e)||""),E.value)e.slice(1).forEach((P,K)=>{w.push(T(P,a.product.common_name_types,K+1,e)||"")});else{if(e.length>1&&!((D=a.product)!=null&&D.alternative_name_types))return t(new Error("请选择产品"));e.length>1&&e.slice(1).forEach((P,K)=>{w.push(T(P,a.product.alternative_name_types,K+1,e)||"")})}const f=w.filter(Boolean);f.length>0?t(new Error(f.join(`
`))):t()},R=Oe({csr_generate:[{required:!0,message:"请选择CSR生成方式",trigger:"change"}],csr:[{required:!0,message:"请输入CSR",trigger:"blur"}],product_id:[{required:!0,message:"请选择产品",trigger:"change"}],domains:[{required:!0,validator:G,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],validation_method:[{required:!0,message:"请选择验证方式",trigger:"change"}],period:[{required:!0,message:"请选择周期",trigger:"change"}]}),Ne=()=>{R.domains=L.value?[{required:!0,validator:G,trigger:"blur"}]:[],R.email=W.value?[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]:[],R.validation_method=L.value?[{required:!0,message:"请选择验证方式",trigger:"change"}]:[],R.csr=u.value?[{required:!0,message:"请输入CSR",trigger:"blur"}]:[]},Me=()=>{a.encryption.bits=a.encryption.alg==="rsa"?2048:256},oe=t=>{t&&qe(t).then(({data:e})=>{if(a.product=Ae(se({},a.product),{product_type:e.product_type||"ssl",code:e.code,total_max:e.total_max,validation_type:e.validation_type,common_name_types:e.common_name_types,alternative_name_types:e.alternative_name_types,encryption_alg:e.encryption_alg,signature_digest_alg:e.signature_digest_alg,name:e.name,brand:e.brand,add_san:e.add_san,replace_san:e.replace_san,renew:e.renew,reissue:e.reissue,reuse_csr:e.reuse_csr,gift_root_domain:e.gift_root_domain,period:{option:[]},validation_method:{option:[]}}),a.period="",S.value=[],e.periods&&e.periods.length>0){const f=e.periods.sort((C,q)=>C-q);S.value=f.map(C=>({label:pa[C],value:C})),a.period=f[0]}if(a.validation_method="",$.value=[],e.validation_methods&&e.validation_methods.length>0){const f=e.validation_methods.sort((C,q)=>Object.keys(ge).indexOf(C)-Object.keys(ge).indexOf(q));$.value=f.map(C=>({label:ge[C],value:C})),a.validation_method=f[0]}a.product.reuse_csr||(a.csr=""),r.actionType==="reissue"&&a.product.reuse_csr&&(a.csr_generate=0),Ne();const h=M.value||ee.value||ae.value||fe.value;R.organization=[{required:h&&["apply","batchApply","renew"].includes(r.actionType),message:"请选择组织",trigger:"change"}];const w=M.value||X.value;R.contact=[{required:w&&["apply","batchApply","renew"].includes(r.actionType),message:"请选择联系人",trigger:"change"}]})},Ie=t=>{wa(t).then(({data:e})=>{var h,w,f;a.product_id=e.product_id,y.value=["product_id"],(h=e.latest_cert)!=null&&h.alternative_names&&(a.domains=e.latest_cert.alternative_names.replaceAll(",",`
`).trim()),r.actionType==="reissue"&&((w=e.latest_cert)!=null&&w.csr)&&(a.csr=e.latest_cert.csr),((f=e.product)==null?void 0:f.alternative_name_types.length)===0&&(a.domains=e.latest_cert.common_name),a.order_id=t,oe(e.product_id)})},ie=()=>{var e,h;const t={};return t.product_type=j.value,u.value&&(t.csr_generate=a.csr_generate,a.csr_generate?t.encryption=a.encryption:t.csr=a.csr),L.value&&["apply","batchApply","renew","reissue"].includes(r.actionType)&&(t.domains=(e=a.domains)==null?void 0:e.replace(/\n/g,","),t.validation_method=a.validation_method),W.value&&(t.email=a.email),["apply","batchApply","renew"].includes(r.actionType)&&(t.period=a.period),(M.value||ee.value||ae.value||ne.value)&&r.actionType!=="reissue"&&(t.organization=a.organization),(M.value||X.value)&&r.actionType!=="reissue"&&(t.contact=a.contact),["apply","batchApply"].includes(r.actionType)&&(t.product_id=a.product_id,t.plus=(h=ve.currentRoute.value.query.plus)!=null?h:1),["renew","reissue"].includes(r.actionType)&&(t.order_id=a.order_id),t},je=()=>te(null,null,function*(){if(s.value)try{if(yield s.value.validate(),d.value=!0,r.actionType==="apply")yield Va(ie());else if(r.actionType==="batchApply")yield Fa(ie());else if(r.actionType==="renew")yield Ca(ie());else if(r.actionType==="reissue")yield xa(ie());else{Te("未知的操作类型",{type:"error"}),d.value=!1;return}Te("提交成功",{type:"success"}),n("success"),n("update:visible",!1)}finally{d.value=!1}}),he=()=>{n("update:visible",!1),n("close")},we=t=>{n("update:visible",!1),n("close"),setTimeout(()=>{ve.push(t)},200)},Ve=()=>{Object.keys(a).forEach(t=>{delete a[t]}),Object.entries(ha).forEach(([t,e])=>{typeof e=="object"&&e!==null?a[t]=JSON.parse(JSON.stringify(e)):a[t]=e}),y.value=[],S.value=[],$.value=[],setTimeout(()=>{var t;(t=s.value)==null||t.clearValidate()},0)};Ve();const{product_id:Fe}=ve.currentRoute.value.query;return re(()=>[r.visible,r.orderId,r.actionType],([t,e,h],w)=>{const[f=!1,C=null,q=null]=Array.isArray(w)?w:[];t&&!f&&(e!==C||h!==q)&&(Ve(),setTimeout(()=>{if(e&&["renew","reissue"].includes(h)&&Ie(e),["batchApply","apply"].includes(h)&&Fe){const D=Number(Fe);qe(D).then(({data:P})=>{setTimeout(()=>{if(_.value){const K={label:P.name,value:P.id};_.value.options||(_.value.options=[]),_.value.options.some(me=>me.value===P.id)||_.value.options.push(K),setTimeout(()=>{a.product_id=D,oe(D)},100)}else a.product_id=D,oe(D)},200)})}},100))}),(t,e)=>{const h=O("el-radio"),w=O("el-radio-group"),f=O("el-form-item"),C=O("el-input"),q=O("el-option"),D=O("el-select"),P=O("el-col"),K=O("el-row"),le=O("el-button"),me=O("el-form"),Le=O("el-dialog");return v(),V(Le,{"model-value":l.visible,title:A.value,width:B(g),"before-close":he,"destroy-on-close":"","append-to-body":"","onUpdate:modelValue":e[15]||(e[15]=o=>t.$emit("update:visible",o))},{footer:c(()=>[Q("div",qa,[m(le,{onClick:he},{default:c(()=>[...e[18]||(e[18]=[ue("取消",-1)])]),_:1}),m(le,{type:"primary",loading:d.value,onClick:je},{default:c(()=>[...e[19]||(e[19]=[ue("提交",-1)])]),_:1},8,["loading"])])]),default:c(()=>[Q("div",Sa,[m(me,{ref_key:"formRef",ref:s,model:a,"label-position":B(g)=="90%"?"top":"right","label-width":"90px"},{default:c(()=>[u.value?(v(),V(f,{key:0,label:" ",prop:"csr_generate"},{default:c(()=>[m(w,{modelValue:a.csr_generate,"onUpdate:modelValue":e[0]||(e[0]=o=>a.csr_generate=o),disabled:E.value},{default:c(()=>[m(h,{value:1},{default:c(()=>[...e[16]||(e[16]=[ue(ye("自动生成CSR"),-1)])]),_:1}),m(h,{value:0},{default:c(()=>[...e[17]||(e[17]=[ue(ye("已有CSR"),-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})):U("",!0),u.value&&!parseInt(a.csr_generate)?(v(),V(f,{key:1,label:"CSR",prop:"csr",rules:R.csr},{default:c(()=>[m(C,{modelValue:a.csr,"onUpdate:modelValue":e[1]||(e[1]=o=>a.csr=o),type:"textarea",rows:5,placeholder:"请输入CSR"},null,8,["modelValue"])]),_:1},8,["rules"])):U("",!0),["apply","batchApply"].includes(l.actionType)?(v(),V(f,{key:2,label:"产品",prop:"product_id",rules:R.product_id},{default:c(()=>[m(B(_e),{ref_key:"productSelectRef",ref:_,modelValue:a.product_id,"onUpdate:modelValue":e[2]||(e[2]=o=>a.product_id=o),uri:"/product",searchField:"quickSearch",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择产品",pageSize:100,showPagination:!1,disabled:y.value.includes("product_id"),queryParams:{domains:E.value?"single":"",product_type:E.value?"ssl":""},onChange:oe},null,8,["modelValue","disabled","queryParams"])]),_:1},8,["rules"])):U("",!0),L.value?(v(),V(f,{key:3,label:"域名",prop:"domains",rules:R.domains},{default:c(()=>{var o,Ce;return[m(C,{modelValue:a.domains,"onUpdate:modelValue":e[3]||(e[3]=Ke=>a.domains=Ke),type:E.value||((o=a.product)==null?void 0:o.total_max)>1?"textarea":"text",autosize:{minRows:3,maxRows:10},placeholder:"请输入域名"+(E.value||((Ce=a.product)==null?void 0:Ce.total_max)>1?"，一行一个":"")},null,8,["modelValue","type","placeholder"])]}),_:1},8,["rules"])):U("",!0),W.value?(v(),V(f,{key:4,label:"邮箱",prop:"email",rules:R.email},{default:c(()=>[m(C,{modelValue:a.email,"onUpdate:modelValue":e[4]||(e[4]=o=>a.email=o),type:"text",placeholder:"请输入邮箱地址"},null,8,["modelValue"])]),_:1},8,["rules"])):U("",!0),m(K,{gutter:20},{default:c(()=>[m(P,{span:12},{default:c(()=>[r.actionType!=="reissue"?(v(),V(f,{key:0,label:"有效期",prop:"period",rules:R.period},{default:c(()=>[m(D,{modelValue:a.period,"onUpdate:modelValue":e[5]||(e[5]=o=>a.period=o),placeholder:"请选择有效期",style:{width:"100%"}},{default:c(()=>[(v(!0),J(Y,null,Z(S.value,o=>(v(),V(q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])):U("",!0),L.value?(v(),V(f,{key:1,label:"验证方式",prop:"validation_method",rules:R.validation_method},{default:c(()=>[m(D,{modelValue:a.validation_method,"onUpdate:modelValue":e[6]||(e[6]=o=>a.validation_method=o),placeholder:"请选择验证方式",style:{width:"100%"}},{default:c(()=>[(v(!0),J(Y,null,Z($.value,o=>(v(),V(q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])):U("",!0)]),_:1})]),_:1}),(M.value||ee.value||ae.value||ne.value)&&r.actionType!=="reissue"?(v(),V(f,{key:5,label:"组织",prop:"organization",rules:R.organization},{default:c(()=>[Q("div",Ta,[m(B(_e),{modelValue:a.organization,"onUpdate:modelValue":e[7]||(e[7]=o=>a.organization=o),uri:"/organization",searchField:"name",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择组织",disabled:!a.product_id,style:{flex:"1"}},null,8,["modelValue","disabled"]),m(le,{link:"",icon:B(Se)("ep/edit",{color:"var(--el-color-primary)"}),disabled:!a.product_id,class:"ml-auto",onClick:e[8]||(e[8]=o=>we("/organization"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):U("",!0),(M.value||X.value)&&r.actionType!=="reissue"?(v(),V(f,{key:6,label:"联系人",prop:"contact",rules:R.contact},{default:c(()=>[Q("div",Ra,[m(B(_e),{modelValue:a.contact,"onUpdate:modelValue":e[9]||(e[9]=o=>a.contact=o),uri:"/contact",searchField:"first_name",labelField:"first_name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择联系人",disabled:!a.product_id},null,8,["modelValue","disabled"]),m(le,{link:"",icon:B(Se)("ep/edit",{color:"var(--el-color-primary)"}),disabled:!a.product_id,class:"ml-auto",onClick:e[10]||(e[10]=o=>we("/contact"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):U("",!0),p.value?(v(),V(B(ba),{key:7,modelValue:k.value,"onUpdate:modelValue":e[14]||(e[14]=o=>k.value=o),title:"加密选项",border:!1},{default:c(()=>[m(K,{gutter:20},{default:c(()=>[m(P,{span:12},{default:c(()=>[m(f,{label:"加密算法",prop:"encryption.alg"},{default:c(()=>[m(D,{modelValue:a.encryption.alg,"onUpdate:modelValue":e[11]||(e[11]=o=>a.encryption.alg=o),placeholder:"请选择加密算法",style:{width:"100%"},onChange:Me},{default:c(()=>[(v(!0),J(Y,null,Z(N.value,o=>(v(),V(q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(f,{label:"密钥长度",prop:"encryption.bits"},{default:c(()=>[m(D,{modelValue:a.encryption.bits,"onUpdate:modelValue":e[12]||(e[12]=o=>a.encryption.bits=o),placeholder:"请选择密钥长度",style:{width:"100%"}},{default:c(()=>[(v(!0),J(Y,null,Z(H.value,o=>(v(),V(q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(f,{label:"摘要算法",prop:"encryption.digest_alg"},{default:c(()=>[m(D,{modelValue:a.encryption.digest_alg,"onUpdate:modelValue":e[13]||(e[13]=o=>a.encryption.digest_alg=o),placeholder:"请选择摘要算法",style:{width:"100%"}},{default:c(()=>[(v(!0),J(Y,null,Z(pe.value,o=>(v(),V(q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):U("",!0)]),_:1},8,["model","label-position"])])]),_:1},8,["model-value","title","width"])}}}),gl=Ee(Da,[["__scopeId","data-v-937c5915"]]);function _l(){const l=sa(),i=ua(),r=da(l.params)?l.query:l.params;function n(s,_){Object.keys(s).forEach(d=>{ca(s[d])||(s[d]=s[d].toString())}),_==="query"?(Re().handleTags("push",{path:`/order/details/${s.ids}`,name:"OrderDetails",query:s,meta:{title:"订单详情",dynamicLevel:10}}),i.push({name:"OrderDetails",query:s})):_==="params"&&(Re().handleTags("push",{path:`/order/details/${s.ids}`,name:"OrderDetails",params:s,meta:{title:"订单详情"}}),i.push({name:"OrderDetails",params:s}))}return{toDetail:n,initToDetail:s=>{r&&n(r,s)},getParameter:r,router:i}}export{ol as A,vl as B,Xa as C,wa as D,Wa as E,La as F,Ja as G,gl as O,pl as a,ul as b,nl as c,fl as d,ml as e,dl as f,cl as g,sl as h,Ba as i,il as j,Ha as k,Ka as l,Ia as m,Qa as n,Ga as o,Ma as p,Na as q,ja as r,rl as s,Ya as t,_l as u,Za as v,el as w,al as x,ll as y,tl as z};
