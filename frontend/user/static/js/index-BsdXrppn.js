var W=Object.defineProperty,j=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var z=(n,a,e)=>a in n?W(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,S=(n,a)=>{for(var e in a||(a={}))M.call(a,e)&&z(n,e,a[e]);if(w)for(var e of w(a))U.call(a,e)&&z(n,e,a[e]);return n},x=(n,a)=>j(n,G(a));import{P as X,a as D}from"./plus-search-c0Rc60Ks.js";import{i as H,b as T,e as B,c as R,n as F,a as k}from"./product-wxL9ae48.js";import{l as h,m as J,z as V,ab as O,t as K,n as Q,p as Y,e as s,r as v,aF as Z,aX as ee,d as ae,v as te,c as le,o as A,f as ne,g as r,x as re,j as f,i as oe,A as ie,h as I,_ as se}from"./index-BYBE9pGo.js";import"./epTheme-D65YeBaY.js";import"./index-BrX6sF8q.js";function pe(n){const a=h({}),e=h([]),l=h(!0),t=J({total:0,pageSize:100,currentPage:1,background:!0,pageSizes:[10,20,50,100],hideOnSinglePage:!0}),p=V(()=>t.total<=t.pageSize);function o(i){t.pageSize=i,m()}function b(i){t.currentPage=i,m()}function m(){l.value=!0;const i=x(S({},K(a.value)),{pageSize:t.pageSize,currentPage:t.currentPage});H(i).then(({data:c})=>{e.value=c.items,t.total=c.total,t.pageSize=c.pageSize,t.currentPage=c.currentPage,Q(()=>{n.value&&n.value.getTableRef().clearSelection()})}).finally(()=>{l.value=!1})}function y(i){O.push({name:"Order",query:{product_id:i.id,type:"apply"}})}function g(i){O.push({name:"Order",query:{product_id:i.id,type:"batchApply"}})}return{loading:l,search:a,dataList:e,pagination:t,isSinglePage:p,handleSizeChange:o,handleCurrentChange:b,onSearch:m,handleApply:y,handleBatchApply:g}}const _=(n,a)=>(e,l)=>{const t=h(e),p=o=>{t.value===o?(t.value=void 0,l(void 0)):(t.value=o,l(o))};return s("div",{class:"flex flex-wrap gap-1 items-center"},[s("div",{class:"flex flex-wrap gap-1"},[n.map(o=>s(v("el-button"),{key:o.value,type:t.value===o.value?"primary":"default",onClick:()=>p(o.value),class:"ml-3 w-28"},{default:()=>[o.label]}))]),(a==null?void 0:a.showToggleButton)&&s(v("el-button"),{type:"primary",link:!0,onClick:a.onToggle,class:"ml-3 flex items-center whitespace-nowrap text-base"},{default:()=>[s(v("el-icon"),{class:"mr-1"},{default:()=>[a.collapsed?s(Z,null,null):s(ee,null,null)]}),a.collapsed?"展开":"收起"]})])},ce=n=>{const a=Y(()=>{n()},500),e=h(!0),l=()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)},t=()=>{e.value=!e.value,l()};return{searchColumns:V(()=>[{label:"证书品牌",prop:"brand",valueType:"radio",options:T,renderField:_(T,{showToggleButton:!0,onToggle:t,collapsed:e.value})},{label:"加密标准",prop:"encryption_standard",valueType:"radio",options:B,renderField:_(B),hideInSearch:e.value},{label:"验证类型",prop:"validation_type",valueType:"radio",options:R,renderField:_(R),hideInSearch:e.value},{label:"域名类型",prop:"name_type",valueType:"radio",options:F,renderField:_(F),hideInSearch:e.value},{label:"快速搜索",prop:"quickSearch",valueType:"input",fieldProps:{placeholder:"编码/名称/备注",clearable:!0,style:{width:"240px"},class:"ml-3"},hideInSearch:e.value}]),debouncedSearch:a}},de=()=>({tableRef:h(),tableColumns:[{label:"名称",prop:"name",minWidth:150},{label:"说明",prop:"remark",minWidth:150},{label:"价格",prop:"price.price",width:100,formatter(e){var l;return(l=e.price)!=null&&l.price&&e.price.price!=="0.00"?parseFloat(e.price.price)+"/"+k[e.price.period]:"-"}},{label:"附加标准域名价格",prop:"price.alternative_standard_price",width:150,formatter(e){var l;return(l=e.price)!=null&&l.alternative_standard_price&&e.price.alternative_standard_price!=="0.00"?parseFloat(e.price.alternative_standard_price)+"/"+k[e.price.period]:"-"}},{label:"附加通配符价格",prop:"price.alternative_wildcard_price",width:150,formatter(e){var l;return(l=e.price)!=null&&l.alternative_wildcard_price&&e.price.alternative_wildcard_price!=="0.00"?parseFloat(e.price.alternative_wildcard_price)+"/"+k[e.price.period]:"-"}},{label:"操作",slot:"operation",width:110,fixed:"right"}]}),ue={class:"main"},he={class:"search bg-bg_color w-[99/100] pl-4 pr-4 pt-[24px] pb-[12px] overflow-auto"},me=ae({name:"Product",__name:"index",setup(n){const{tableRef:a,tableColumns:e}=de(),{loading:l,search:t,dataList:p,pagination:o,isSinglePage:b,handleSizeChange:m,handleCurrentChange:y,onSearch:g,handleApply:i,handleBatchApply:c}=pe(a),{searchColumns:N,debouncedSearch:q}=ce(()=>g());return te(()=>{g()}),(ge,d)=>{const P=v("el-button"),E=v("pure-table");return A(),le("div",ue,[ne("div",he,[s(r(X),{modelValue:r(t),"onUpdate:modelValue":d[0]||(d[0]=u=>re(t)?t.value=u:null),columns:r(N),"show-number":6,"col-props":{xs:24,sm:24,md:24,lg:24,xl:24},"label-width":"80","label-position":"right","label-suffix":"","has-footer":!1,onChange:r(q)},null,8,["modelValue","columns","onChange"])]),s(r(D),{title:"产品列表",columns:r(e),onRefresh:r(g)},{default:f(({size:u,dynamicColumns:L})=>[s(E,{ref_key:"tableRef",ref:a,"row-key":"id","align-whole":"left","table-layout":"auto",loading:r(l),size:u,adaptive:"",adaptiveConfig:{offsetBottom:r(b)?44:108},data:r(p),columns:L,pagination:x(S({},r(o)),{size:u}),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onPageSizeChange:r(m),onPageCurrentChange:r(y)},{operation:f(({row:C})=>[s(P,{class:"reset-margin !outline-none",type:"primary",link:"",size:u,onClick:$=>r(i)(C)},{default:f(()=>d[1]||(d[1]=[I(" 申请 ")])),_:2},1032,["size","onClick"]),C.alternative_name_types.length?ie("",!0):(A(),oe(P,{key:0,class:"reset-margin !outline-none",type:"primary",link:"",size:u,onClick:$=>r(c)(C)},{default:f(()=>d[2]||(d[2]=[I(" 批量 ")])),_:2},1032,["size","onClick"]))]),_:2},1032,["loading","size","adaptiveConfig","data","columns","pagination","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["columns","onRefresh"])])}}}),Se=se(me,[["__scopeId","data-v-6020764f"]]);export{Se as default};
