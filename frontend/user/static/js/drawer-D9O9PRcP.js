var k=(d,p,t)=>new Promise((u,n)=>{var v=r=>{try{w(t.next(r))}catch(f){n(f)}},S=r=>{try{w(t.throw(r))}catch(f){n(f)}},w=r=>r.done?u(r.value):Promise.resolve(r.value).then(v,S);w((t=t.apply(d,p)).next())});import{u as O,f as z,P as W,i as q,g as A,a as K,b as x,_ as G}from"./index-DGc7w2v0.js";import{d as H,l as b,z as J,as as Q,V as B,i as X,o as Y,aK as C,j as s,ag as c,f as Z,aw as h,ax as V,e as F,g as l,aR as P,h as D,B as I,au as L,a1 as E,b9 as ee,ba as N,v as ae,aq as oe}from"./index-x__-92eX.js";const se={class:"plus-drawer-form__footer"};var re=H({name:"PlusDrawerForm",__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},drawer:{default:()=>({})},size:{default:"540px"},form:{default:()=>({})},hasFooter:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},confirmLoading:{type:Boolean,default:!1},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(d,{expose:p,emit:t}){const u=d,n=t,{t:v}=O(),S=b(null),w=J(()=>{var e;return(e=S.value)==null?void 0:e.formInstance}),r=b(),f=b({}),g=b(!1),y=Q(),_=z(y,A()),j=z(y,K()),R=z(y,x());B(()=>u.visible,e=>{g.value=e},{immediate:!0}),B(()=>u.modelValue,e=>{f.value=e},{immediate:!0});const U=(e,i)=>{n("update:modelValue",e),n("change",e,i)},T=()=>k(null,null,function*(){var e,i,o;try{(yield(e=w.value)==null?void 0:e.validate())&&n("confirm",f.value)}catch(a){if(u.hasErrorTip){N.closeAll();const m=q(a)&&Object.values(a),M=m?(o=(i=m[0])==null?void 0:i[0])==null?void 0:o.message:void 0;N.warning(M||v("plus.form.errorTip"))}n("confirmError",a)}}),$=()=>{g.value=!1,n("update:visible",g.value),n("cancel")};return p({drawerInstance:r,formInstance:w}),(e,i)=>(Y(),X(l(ee),L({ref_key:"drawerInstance",ref:r,modelValue:g.value,"onUpdate:modelValue":i[1]||(i[1]=o=>g.value=o),class:"plus-drawer-form",size:e.size||"540px",title:l(v)("plus.drawerForm.title"),"close-on-click-modal":!1,"close-on-press-escape":!1},e.$attrs,{onClose:$}),C({default:s(()=>[F(l(W),L({ref_key:"formInstance",ref:S,modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=o=>f.value=o),"has-footer":!1},e.form,{onChange:U}),C({_:2},[e.$slots["form-footer"]?{name:"footer",fn:s(()=>[c(e.$slots,"form-footer")]),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:s(o=>[c(e.$slots,"form-group-header",h(V(o)))]),key:"1"}:void 0,E(l(_),(o,a)=>({name:a,fn:s(m=>[c(e.$slots,a,h(V(m)))])})),E(l(j),(o,a)=>({name:a,fn:s(m=>[c(e.$slots,a,h(V(m)))])})),E(l(R),(o,a)=>({name:a,fn:s(m=>[c(e.$slots,a,h(V(m)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:s(()=>[c(e.$slots,"tooltip-icon")]),key:"2"}:void 0]),1040,["modelValue"])]),_:2},[e.$slots["drawer-header"]?{name:"header",fn:s(()=>[c(e.$slots,"drawer-header")]),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:s(()=>[Z("div",se,[c(e.$slots,"drawer-footer",h(V({handleConfirm:T,handleCancel:$})),()=>[F(l(P),{onClick:$},{default:s(()=>[D(I(e.cancelText||l(v)("plus.drawerForm.cancelText")),1)]),_:1}),F(l(P),{type:"primary",loading:e.confirmLoading,onClick:T},{default:s(()=>[D(I(e.confirmText||l(v)("plus.drawerForm.confirmText")),1)]),_:1},8,["loading"])])])]),key:"1"}:void 0]),1040,["modelValue","size","title"]))}}),le=G(re,[["__file","index.vue"]]);const de=le;function ue(){const d=b(520),p=()=>{const u=window.innerWidth;u>2080?d.value="25%":u>=520?d.value=520:d.value="90%"},t=()=>{p()};return ae(()=>{p(),window.addEventListener("resize",t)}),oe(()=>{window.removeEventListener("resize",t)}),{drawerSize:d}}export{de as P,ue as u};
