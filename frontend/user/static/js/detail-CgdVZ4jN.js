var qe=Object.defineProperty,Pe=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var be=(t,o,l)=>o in t?qe(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,le=(t,o)=>{for(var l in o||(o={}))Ee.call(o,l)&&be(t,l,o[l]);if(ye)for(var l of ye(o))Me.call(o,l)&&be(t,l,o[l]);return t},he=(t,o)=>Pe(t,ze(o));var Z=(t,o,l)=>new Promise((r,_)=>{var u=b=>{try{d(l.next(b))}catch(a){_(a)}},y=b=>{try{d(l.throw(b))}catch(a){_(a)}},d=b=>b.done?r(b.value):Promise.resolve(b.value).then(u,y);d((l=l.apply(t,o)).next())});import{k as g,aW as ke,l as F,d as ve,z as j,V as Y,v as Be,r as C,i as A,o as w,au as Ie,aK as Ue,j as c,e as f,c as L,a0 as Q,a1 as W,f as I,g as P,aF as Ne,aX as je,B as me,a4 as Le,w as Ke,Z as He,ag as Qe,_ as Re,a9 as We,m as we,ab as ce,A as H,h as re,y as Ve,aH as Ge,s as Je,u as Xe,aY as Ze,aZ as Ye,I as Fe}from"./index-CSl49lHz.js";import{s as Ae,a as ea,v as pe}from"./product-DDJsCcgs.js";import{r as aa,i as Te}from"./isIP-1bK5woA2.js";import{u as ta}from"./dialog-dIGD7V0t.js";import{u as Ce}from"./hooks-BmqCneXq.js";const la={csr_generate:1,encryption:{alg:"rsa",bits:2048,digest_alg:"sha256"}};function Oa(t){return g.get("/order",{params:t})}function ra(t){return g.get(`/order/${t}`)}function Sa(t){return g.get("/order/batch",{params:{ids:t}})}function na(t){return g.post("/order/new",{data:t})}function oa(t){return g.post("/order/batch-new",{data:t})}function sa(t){return g.post("/order/renew",{data:t})}function ia(t){return g.post("/order/reissue",{data:t})}function ka(t,o){return g.post(`/order/pay/${t}`,{data:o})}function Ra(t){return g.post(`/order/commit/${t}`)}function Da(t){return g.post(`/order/revalidate/${t}`)}function $a(t,o){return g.post(`/order/update-dcv/${t}`,{data:{method:o}})}function qa(t){return g.post(`/order/remove-mdc-domain/${t}`)}function Pa(t){return g.post(`/order/sync/${t}`)}function za(t){return g.post(`/order/commit-cancel/${t}`)}function Ea(t){return g.post(`/order/revoke-cancel/${t}`)}function Ma(t,o){return g.post(`/order/remark/${t}`,{data:{remark:o}})}function Ba(t,o){return g.get("/order/download",{params:{ids:t,type:o}},{responseType:"blob",beforeResponseCallback:l=>{const r=l.headers["content-disposition"];let _="certs.zip";if(r){const y=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(r);y!=null&&y[1]&&(_=decodeURIComponent(y[1].replace(/['"]/g,"")))}l.data instanceof Blob&&ke(l.data,_)}})}function Ia(t){return g.get(`/order/download-validate-file/${t}`,{},{responseType:"blob",beforeResponseCallback:o=>{const l=o.headers["content-disposition"];let r="验证文件.zip";if(l){const u=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(l);u!=null&&u[1]&&(r=decodeURIComponent(u[1].replace(/['"]/g,"")))}o.data instanceof Blob&&ke(o.data,r)}})}function Ua(t,o){return g.get(`/order/send-active/${t}`,{params:{email:o}})}function Na(t){return g.post("/order/batch-pay",{data:{ids:t}})}function ja(t){return g.post("/order/batch-commit",{data:{ids:t}})}function La(t){return g.post("/order/batch-revalidate",{data:{ids:t}})}function Ka(t){return g.post("/order/batch-sync",{data:{ids:t}})}function Ha(t){return g.post("/order/batch-commit-cancel",{data:{ids:t}})}function Qa(t){return g.post("/order/batch-revoke-cancel",{data:{ids:t}})}const Wa=[{label:"全部",value:"all"},{label:"活动中",value:"activating"},{label:"已存档",value:"archived"}],Ga=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"}],Ja=[{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],Xa={unpaid:"warning",pending:"primary",processing:"primary",approving:"primary",active:"success",failed:"danger",cancelling:"danger",cancelled:"danger",renewed:"info",replaced:"info",reissued:"info",expired:"info",revoked:"danger"},Za={unpaid:"待支付",pending:"待提交",processing:"待验证",approving:"待审核",active:"已签发",cancelling:"待取消",cancelled:"已取消",renewed:"已续期",replaced:"已替换",reissued:"已重签",expired:"已过期",revoked:"已吊销",failed:"已失败"},Ya=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"},{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],et={new:"新购",renew:"续期",reissue:"重签"},at={new:"success",renew:"success",reissue:"info"},tt=[{label:"新购",value:"new"},{label:"续期",value:"renew"},{label:"重签",value:"reissue"}],lt={admin:"后台",web:"网站",api:"API",acme:"ACME"},rt={admin:"warning",web:"info",api:"primary",acme:"success"},nt={cname:"解析验证(CNAME)",txt:"解析验证(TXT)",file:"文件验证(FILE)",http:"文件验证(HTTP)",https:"文件验证(HTTPS)",admin:"邮件验证(ADMIN)",administrator:"邮件验证(ADMINISTRATOR)",hostmaster:"邮件验证(HOSTMASTER)",postmaster:"邮件验证(POSTMASTER)",webmaster:"邮件验证(WEBMASTER)"};function ot(){const t=F({visible:!1,type:"",id:0});return{action:t,openAction:(l="apply",r=0)=>{t.value.id=r,t.value.type=l,t.value.visible=!0}}}const fe=ve({__name:"index",props:{modelValue:{},uri:{},searchField:{},labelField:{default:"name"},valueField:{default:"id"},placeholder:{default:"请选择"},pageSize:{default:7},showPagination:{type:Boolean,default:!0},queryParams:{default:()=>({})},itemsField:{default:"items"},totalField:{default:"total"},refreshKey:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{expose:o,emit:l}){const r=t,_=l,u=F([]),y=F(!1),d=F(1),b=F(r.pageSize),a=F(0),x=F(""),R=F(r.refreshKey),E=F(!0),ee=F(!0),se=j(()=>Math.ceil(a.value/b.value));Y(()=>r.refreshKey,(i,p)=>{i!==p&&p!==void 0&&(d.value=1,x.value="",E.value=!0,K()),R.value=i},{immediate:!0}),Y(()=>r.modelValue,i=>{i&&!M(i)&&z()&&G(i)},{immediate:!0});function z(){return r.refreshKey===void 0||r.refreshKey===null?!0:typeof r.refreshKey=="number"?r.refreshKey>0:r.refreshKey!==""}function M(i){return i?Array.isArray(i)?i.every(p=>u.value.some(V=>V.value===p)):u.value.some(p=>p.value===i):!0}Be(()=>Z(null,null,function*(){r.modelValue&&z()&&(yield G(r.modelValue))}));function G(i){return Z(this,null,function*(){if(i&&!M(i))try{y.value=!0;let p="",V={};if(Array.isArray(i)){const k=i.filter(O=>!u.value.some(U=>U.value===O));if(k.length===0)return;r.valueField==="id"?(p=`${r.uri}/batch`,V={ids:k}):(p=`${r.uri}`,V={[r.valueField]:k.join(",")})}else r.valueField==="id"?p=`${r.uri}/${i}`:(p=`${r.uri}`,V={[r.valueField]:i});const T=yield g.get(p,{params:V});if(T.data){const O=(Array.isArray(T.data.items)?T.data.items:Array.isArray(T.data)?T.data:[T.data]).map(U=>({label:U[r.labelField],value:U[r.valueField]}));u.value=ae(u.value,O)}}finally{y.value=!1}})}function ae(i,p){const V=[...i];for(const T of p)V.some(O=>O.value===T.value)||V.push(T);return V}function J(i){_("update:modelValue",i),_("change",i)}function ie(i){i&&ee.value&&(ee.value=!1,E.value=!0,K())}function K(){return Z(this,arguments,function*(i={}){if(!(y.value||!E.value))try{y.value=!0;const p=yield g.get(r.uri,{params:le(le({currentPage:d.value,pageSize:b.value},r.queryParams),i)});if(p.data){const V=(p.data[r.itemsField]||[]).map(k=>({label:k[r.labelField],value:k[r.valueField]})),T=te();u.value=ae(T,V),a.value=p.data[r.totalField]||0}E.value=!1}finally{y.value=!1}})}function te(){if(!r.modelValue)return[];const i=Array.isArray(r.modelValue)?r.modelValue:[r.modelValue];return u.value.filter(p=>i.includes(p.value))}o({getSelectedOptions:te,options:u});function $(i){if(x.value===""&&i==="")return;x.value=i,d.value=1,E.value=!0;const p={};p[r.searchField]=i,K(p)}function ue(i){d.value=i,E.value=!0;const p={};x.value&&(p[r.searchField]=x.value),K(p)}return(i,p)=>{const V=C("el-option"),T=C("el-pagination"),k=C("el-select");return w(),A(k,Ie({"model-value":i.modelValue,placeholder:i.placeholder,filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","remote-method":$,loading:y.value,multiple:i.multiple},i.$attrs,{"onUpdate:modelValue":J,onVisibleChange:ie}),Ue({default:c(()=>[(w(!0),L(Q,null,W(u.value,O=>(w(),A(V,{key:O.value,label:O.label,value:O.value},null,8,["label","value"]))),128))]),_:2},[i.showPagination&&se.value>1?{name:"footer",fn:c(()=>[f(T,{"current-page":d.value,"onUpdate:currentPage":p[0]||(p[0]=O=>d.value=O),"page-size":b.value,"pager-count":5,total:a.value,layout:"total, prev, pager, next",onCurrentChange:ue},null,8,["current-page","page-size","total"])]),key:"0"}:void 0]),1040,["model-value","placeholder","loading","multiple"])}}}),ua={class:"re-collapse-container"},da={class:"re-collapse-left"},ca={class:"re-collapse-title"},pa=ve({__name:"index",props:{title:{type:String,required:!0},modelValue:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{emit:o}){const l=t,r=o,_=F(l.modelValue),u=F(null);Y(()=>l.modelValue,d=>{_.value=d}),Y(()=>_.value,d=>{r("update:modelValue",d)});const y=()=>{_.value=!_.value};return(d,b)=>{const a=C("el-icon");return w(),L("div",ua,[I("div",{class:"re-collapse-header",onClick:y},[I("div",da,[f(a,{class:"re-collapse-icon"},{default:c(()=>[_.value?(w(),A(P(Ne),{key:0})):(w(),A(P(je),{key:1}))]),_:1}),I("span",ca,me(t.title),1)])]),f(Le,{name:"re-collapse"},{default:c(()=>[Ke(I("div",{ref_key:"collapseContent",ref:u,class:"re-collapse-content"},[Qe(d.$slots,"default",{},void 0,!0)],512),[[He,_.value]])]),_:3})])}}}),fa=Re(pa,[["__scopeId","data-v-bfb881f6"]]);var ne={exports:{}},oe={exports:{}},xe;function ma(){return xe||(xe=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=l;function l(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;for(var u in _)typeof r[u]=="undefined"&&(r[u]=_[u]);return r}t.exports=o.default,t.exports.default=o.default}(oe,oe.exports)),oe.exports}var Oe;function va(){return Oe||(Oe=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=y;var l=_(aa()),r=_(ma());function _(d){return d&&d.__esModule?d:{default:d}}var u={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function y(d,b){(0,l.default)(d),b=(0,r.default)(b,u),b.allow_trailing_dot&&d[d.length-1]==="."&&(d=d.substring(0,d.length-1)),b.allow_wildcard===!0&&d.indexOf("*.")===0&&(d=d.substring(2));var a=d.split("."),x=a[a.length-1];return b.require_tld&&(a.length<2||!b.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(x)||/\s/.test(x))||!b.allow_numeric_tld&&/^\d+$/.test(x)?!1:a.every(function(R){return!(R.length>63&&!b.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(R)||/[\uff01-\uff5e]/.test(R)||/^-|-$/.test(R)||!b.allow_underscores&&/_/.test(R))})}t.exports=o.default,t.exports.default=o.default}(ne,ne.exports)),ne.exports}var ga=va();const Se=We(ga),_a={class:"order-action-form"},ya={class:"inline-field"},ba={class:"inline-field"},ha={class:"order-action-footer"},wa=ve({__name:"action",props:{visible:{type:Boolean,default:!1},actionType:{type:String,default:""},orderId:{type:Number,default:0}},emits:["update:visible","success","close"],setup(t,{emit:o}){const l=t,r=o,{dialogSize:_}=ta(),u=F(),y=F(),d=F(!1),b=F([]),a=we({}),x=F([]),R=F([]),E=j(()=>{var n;return(n=a.product)==null?void 0:n.encryption_alg.map(e=>({label:e.toUpperCase(),value:e.toLowerCase()}))}),ee=j(()=>a.encryption.alg==="rsa"?[{label:"2048",value:2048},{label:"4096",value:4096}]:[{label:"256",value:256},{label:"384",value:384},{label:"512",value:512}]),se=j(()=>{var n;return(n=a.product)==null?void 0:n.signature_digest_alg.map(e=>({label:e.toUpperCase(),value:e.toLowerCase()}))}),z=j(()=>l.actionType==="batchApply"),M=j(()=>{var n;return(((n=a.product)==null?void 0:n.validation_type)||"dv")!=="dv"}),G=F(!1),ae=j(()=>l.actionType==="apply"?"申请证书":l.actionType==="batchApply"?"批量申请":l.actionType==="renew"?"续费证书":l.actionType==="reissue"?"重签证书":""),J=(n,e,v,m)=>{const h=n.slice(0,2)=="*.";if(h&&!e.includes("wildcard"))m[v]=n.slice(2),a.domains=m.join(`
`);else if(Te(n,4)){if(!e.includes("ipv4"))return n+" 不能为IPV4"}else if(Te(n,6)){if(!e.includes("ipv6"))return n+" 不能为IPV6"}else if(Se(n)&&!e.includes("standard"))m[v]="*."+n,a.domains=m.join(`
`);else if(!Se(h?n.slice(2):n))return n+" 格式错误";return""},ie=n=>n.includes("*.www.")?Ge.confirm("检测到域名中包含 *.www. 通配符，通常情况下 www. 不需要包含在通配符证书中。是否继续？","域名确认",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(()=>!0).catch(()=>!1):Promise.resolve(!0),K=(n,e,v)=>{if(!e)return v(new Error("请输入域名"));a.domains=e.replaceAll(" ","").replaceAll("　","").replaceAll("	","").toLowerCase(),a.domains=a.domains.replace(/(\n[\s\t]*\r*\n)/g,`
`).replace(/^[\n\r\t]*|[\n\r\t]*$/g,""),ie(a.domains).then(m=>{if(!m)return v(new Error("请删除 www."));te(v)})},te=n=>{var N,q,S;((N=a.product)==null?void 0:N.total_max)===1&&!z.value&&(a.domains=a.domains.split(`
`)[0]);const e=a.domains.split(`
`).filter(D=>D!==""),v=[...new Set(e)];if(e.length!==v.length)return n(new Error("域名重复"));if(!((q=a.product)!=null&&q.common_name_types))return n(new Error("请选择产品"));const m=[];if(e.length>0)if(m.push(J(e[0],a.product.common_name_types,0,e)||""),z.value)e.slice(1).forEach((D,B)=>{m.push(J(D,a.product.common_name_types,B+1,e)||"")});else{if(e.length>1&&!((S=a.product)!=null&&S.alternative_name_types))return n(new Error("请选择产品"));e.length>1&&e.slice(1).forEach((D,B)=>{m.push(J(D,a.product.alternative_name_types,B+1,e)||"")})}const h=m.filter(Boolean);h.length>0?n(new Error(h.join(`
`))):n()},$=we({csr_generate:[{required:!0,message:"请选择CSR生成方式",trigger:"change"}],csr:[{required:!0,message:"请输入CSR",trigger:"blur"}],product_id:[{required:!0,message:"请选择产品",trigger:"change"}],domains:[{required:!0,validator:K,trigger:"blur"}],validation_method:[{required:!0,message:"请选择验证方式",trigger:"change"}],period:[{required:!0,message:"请选择周期",trigger:"change"}]}),ue=()=>{a.encryption.bits=a.encryption.alg==="rsa"?2048:256},i=n=>{n&&Ae(n).then(({data:e})=>{if(a.product=he(le({},a.product),{total_max:e.total_max,validation_type:e.validation_type,common_name_types:e.common_name_types,alternative_name_types:e.alternative_name_types,encryption_alg:e.encryption_alg,signature_digest_alg:e.signature_digest_alg,name:e.name,brand:e.brand,add_san:e.add_san,replace_san:e.replace_san,renew:e.renew,reissue:e.reissue,reuse_csr:e.reuse_csr,gift_root_domain:e.gift_root_domain,period:{option:[]},validation_method:{option:[]}}),a.period="",x.value=[],e.periods&&e.periods.length>0){const v=e.periods.sort((m,h)=>m-h);x.value=v.map(m=>({label:ea[m],value:m})),a.period=v[0]}if(a.validation_method="",R.value=[],e.validation_methods&&e.validation_methods.length>0){const v=e.validation_methods.sort((m,h)=>Object.keys(pe).indexOf(m)-Object.keys(pe).indexOf(h));R.value=v.map(m=>({label:pe[m],value:m})),a.validation_method=v[0]}a.product.reuse_csr||(a.csr=""),l.actionType==="reissue"&&a.product.reuse_csr&&(a.csr_generate=0),$.organization=[{required:M.value,message:"请选择组织",trigger:"change"}],$.contact=[{required:M.value&&["apply","batchApply","renew"].includes(l.actionType),message:"请选择联系人",trigger:"change"}]})},p=n=>{ra(n).then(({data:e})=>{var v,m,h;a.product_id=e.product_id,b.value=["product_id"],(v=e.latest_cert)!=null&&v.alternative_names&&(a.domains=e.latest_cert.alternative_names.replaceAll(",",`
`).trim()),l.actionType==="reissue"&&((m=e.latest_cert)!=null&&m.csr)&&(a.csr=e.latest_cert.csr),((h=e.product)==null?void 0:h.alternative_name_types.length)===0&&(a.domains=e.latest_cert.common_name),a.order_id=n,i(e.product_id)})},V=()=>{var e,v;const n={csr_generate:a.csr_generate};return a.csr_generate?n.encryption=a.encryption:n.csr=a.csr,["apply","batchApply","renew","reissue"].includes(l.actionType)&&(n.domains=(e=a.domains)==null?void 0:e.replace(/\n/g,","),n.validation_method=a.validation_method),["apply","batchApply","renew"].includes(l.actionType)&&(n.period=a.period),M.value&&l.actionType!=="reissue"&&(n.organization=a.organization,n.contact=a.contact),["apply","batchApply"].includes(l.actionType)&&(n.product_id=a.product_id,n.plus=(v=ce.currentRoute.value.query.plus)!=null?v:1),["renew","reissue"].includes(l.actionType)&&(n.order_id=a.order_id),n},T=()=>Z(null,null,function*(){if(u.value)try{if(yield u.value.validate(),d.value=!0,l.actionType==="apply")yield na(V());else if(l.actionType==="batchApply")yield oa(V());else if(l.actionType==="renew")yield sa(V());else if(l.actionType==="reissue")yield ia(V());else{Ve("未知的操作类型",{type:"error"}),d.value=!1;return}Ve("提交成功",{type:"success"}),r("success"),r("update:visible",!1)}finally{d.value=!1}}),k=()=>{r("update:visible",!1),r("close")},O=n=>{r("update:visible",!1),r("close"),setTimeout(()=>{ce.push(n)},200)},U=()=>{Object.keys(a).forEach(n=>{delete a[n]}),Object.entries(la).forEach(([n,e])=>{typeof e=="object"&&e!==null?a[n]=JSON.parse(JSON.stringify(e)):a[n]=e}),b.value=[],x.value=[],R.value=[],setTimeout(()=>{var n;(n=u.value)==null||n.clearValidate()},0)};U();const{product_id:ge}=ce.currentRoute.value.query;return Y(()=>[l.visible,l.orderId,l.actionType],([n,e,v],m)=>{const[h=!1,N=null,q=null]=Array.isArray(m)?m:[];n&&!h&&(e!==N||v!==q)&&(U(),setTimeout(()=>{if(e&&["renew","reissue"].includes(v)&&p(e),["batchApply","apply"].includes(v)&&ge){const S=Number(ge);Ae(S).then(({data:D})=>{setTimeout(()=>{if(y.value){const B={label:D.name,value:D.id};y.value.options||(y.value.options=[]),y.value.options.some(de=>de.value===D.id)||y.value.options.push(B),setTimeout(()=>{a.product_id=S,i(S)},100)}else a.product_id=S,i(S)},200)})}},100))}),(n,e)=>{const v=C("el-radio"),m=C("el-radio-group"),h=C("el-form-item"),N=C("el-input"),q=C("el-option"),S=C("el-select"),D=C("el-col"),B=C("el-row"),X=C("el-button"),de=C("el-form"),De=C("el-dialog");return w(),A(De,{"model-value":t.visible,title:ae.value,width:P(_),"before-close":k,"destroy-on-close":"","append-to-body":"","onUpdate:modelValue":e[14]||(e[14]=s=>n.$emit("update:visible",s))},{footer:c(()=>[I("div",ha,[f(X,{onClick:k},{default:c(()=>e[17]||(e[17]=[re("取消")])),_:1}),f(X,{type:"primary",loading:d.value,onClick:T},{default:c(()=>e[18]||(e[18]=[re("提交")])),_:1},8,["loading"])])]),default:c(()=>[I("div",_a,[f(de,{ref_key:"formRef",ref:u,model:a,"label-position":P(_)=="90%"?"top":"right","label-width":"90px"},{default:c(()=>[f(h,{label:" ",prop:"csr_generate"},{default:c(()=>[f(m,{modelValue:a.csr_generate,"onUpdate:modelValue":e[0]||(e[0]=s=>a.csr_generate=s),disabled:z.value},{default:c(()=>[f(v,{value:1},{default:c(()=>e[15]||(e[15]=[re(me("自动生成CSR"))])),_:1}),f(v,{value:0},{default:c(()=>e[16]||(e[16]=[re(me("已有CSR"))])),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),parseInt(a.csr_generate)?H("",!0):(w(),A(h,{key:0,label:"CSR",prop:"csr",rules:$.csr},{default:c(()=>[f(N,{modelValue:a.csr,"onUpdate:modelValue":e[1]||(e[1]=s=>a.csr=s),type:"textarea",rows:5,placeholder:"请输入CSR"},null,8,["modelValue"])]),_:1},8,["rules"])),["apply","batchApply"].includes(t.actionType)?(w(),A(h,{key:1,label:"产品",prop:"product_id",rules:$.product_id},{default:c(()=>[f(P(fe),{ref_key:"productSelectRef",ref:y,modelValue:a.product_id,"onUpdate:modelValue":e[2]||(e[2]=s=>a.product_id=s),uri:"/product",searchField:"quickSearch",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择产品",pageSize:100,showPagination:!1,disabled:b.value.includes("product_id"),queryParams:{domains:z.value?"single":""},onChange:i},null,8,["modelValue","disabled","queryParams"])]),_:1},8,["rules"])):H("",!0),f(h,{label:"域名",prop:"domains",rules:$.domains},{default:c(()=>{var s,_e;return[f(N,{modelValue:a.domains,"onUpdate:modelValue":e[3]||(e[3]=$e=>a.domains=$e),type:z.value||((s=a.product)==null?void 0:s.total_max)>1?"textarea":"text",autosize:{minRows:3,maxRows:10},placeholder:"请输入域名"+(z.value||((_e=a.product)==null?void 0:_e.total_max)>1?"，一行一个":"")},null,8,["modelValue","type","placeholder"])]}),_:1},8,["rules"]),f(B,{gutter:20},{default:c(()=>[f(D,{span:12},{default:c(()=>[l.actionType!=="reissue"?(w(),A(h,{key:0,label:"有效期",prop:"period",rules:$.period},{default:c(()=>[f(S,{modelValue:a.period,"onUpdate:modelValue":e[4]||(e[4]=s=>a.period=s),placeholder:"请选择有效期",style:{width:"100%"}},{default:c(()=>[(w(!0),L(Q,null,W(x.value,s=>(w(),A(q,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])):H("",!0),f(h,{label:"验证方式",prop:"validation_method",rules:$.validation_method},{default:c(()=>[f(S,{modelValue:a.validation_method,"onUpdate:modelValue":e[5]||(e[5]=s=>a.validation_method=s),placeholder:"请选择验证方式",style:{width:"100%"}},{default:c(()=>[(w(!0),L(Q,null,W(R.value,s=>(w(),A(q,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),M.value&&l.actionType!=="reissue"?(w(),A(h,{key:2,label:"组织",prop:"organization",rules:$.organization},{default:c(()=>[I("div",ya,[f(P(fe),{modelValue:a.organization,"onUpdate:modelValue":e[6]||(e[6]=s=>a.organization=s),uri:"/organization",searchField:"name",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择组织",disabled:!a.product_id,style:{flex:"1"}},null,8,["modelValue","disabled"]),f(X,{link:"",icon:P(Ce)("ep/edit",{color:"var(--el-color-primary)"}),disabled:!a.product_id,class:"ml-auto",onClick:e[7]||(e[7]=s=>O("/organization"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):H("",!0),M.value&&l.actionType!=="reissue"?(w(),A(h,{key:3,label:"联系人",prop:"contact",rules:$.contact},{default:c(()=>[I("div",ba,[f(P(fe),{modelValue:a.contact,"onUpdate:modelValue":e[8]||(e[8]=s=>a.contact=s),uri:"/contact",searchField:"first_name",labelField:"first_name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择联系人",disabled:!a.product_id},null,8,["modelValue","disabled"]),f(X,{link:"",icon:P(Ce)("ep/edit",{color:"var(--el-color-primary)"}),disabled:!a.product_id,class:"ml-auto",onClick:e[9]||(e[9]=s=>O("/contact"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):H("",!0),a.csr_generate===1?(w(),A(P(fa),{key:4,modelValue:G.value,"onUpdate:modelValue":e[13]||(e[13]=s=>G.value=s),title:"加密选项",border:!1},{default:c(()=>[f(B,{gutter:20},{default:c(()=>[f(D,{span:12},{default:c(()=>[f(h,{label:"加密算法",prop:"encryption.alg"},{default:c(()=>[f(S,{modelValue:a.encryption.alg,"onUpdate:modelValue":e[10]||(e[10]=s=>a.encryption.alg=s),placeholder:"请选择加密算法",style:{width:"100%"},onChange:ue},{default:c(()=>[(w(!0),L(Q,null,W(E.value,s=>(w(),A(q,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),f(h,{label:"密钥长度",prop:"encryption.bits"},{default:c(()=>[f(S,{modelValue:a.encryption.bits,"onUpdate:modelValue":e[11]||(e[11]=s=>a.encryption.bits=s),placeholder:"请选择密钥长度",style:{width:"100%"}},{default:c(()=>[(w(!0),L(Q,null,W(ee.value,s=>(w(),A(q,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),f(h,{label:"摘要算法",prop:"encryption.digest_alg"},{default:c(()=>[f(S,{modelValue:a.encryption.digest_alg,"onUpdate:modelValue":e[12]||(e[12]=s=>a.encryption.digest_alg=s),placeholder:"请选择摘要算法",style:{width:"100%"}},{default:c(()=>[(w(!0),L(Q,null,W(se.value,s=>(w(),A(q,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):H("",!0)]),_:1},8,["model","label-position"])])]),_:1},8,["model-value","title","width"])}}}),st=Re(wa,[["__scopeId","data-v-d6e9f429"]]);function it(){const t=Je(),o=Xe(),l=Ze(t.params)?t.query:t.params;function r(u,y){Object.keys(u).forEach(d=>{Ye(u[d])||(u[d]=u[d].toString())}),y==="query"?(Fe().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",query:u,meta:{title:"订单详情",dynamicLevel:10}}),o.push({name:"OrderDetails",query:u})):y==="params"&&(Fe().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",params:u,meta:{title:"订单详情"}}),o.push({name:"OrderDetails",params:u}))}return{toDetail:r,initToDetail:u=>{l&&r(l,u)},getParameter:l,router:o}}export{Ja as A,ot as B,Ua as C,ra as D,nt as E,Ia as F,$a as G,qa as H,Ma as I,st as O,tt as a,Ya as b,Ga as c,lt as d,rt as e,et as f,at as g,Za as h,Oa as i,Xa as j,Ba as k,Pa as l,Ra as m,za as n,Ea as o,ka as p,Sa as q,Da as r,Wa as s,Na as t,it as u,ja as v,La as w,Ka as x,Ha as y,Qa as z};
