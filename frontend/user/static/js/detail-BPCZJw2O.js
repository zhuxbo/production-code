var Re=Object.defineProperty,ke=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var ve=(t,o,n)=>o in t?Re(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,te=(t,o)=>{for(var n in o||(o={}))$e.call(o,n)&&ve(t,n,o[n]);if(me)for(var n of me(o))qe.call(o,n)&&ve(t,n,o[n]);return t},ge=(t,o)=>ke(t,De(o));var X=(t,o,n)=>new Promise((r,_)=>{var u=b=>{try{d(n.next(b))}catch(e){_(e)}},y=b=>{try{d(n.throw(b))}catch(e){_(e)}},d=b=>b.done?r(b.value):Promise.resolve(b.value).then(u,y);d((n=n.apply(t,o)).next())});import{k as g,aW as Ce,l as V,d as ce,z as N,V as G,v as ze,r as O,i as C,o as w,au as Pe,aK as Ee,j as p,e as m,c as j,a0 as K,a1 as Q,f as H,g as I,aF as Me,aX as Ie,B as de,a4 as Ue,w as Be,Z as Ne,ag as je,_ as Te,a9 as Le,m as _e,ab as ye,A as Z,h as le,y as be,s as Ke,u as Qe,aY as He,aZ as Je,I as he}from"./index-x__-92eX.js";import{s as we,a as We,v as ie}from"./product-BIOt5jNj.js";import{r as Xe,i as Ve}from"./isIP-DNMxIGpu.js";import{u as Ze}from"./dialog-CfRJnaBi.js";const Ge={csr_generate:1,encryption:{alg:"rsa",bits:2048,digest_alg:"sha256"}};function ha(t){return g.get("/order",{params:t})}function Ye(t){return g.get(`/order/${t}`)}function wa(t){return g.get("/order/batch",{params:{ids:t}})}function ea(t){return g.post("/order/new",{data:t})}function aa(t){return g.post("/order/batch-new",{data:t})}function ta(t){return g.post("/order/renew",{data:t})}function la(t){return g.post("/order/reissue",{data:t})}function Va(t,o){return g.post(`/order/pay/${t}`,{data:o})}function Fa(t){return g.post(`/order/commit/${t}`)}function Aa(t){return g.post(`/order/revalidate/${t}`)}function Oa(t,o){return g.post(`/order/update-dcv/${t}`,{data:{method:o}})}function Ca(t){return g.post(`/order/remove-mdc-domain/${t}`)}function Ta(t){return g.post(`/order/sync/${t}`)}function Sa(t){return g.post(`/order/commit-cancel/${t}`)}function xa(t){return g.post(`/order/revoke-cancel/${t}`)}function Ra(t,o){return g.post(`/order/remark/${t}`,{data:{remark:o}})}function ka(t,o){return g.get("/order/download",{params:{ids:t,type:o}},{responseType:"blob",beforeResponseCallback:n=>{const r=n.headers["content-disposition"];let _="certs.zip";if(r){const y=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(r);y!=null&&y[1]&&(_=decodeURIComponent(y[1].replace(/['"]/g,"")))}n.data instanceof Blob&&Ce(n.data,_)}})}function Da(t){return g.get(`/order/download-validate-file/${t}`,{},{responseType:"blob",beforeResponseCallback:o=>{const n=o.headers["content-disposition"];let r="验证文件.zip";if(n){const u=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(n);u!=null&&u[1]&&(r=decodeURIComponent(u[1].replace(/['"]/g,"")))}o.data instanceof Blob&&Ce(o.data,r)}})}function $a(t,o){return g.get(`/order/send-active/${t}`,{params:{email:o}})}function qa(t){return g.post("/order/batch-pay",{data:{ids:t}})}function za(t){return g.post("/order/batch-commit",{data:{ids:t}})}function Pa(t){return g.post("/order/batch-revalidate",{data:{ids:t}})}function Ea(t){return g.post("/order/batch-sync",{data:{ids:t}})}function Ma(t){return g.post("/order/batch-commit-cancel",{data:{ids:t}})}function Ia(t){return g.post("/order/batch-revoke-cancel",{data:{ids:t}})}const Ua=[{label:"全部",value:"all"},{label:"活动中",value:"activating"},{label:"已存档",value:"archived"}],Ba=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"}],Na=[{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],ja={unpaid:"warning",pending:"primary",processing:"primary",approving:"primary",active:"success",failed:"danger",cancelling:"danger",cancelled:"danger",renewed:"info",replaced:"info",reissued:"info",expired:"info",revoked:"danger"},La={unpaid:"待支付",pending:"待提交",processing:"待验证",approving:"待审核",active:"已签发",cancelling:"待取消",cancelled:"已取消",renewed:"已续期",replaced:"已替换",reissued:"已重签",expired:"已过期",revoked:"已吊销",failed:"已失败"},Ka=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"},{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],Qa={new:"新购",renew:"续期",reissue:"重签"},Ha={new:"success",renew:"success",reissue:"info"},Ja=[{label:"新购",value:"new"},{label:"续期",value:"renew"},{label:"重签",value:"reissue"}],Wa={admin:"后台",web:"网站",api:"API",acme:"ACME"},Xa={admin:"warning",web:"info",api:"primary",acme:"success"},Za={cname:"解析验证(CNAME)",txt:"解析验证(TXT)",file:"文件验证(FILE)",http:"文件验证(HTTP)",https:"文件验证(HTTPS)",admin:"邮件验证(ADMIN)",administrator:"邮件验证(ADMINISTRATOR)",hostmaster:"邮件验证(HOSTMASTER)",postmaster:"邮件验证(POSTMASTER)",webmaster:"邮件验证(WEBMASTER)"};function Ga(){const t=V({visible:!1,type:"",id:0});return{action:t,openAction:(n="apply",r=0)=>{t.value.id=r,t.value.type=n,t.value.visible=!0}}}const ue=ce({__name:"index",props:{modelValue:{},uri:{},searchField:{},labelField:{default:"name"},valueField:{default:"id"},placeholder:{default:"请选择"},pageSize:{default:7},showPagination:{type:Boolean,default:!0},queryParams:{default:()=>({})},itemsField:{default:"items"},totalField:{default:"total"},refreshKey:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{expose:o,emit:n}){const r=t,_=n,u=V([]),y=V(!1),d=V(1),b=V(r.pageSize),e=V(0),T=V(""),k=V(r.refreshKey),P=V(!0),Y=V(!0),oe=N(()=>Math.ceil(e.value/b.value));G(()=>r.refreshKey,(s,f)=>{s!==f&&f!==void 0&&(d.value=1,T.value="",P.value=!0,S()),k.value=s},{immediate:!0}),G(()=>r.modelValue,s=>{s&&!U(s)&&q()&&J(s)},{immediate:!0});function q(){return r.refreshKey===void 0||r.refreshKey===null?!0:typeof r.refreshKey=="number"?r.refreshKey>0:r.refreshKey!==""}function U(s){return s?Array.isArray(s)?s.every(f=>u.value.some(F=>F.value===f)):u.value.some(f=>f.value===s):!0}ze(()=>X(null,null,function*(){r.modelValue&&q()&&(yield J(r.modelValue))}));function J(s){return X(this,null,function*(){if(s&&!U(s))try{y.value=!0;let f="",F={};if(Array.isArray(s)){const R=s.filter(l=>!u.value.some(a=>a.value===l));if(R.length===0)return;r.valueField==="id"?(f=`${r.uri}/batch`,F={ids:R}):(f=`${r.uri}`,F={[r.valueField]:R.join(",")})}else r.valueField==="id"?f=`${r.uri}/${s}`:(f=`${r.uri}`,F={[r.valueField]:s});const A=yield g.get(f,{params:F});if(A.data){const l=(Array.isArray(A.data.items)?A.data.items:Array.isArray(A.data)?A.data:[A.data]).map(a=>({label:a[r.labelField],value:a[r.valueField]}));u.value=ee(u.value,l)}}finally{y.value=!1}})}function ee(s,f){const F=[...s];for(const A of f)F.some(l=>l.value===A.value)||F.push(A);return F}function W(s){_("update:modelValue",s),_("change",s)}function pe(s){s&&Y.value&&(Y.value=!1,P.value=!0,S())}function S(){return X(this,arguments,function*(s={}){if(!(y.value||!P.value))try{y.value=!0;const f=yield g.get(r.uri,{params:te(te({currentPage:d.value,pageSize:b.value},r.queryParams),s)});if(f.data){const F=(f.data[r.itemsField]||[]).map(R=>({label:R[r.labelField],value:R[r.valueField]})),A=ae();u.value=ee(A,F),e.value=f.data[r.totalField]||0}P.value=!1}finally{y.value=!1}})}function ae(){if(!r.modelValue)return[];const s=Array.isArray(r.modelValue)?r.modelValue:[r.modelValue];return u.value.filter(f=>s.includes(f.value))}o({getSelectedOptions:ae,options:u});function L(s){if(T.value===""&&s==="")return;T.value=s,d.value=1,P.value=!0;const f={};f[r.searchField]=s,S(f)}function se(s){d.value=s,P.value=!0;const f={};T.value&&(f[r.searchField]=T.value),S(f)}return(s,f)=>{const F=O("el-option"),A=O("el-pagination"),R=O("el-select");return w(),C(R,Pe({"model-value":s.modelValue,placeholder:s.placeholder,filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","remote-method":L,loading:y.value,multiple:s.multiple},s.$attrs,{"onUpdate:modelValue":W,onVisibleChange:pe}),Ee({default:p(()=>[(w(!0),j(K,null,Q(u.value,l=>(w(),C(F,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},[s.showPagination&&oe.value>1?{name:"footer",fn:p(()=>[m(A,{"current-page":d.value,"onUpdate:currentPage":f[0]||(f[0]=l=>d.value=l),"page-size":b.value,"pager-count":5,total:e.value,layout:"total, prev, pager, next",onCurrentChange:se},null,8,["current-page","page-size","total"])]),key:"0"}:void 0]),1040,["model-value","placeholder","loading","multiple"])}}}),ra={class:"re-collapse-container"},na={class:"re-collapse-left"},oa={class:"re-collapse-title"},sa=ce({__name:"index",props:{title:{type:String,required:!0},modelValue:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{emit:o}){const n=t,r=o,_=V(n.modelValue),u=V(null);G(()=>n.modelValue,d=>{_.value=d}),G(()=>_.value,d=>{r("update:modelValue",d)});const y=()=>{_.value=!_.value};return(d,b)=>{const e=O("el-icon");return w(),j("div",ra,[H("div",{class:"re-collapse-header",onClick:y},[H("div",na,[m(e,{class:"re-collapse-icon"},{default:p(()=>[_.value?(w(),C(I(Me),{key:0})):(w(),C(I(Ie),{key:1}))]),_:1}),H("span",oa,de(t.title),1)])]),m(Ue,{name:"re-collapse"},{default:p(()=>[Be(H("div",{ref_key:"collapseContent",ref:u,class:"re-collapse-content"},[je(d.$slots,"default",{},void 0,!0)],512),[[Ne,_.value]])]),_:3})])}}}),ia=Te(sa,[["__scopeId","data-v-bfb881f6"]]);var re={exports:{}},ne={exports:{}},Fe;function ua(){return Fe||(Fe=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=n;function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;for(var u in _)typeof r[u]=="undefined"&&(r[u]=_[u]);return r}t.exports=o.default,t.exports.default=o.default}(ne,ne.exports)),ne.exports}var Ae;function da(){return Ae||(Ae=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=y;var n=_(Xe()),r=_(ua());function _(d){return d&&d.__esModule?d:{default:d}}var u={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function y(d,b){(0,n.default)(d),b=(0,r.default)(b,u),b.allow_trailing_dot&&d[d.length-1]==="."&&(d=d.substring(0,d.length-1)),b.allow_wildcard===!0&&d.indexOf("*.")===0&&(d=d.substring(2));var e=d.split("."),T=e[e.length-1];return b.require_tld&&(e.length<2||!b.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(T)||/\s/.test(T))||!b.allow_numeric_tld&&/^\d+$/.test(T)?!1:e.every(function(k){return!(k.length>63&&!b.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(k)||/[\uff01-\uff5e]/.test(k)||/^-|-$/.test(k)||!b.allow_underscores&&/_/.test(k))})}t.exports=o.default,t.exports.default=o.default}(re,re.exports)),re.exports}var ca=da();const Oe=Le(ca),pa={class:"order-action-form"},fa={class:"order-action-footer"},ma=ce({__name:"action",props:{visible:{type:Boolean,default:!1},actionType:{type:String,default:""},orderId:{type:Number,default:0}},emits:["update:visible","success","close"],setup(t,{emit:o}){const n=t,r=o,{dialogSize:_}=Ze(),u=V(),y=V(),d=V(!1),b=V([]),e=_e({}),T=V([]),k=V([]),P=N(()=>{var l;return(l=e.product)==null?void 0:l.encryption_alg.map(a=>({label:a.toUpperCase(),value:a.toLowerCase()}))}),Y=N(()=>e.encryption.alg==="rsa"?[{label:"2048",value:2048},{label:"4096",value:4096}]:[{label:"256",value:256},{label:"384",value:384},{label:"512",value:512}]),oe=N(()=>{var l;return(l=e.product)==null?void 0:l.signature_digest_alg.map(a=>({label:a.toUpperCase(),value:a.toLowerCase()}))}),q=N(()=>n.actionType==="batchApply"),U=N(()=>{var l;return(((l=e.product)==null?void 0:l.validation_type)||"dv")!=="dv"}),J=V(!1),ee=N(()=>n.actionType==="apply"?"申请证书":n.actionType==="batchApply"?"批量申请":n.actionType==="renew"?"续费证书":n.actionType==="reissue"?"重签证书":""),W=(l,a,v,c)=>{const h=l.slice(0,2)=="*.";if(h&&!a.includes("wildcard"))c[v]=l.slice(2),e.domains=c.join(`
`);else if(Ve(l,4)){if(!a.includes("ipv4"))return l+" 不能为IPV4"}else if(Ve(l,6)){if(!a.includes("ipv6"))return l+" 不能为IPV6"}else if(Oe(l)&&!a.includes("standard"))c[v]="*."+l,e.domains=c.join(`
`);else if(!Oe(h?l.slice(2):l))return l+" 格式错误";return""},S=_e({csr_generate:[{required:!0,message:"请选择CSR生成方式",trigger:"change"}],csr:[{required:!0,message:"请输入CSR",trigger:"blur"}],product_id:[{required:!0,message:"请选择产品",trigger:"change"}],domains:[{required:!0,validator:(l,a,v)=>{var x,z,B;if(!a)return v(new Error("请输入域名"));e.domains=a.replaceAll(" ","").replaceAll("　","").replaceAll("	","").toLowerCase(),e.domains=e.domains.replace(/(\n[\s\t]*\r*\n)/g,`
`).replace(/^[\n\r\t]*|[\n\r\t]*$/g,""),((x=e.product)==null?void 0:x.total_max)===1&&!q.value&&(e.domains=e.domains.split(`
`)[0]);const c=e.domains.split(`
`).filter(E=>E!==""),h=[...new Set(c)];if(c.length!==h.length)return v(new Error("域名重复"));if(!((z=e.product)!=null&&z.common_name_types))return v(new Error("请选择产品"));const D=[];if(c.length>0)if(D.push(W(c[0],e.product.common_name_types,0,c)||""),q.value)c.slice(1).forEach((E,M)=>{D.push(W(E,e.product.common_name_types,M+1,c)||"")});else{if(c.length>1&&!((B=e.product)!=null&&B.alternative_name_types))return v(new Error("请选择产品"));c.length>1&&c.slice(1).forEach((E,M)=>{D.push(W(E,e.product.alternative_name_types,M+1,c)||"")})}const $=D.filter(Boolean);$.length>0?v(new Error($.join(`
`))):v()},trigger:"blur"}],validation_method:[{required:!0,message:"请选择验证方式",trigger:"change"}],period:[{required:!0,message:"请选择周期",trigger:"change"}]}),ae=()=>{e.encryption.bits=e.encryption.alg==="rsa"?2048:256},L=l=>{l&&(we(l).then(({data:a})=>{if(e.product=ge(te({},e.product),{total_max:a.total_max,validation_type:a.validation_type,common_name_types:a.common_name_types,alternative_name_types:a.alternative_name_types,encryption_alg:a.encryption_alg,signature_digest_alg:a.signature_digest_alg,name:a.name,brand:a.brand,add_san:a.add_san,replace_san:a.replace_san,renew:a.renew,reissue:a.reissue,reuse_csr:a.reuse_csr,gift_root_domain:a.gift_root_domain,period:{option:[]},validation_method:{option:[]}}),e.period="",T.value=[],a.periods&&a.periods.length>0){const v=a.periods.sort((c,h)=>c-h);T.value=v.map(c=>({label:We[c],value:c})),e.period=v[0]}if(e.validation_method="",k.value=[],a.validation_methods&&a.validation_methods.length>0){const v=a.validation_methods.sort((c,h)=>Object.keys(ie).indexOf(c)-Object.keys(ie).indexOf(h));k.value=v.map(c=>({label:ie[c],value:c})),e.validation_method=v[0]}e.product.reuse_csr||(e.csr=""),n.actionType==="reissue"&&e.product.reuse_csr&&(e.csr_generate=0)}),S.organization=[{required:U.value,message:"请选择组织",trigger:"change"}],S.contact=[{required:U.value&&["apply","batchApply","renew"].includes(n.actionType),message:"请选择联系人",trigger:"change"}])},se=l=>{Ye(l).then(({data:a})=>{var v,c;e.product_id=a.product_id,b.value=["product_id"],(v=a.latest_cert)!=null&&v.alternative_names&&(e.domains=a.latest_cert.alternative_names.replaceAll(",",`
`).trim()),n.actionType==="reissue"&&((c=a.latest_cert)!=null&&c.csr)&&(e.csr=a.latest_cert.csr),e.order_id=l,L(a.product_id)})},s=()=>{var a,v,c,h;const l={csr_generate:e.csr_generate};return e.csr_generate?l.encryption=e.encryption:l.csr=e.csr,["apply","batchApply","renew","reissue"].includes(n.actionType)&&(l.domains=(a=e.domains)==null?void 0:a.replace(/\n/g,","),l.validation_method=e.validation_method),["apply","batchApply","renew"].includes(n.actionType)&&(l.period=e.period,l.contact=e.contact,(((v=e.product)==null?void 0:v.validation_type)||"dv")!=="dv"&&(l.organization=e.organization)),["apply","batchApply"].includes(n.actionType)&&(l.product_id=e.product_id,l.plus=(c=ye.currentRoute.value.query.plus)!=null?c:1),["renew","reissue"].includes(n.actionType)&&(l.order_id=e.order_id),n.actionType==="reissue"&&(((h=e.product)==null?void 0:h.validation_type)||"dv")!=="dv"&&(l.organization=e.organization),l},f=()=>X(null,null,function*(){if(u.value)try{if(yield u.value.validate(),d.value=!0,n.actionType==="apply")yield ea(s());else if(n.actionType==="batchApply")yield aa(s());else if(n.actionType==="renew")yield ta(s());else if(n.actionType==="reissue")yield la(s());else{be("未知的操作类型",{type:"error"}),d.value=!1;return}be("提交成功",{type:"success"}),r("success"),r("update:visible",!1)}finally{d.value=!1}}),F=()=>{r("update:visible",!1),r("close")},A=()=>{Object.keys(e).forEach(l=>{delete e[l]}),Object.entries(Ge).forEach(([l,a])=>{typeof a=="object"&&a!==null?e[l]=JSON.parse(JSON.stringify(a)):e[l]=a}),b.value=[],T.value=[],k.value=[],setTimeout(()=>{var l;(l=u.value)==null||l.clearValidate()},0)};A();const{product_id:R}=ye.currentRoute.value.query;return G(()=>[n.visible,n.orderId,n.actionType],([l,a,v],c)=>{const[h=!1,D=null,$=null]=Array.isArray(c)?c:[];l&&!h&&(a!==D||v!==$)&&(A(),setTimeout(()=>{if(a&&["renew","reissue"].includes(v)&&se(a),["batchApply","apply"].includes(v)&&R){const x=Number(R);we(x).then(({data:z})=>{setTimeout(()=>{if(y.value){const B={label:z.name,value:z.id};y.value.options||(y.value.options=[]),y.value.options.some(M=>M.value===z.id)||y.value.options.push(B),setTimeout(()=>{e.product_id=x,L(x)},100)}else e.product_id=x,L(x)},200)})}},100))}),(l,a)=>{const v=O("el-radio"),c=O("el-radio-group"),h=O("el-form-item"),D=O("el-input"),$=O("el-option"),x=O("el-select"),z=O("el-col"),B=O("el-row"),E=O("el-form"),M=O("el-button"),Se=O("el-dialog");return w(),C(Se,{"model-value":t.visible,title:ee.value,width:I(_),"before-close":F,"destroy-on-close":"","append-to-body":"","onUpdate:modelValue":a[12]||(a[12]=i=>l.$emit("update:visible",i))},{footer:p(()=>[H("div",fa,[m(M,{onClick:F},{default:p(()=>a[15]||(a[15]=[le("取消")])),_:1}),m(M,{type:"primary",loading:d.value,onClick:f},{default:p(()=>a[16]||(a[16]=[le("提交")])),_:1},8,["loading"])])]),default:p(()=>[H("div",pa,[m(E,{ref_key:"formRef",ref:u,model:e,"label-position":I(_)=="90%"?"top":"right","label-width":"90px"},{default:p(()=>[m(h,{label:" ",prop:"csr_generate"},{default:p(()=>[m(c,{modelValue:e.csr_generate,"onUpdate:modelValue":a[0]||(a[0]=i=>e.csr_generate=i),disabled:q.value},{default:p(()=>[m(v,{value:1},{default:p(()=>a[13]||(a[13]=[le(de("自动生成CSR"))])),_:1}),m(v,{value:0},{default:p(()=>a[14]||(a[14]=[le(de("已有CSR"))])),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),parseInt(e.csr_generate)?Z("",!0):(w(),C(h,{key:0,label:"CSR",prop:"csr",rules:S.csr},{default:p(()=>[m(D,{modelValue:e.csr,"onUpdate:modelValue":a[1]||(a[1]=i=>e.csr=i),type:"textarea",rows:5,placeholder:"请输入CSR"},null,8,["modelValue"])]),_:1},8,["rules"])),["apply","batchApply"].includes(t.actionType)?(w(),C(h,{key:1,label:"产品",prop:"product_id",rules:S.product_id},{default:p(()=>[m(I(ue),{ref_key:"productSelectRef",ref:y,modelValue:e.product_id,"onUpdate:modelValue":a[2]||(a[2]=i=>e.product_id=i),uri:"/product",searchField:"quickSearch",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择产品",pageSize:100,showPagination:!1,disabled:b.value.includes("product_id"),queryParams:{domains:q.value?"single":""},onChange:L},null,8,["modelValue","disabled","queryParams"])]),_:1},8,["rules"])):Z("",!0),m(h,{label:"域名",prop:"domains",rules:S.domains},{default:p(()=>{var i,fe;return[m(D,{modelValue:e.domains,"onUpdate:modelValue":a[3]||(a[3]=xe=>e.domains=xe),type:q.value||((i=e.product)==null?void 0:i.total_max)>1?"textarea":"text",autosize:{minRows:3,maxRows:10},placeholder:"请输入域名"+(q.value||((fe=e.product)==null?void 0:fe.total_max)>1?"，一行一个":"")},null,8,["modelValue","type","placeholder"])]}),_:1},8,["rules"]),m(B,{gutter:20},{default:p(()=>[m(z,{span:12},{default:p(()=>[m(h,{label:"有效期",prop:"period",rules:S.period},{default:p(()=>[m(x,{modelValue:e.period,"onUpdate:modelValue":a[4]||(a[4]=i=>e.period=i),placeholder:"请选择有效期",style:{width:"100%"}},{default:p(()=>[(w(!0),j(K,null,Q(T.value,i=>(w(),C($,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),m(h,{label:"验证方式",prop:"validation_method",rules:S.validation_method},{default:p(()=>[m(x,{modelValue:e.validation_method,"onUpdate:modelValue":a[5]||(a[5]=i=>e.validation_method=i),placeholder:"请选择验证方式",style:{width:"100%"}},{default:p(()=>[(w(!0),j(K,null,Q(k.value,i=>(w(),C($,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),U.value?(w(),C(h,{key:2,label:"组织",prop:"organization",rules:S.organization},{default:p(()=>[m(I(ue),{modelValue:e.organization,"onUpdate:modelValue":a[6]||(a[6]=i=>e.organization=i),uri:"/organization",searchField:"name",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择组织",disabled:!e.product_id},null,8,["modelValue","disabled"])]),_:1},8,["rules"])):Z("",!0),U.value?(w(),C(h,{key:3,label:"联系人",prop:"contact",rules:S.contact},{default:p(()=>[m(I(ue),{modelValue:e.contact,"onUpdate:modelValue":a[7]||(a[7]=i=>e.contact=i),uri:"/contact",searchField:"first_name",labelField:"first_name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择联系人",disabled:!e.product_id},null,8,["modelValue","disabled"])]),_:1},8,["rules"])):Z("",!0),e.csr_generate===1?(w(),C(I(ia),{key:4,modelValue:J.value,"onUpdate:modelValue":a[11]||(a[11]=i=>J.value=i),title:"加密选项",border:!1},{default:p(()=>[m(B,{gutter:20},{default:p(()=>[m(z,{span:12},{default:p(()=>[m(h,{label:"加密算法",prop:"encryption.alg"},{default:p(()=>[m(x,{modelValue:e.encryption.alg,"onUpdate:modelValue":a[8]||(a[8]=i=>e.encryption.alg=i),placeholder:"请选择加密算法",style:{width:"100%"},onChange:ae},{default:p(()=>[(w(!0),j(K,null,Q(P.value,i=>(w(),C($,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(h,{label:"密钥长度",prop:"encryption.bits"},{default:p(()=>[m(x,{modelValue:e.encryption.bits,"onUpdate:modelValue":a[9]||(a[9]=i=>e.encryption.bits=i),placeholder:"请选择密钥长度",style:{width:"100%"}},{default:p(()=>[(w(!0),j(K,null,Q(Y.value,i=>(w(),C($,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(h,{label:"摘要算法",prop:"encryption.digest_alg"},{default:p(()=>[m(x,{modelValue:e.encryption.digest_alg,"onUpdate:modelValue":a[10]||(a[10]=i=>e.encryption.digest_alg=i),placeholder:"请选择摘要算法",style:{width:"100%"}},{default:p(()=>[(w(!0),j(K,null,Q(oe.value,i=>(w(),C($,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):Z("",!0)]),_:1},8,["model","label-position"])])]),_:1},8,["model-value","title","width"])}}}),Ya=Te(ma,[["__scopeId","data-v-886f3fe8"]]);function et(){const t=Ke(),o=Qe(),n=He(t.params)?t.query:t.params;function r(u,y){Object.keys(u).forEach(d=>{Je(u[d])||(u[d]=u[d].toString())}),y==="query"?(he().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",query:u,meta:{title:"订单详情",dynamicLevel:10}}),o.push({name:"OrderDetails",query:u})):y==="params"&&(he().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",params:u,meta:{title:"订单详情"}}),o.push({name:"OrderDetails",params:u}))}return{toDetail:r,initToDetail:u=>{n&&r(n,u)},getParameter:n,router:o}}export{Na as A,Ga as B,$a as C,Ye as D,Za as E,Da as F,Oa as G,Ca as H,Ra as I,Ya as O,Ja as a,Ka as b,Ba as c,Wa as d,Xa as e,Qa as f,Ha as g,La as h,ha as i,ja as j,ka as k,Ta as l,Fa as m,Sa as n,xa as o,Va as p,wa as q,Aa as r,Ua as s,qa as t,et as u,za as v,Pa as w,Ea as x,Ma as y,Ia as z};
