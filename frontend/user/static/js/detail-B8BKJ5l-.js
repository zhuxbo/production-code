var $e=Object.defineProperty,qe=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var _e=(t,o,r)=>o in t?$e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,le=(t,o)=>{for(var r in o||(o={}))Pe.call(o,r)&&_e(t,r,o[r]);if(ge)for(var r of ge(o))Ee.call(o,r)&&_e(t,r,o[r]);return t},ye=(t,o)=>qe(t,ze(o));var X=(t,o,r)=>new Promise((l,_)=>{var u=b=>{try{d(r.next(b))}catch(e){_(e)}},y=b=>{try{d(r.throw(b))}catch(e){_(e)}},d=b=>b.done?l(b.value):Promise.resolve(b.value).then(u,y);d((r=r.apply(t,o)).next())});import{k as g,aW as Se,l as V,d as fe,z as L,V as Y,v as Me,r as T,i as C,o as w,au as Ie,aK as Ue,j as p,e as f,c as K,a0 as H,a1 as G,f as B,g as $,aF as Be,aX as Ne,B as pe,a4 as je,w as Le,Z as Ke,ag as Qe,_ as ke,a9 as He,m as be,ab as ue,A as Z,h as re,aY as he,y as we,s as Ge,u as Je,aZ as We,a_ as Xe,I as Ve}from"./index-pXbp6I31.js";import{s as Fe,a as Ze,v as de}from"./product-BzOCP2aE.js";import{r as Ye,i as Ae}from"./isIP-CKKPGdSb.js";import{u as ea}from"./dialog-DZOTg8hF.js";import{u as Te}from"./hooks-CQKIDBLZ.js";const aa={csr_generate:1,encryption:{alg:"rsa",bits:2048,digest_alg:"sha256"}};function Ca(t){return g.get("/order",{params:t})}function ta(t){return g.get(`/order/${t}`)}function Oa(t){return g.get("/order/batch",{params:{ids:t}})}function la(t){return g.post("/order/new",{data:t})}function ra(t){return g.post("/order/batch-new",{data:t})}function na(t){return g.post("/order/renew",{data:t})}function oa(t){return g.post("/order/reissue",{data:t})}function xa(t,o){return g.post(`/order/pay/${t}`,{data:o})}function Sa(t){return g.post(`/order/commit/${t}`)}function ka(t){return g.post(`/order/revalidate/${t}`)}function Ra(t,o){return g.post(`/order/update-dcv/${t}`,{data:{method:o}})}function Da(t){return g.post(`/order/remove-mdc-domain/${t}`)}function $a(t){return g.post(`/order/sync/${t}`)}function qa(t){return g.post(`/order/commit-cancel/${t}`)}function za(t){return g.post(`/order/revoke-cancel/${t}`)}function Pa(t,o){return g.post(`/order/remark/${t}`,{data:{remark:o}})}function Ea(t,o){return g.get("/order/download",{params:{ids:t,type:o}},{responseType:"blob",beforeResponseCallback:r=>{const l=r.headers["content-disposition"];let _="certs.zip";if(l){const y=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(l);y!=null&&y[1]&&(_=decodeURIComponent(y[1].replace(/['"]/g,"")))}r.data instanceof Blob&&Se(r.data,_)}})}function Ma(t){return g.get(`/order/download-validate-file/${t}`,{},{responseType:"blob",beforeResponseCallback:o=>{const r=o.headers["content-disposition"];let l="验证文件.zip";if(r){const u=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(r);u!=null&&u[1]&&(l=decodeURIComponent(u[1].replace(/['"]/g,"")))}o.data instanceof Blob&&Se(o.data,l)}})}function Ia(t,o){return g.get(`/order/send-active/${t}`,{params:{email:o}})}function Ua(t){return g.post("/order/batch-pay",{data:{ids:t}})}function Ba(t){return g.post("/order/batch-commit",{data:{ids:t}})}function Na(t){return g.post("/order/batch-revalidate",{data:{ids:t}})}function ja(t){return g.post("/order/batch-sync",{data:{ids:t}})}function La(t){return g.post("/order/batch-commit-cancel",{data:{ids:t}})}function Ka(t){return g.post("/order/batch-revoke-cancel",{data:{ids:t}})}const Qa=[{label:"全部",value:"all"},{label:"活动中",value:"activating"},{label:"已存档",value:"archived"}],Ha=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"}],Ga=[{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],Ja={unpaid:"warning",pending:"primary",processing:"primary",approving:"primary",active:"success",failed:"danger",cancelling:"danger",cancelled:"danger",renewed:"info",replaced:"info",reissued:"info",expired:"info",revoked:"danger"},Wa={unpaid:"待支付",pending:"待提交",processing:"待验证",approving:"待审核",active:"已签发",cancelling:"待取消",cancelled:"已取消",renewed:"已续期",replaced:"已替换",reissued:"已重签",expired:"已过期",revoked:"已吊销",failed:"已失败"},Xa=[{label:"待支付",value:"unpaid"},{label:"待提交",value:"pending"},{label:"待验证",value:"processing"},{label:"待审核",value:"approving"},{label:"已签发",value:"active"},{label:"待取消",value:"cancelling"},{label:"已取消",value:"cancelled"},{label:"已续期",value:"renewed"},{label:"已替换",value:"replaced"},{label:"已重签",value:"reissued"},{label:"已过期",value:"expired"},{label:"已吊销",value:"revoked"},{label:"已失败",value:"failed"}],Za={new:"新购",renew:"续期",reissue:"重签"},Ya={new:"success",renew:"success",reissue:"info"},et=[{label:"新购",value:"new"},{label:"续期",value:"renew"},{label:"重签",value:"reissue"}],at={admin:"后台",web:"网站",api:"API",acme:"ACME"},tt={admin:"warning",web:"info",api:"primary",acme:"success"},lt={cname:"解析验证(CNAME)",txt:"解析验证(TXT)",file:"文件验证(FILE)",http:"文件验证(HTTP)",https:"文件验证(HTTPS)",admin:"邮件验证(ADMIN)",administrator:"邮件验证(ADMINISTRATOR)",hostmaster:"邮件验证(HOSTMASTER)",postmaster:"邮件验证(POSTMASTER)",webmaster:"邮件验证(WEBMASTER)"};function rt(){const t=V({visible:!1,type:"",id:0});return{action:t,openAction:(r="apply",l=0)=>{t.value.id=l,t.value.type=r,t.value.visible=!0}}}const ce=fe({__name:"index",props:{modelValue:{},uri:{},searchField:{},labelField:{default:"name"},valueField:{default:"id"},placeholder:{default:"请选择"},pageSize:{default:7},showPagination:{type:Boolean,default:!0},queryParams:{default:()=>({})},itemsField:{default:"items"},totalField:{default:"total"},refreshKey:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{expose:o,emit:r}){const l=t,_=r,u=V([]),y=V(!1),d=V(1),b=V(l.pageSize),e=V(0),O=V(""),D=V(l.refreshKey),I=V(!0),ee=V(!0),se=L(()=>Math.ceil(e.value/b.value));Y(()=>l.refreshKey,(i,m)=>{i!==m&&m!==void 0&&(d.value=1,O.value="",I.value=!0,x()),D.value=i},{immediate:!0}),Y(()=>l.modelValue,i=>{i&&!U(i)&&P()&&J(i)},{immediate:!0});function P(){return l.refreshKey===void 0||l.refreshKey===null?!0:typeof l.refreshKey=="number"?l.refreshKey>0:l.refreshKey!==""}function U(i){return i?Array.isArray(i)?i.every(m=>u.value.some(F=>F.value===m)):u.value.some(m=>m.value===i):!0}Me(()=>X(null,null,function*(){l.modelValue&&P()&&(yield J(l.modelValue))}));function J(i){return X(this,null,function*(){if(i&&!U(i))try{y.value=!0;let m="",F={};if(Array.isArray(i)){const R=i.filter(S=>!u.value.some(n=>n.value===S));if(R.length===0)return;l.valueField==="id"?(m=`${l.uri}/batch`,F={ids:R}):(m=`${l.uri}`,F={[l.valueField]:R.join(",")})}else l.valueField==="id"?m=`${l.uri}/${i}`:(m=`${l.uri}`,F={[l.valueField]:i});const A=yield g.get(m,{params:F});if(A.data){const S=(Array.isArray(A.data.items)?A.data.items:Array.isArray(A.data)?A.data:[A.data]).map(n=>({label:n[l.labelField],value:n[l.valueField]}));u.value=ae(u.value,S)}}finally{y.value=!1}})}function ae(i,m){const F=[...i];for(const A of m)F.some(S=>S.value===A.value)||F.push(A);return F}function W(i){_("update:modelValue",i),_("change",i)}function me(i){i&&ee.value&&(ee.value=!1,I.value=!0,x())}function x(){return X(this,arguments,function*(i={}){if(!(y.value||!I.value))try{y.value=!0;const m=yield g.get(l.uri,{params:le(le({currentPage:d.value,pageSize:b.value},l.queryParams),i)});if(m.data){const F=(m.data[l.itemsField]||[]).map(R=>({label:R[l.labelField],value:R[l.valueField]})),A=te();u.value=ae(A,F),e.value=m.data[l.totalField]||0}I.value=!1}finally{y.value=!1}})}function te(){if(!l.modelValue)return[];const i=Array.isArray(l.modelValue)?l.modelValue:[l.modelValue];return u.value.filter(m=>i.includes(m.value))}o({getSelectedOptions:te,options:u});function Q(i){if(O.value===""&&i==="")return;O.value=i,d.value=1,I.value=!0;const m={};m[l.searchField]=i,x(m)}function ie(i){d.value=i,I.value=!0;const m={};O.value&&(m[l.searchField]=O.value),x(m)}return(i,m)=>{const F=T("el-option"),A=T("el-pagination"),R=T("el-select");return w(),C(R,Ie({"model-value":i.modelValue,placeholder:i.placeholder,filterable:"",remote:"","reserve-keyword":"","remote-show-suffix":"","remote-method":Q,loading:y.value,multiple:i.multiple},i.$attrs,{"onUpdate:modelValue":W,onVisibleChange:me}),Ue({default:p(()=>[(w(!0),K(H,null,G(u.value,S=>(w(),C(F,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:2},[i.showPagination&&se.value>1?{name:"footer",fn:p(()=>[f(A,{"current-page":d.value,"onUpdate:currentPage":m[0]||(m[0]=S=>d.value=S),"page-size":b.value,"pager-count":5,total:e.value,layout:"total, prev, pager, next",onCurrentChange:ie},null,8,["current-page","page-size","total"])]),key:"0"}:void 0]),1040,["model-value","placeholder","loading","multiple"])}}}),sa={class:"re-collapse-container"},ia={class:"re-collapse-left"},ua={class:"re-collapse-title"},da=fe({__name:"index",props:{title:{type:String,required:!0},modelValue:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{emit:o}){const r=t,l=o,_=V(r.modelValue),u=V(null);Y(()=>r.modelValue,d=>{_.value=d}),Y(()=>_.value,d=>{l("update:modelValue",d)});const y=()=>{_.value=!_.value};return(d,b)=>{const e=T("el-icon");return w(),K("div",sa,[B("div",{class:"re-collapse-header",onClick:y},[B("div",ia,[f(e,{class:"re-collapse-icon"},{default:p(()=>[_.value?(w(),C($(Be),{key:0})):(w(),C($(Ne),{key:1}))]),_:1}),B("span",ua,pe(t.title),1)])]),f(je,{name:"re-collapse"},{default:p(()=>[Le(B("div",{ref_key:"collapseContent",ref:u,class:"re-collapse-content"},[Qe(d.$slots,"default",{},void 0,!0)],512),[[Ke,_.value]])]),_:3})])}}}),ca=ke(da,[["__scopeId","data-v-bfb881f6"]]);var ne={exports:{}},oe={exports:{}},Ce;function pa(){return Ce||(Ce=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=r;function r(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;for(var u in _)typeof l[u]=="undefined"&&(l[u]=_[u]);return l}t.exports=o.default,t.exports.default=o.default}(oe,oe.exports)),oe.exports}var Oe;function fa(){return Oe||(Oe=1,function(t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=y;var r=_(Ye()),l=_(pa());function _(d){return d&&d.__esModule?d:{default:d}}var u={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function y(d,b){(0,r.default)(d),b=(0,l.default)(b,u),b.allow_trailing_dot&&d[d.length-1]==="."&&(d=d.substring(0,d.length-1)),b.allow_wildcard===!0&&d.indexOf("*.")===0&&(d=d.substring(2));var e=d.split("."),O=e[e.length-1];return b.require_tld&&(e.length<2||!b.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(O)||/\s/.test(O))||!b.allow_numeric_tld&&/^\d+$/.test(O)?!1:e.every(function(D){return!(D.length>63&&!b.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(D)||/[\uff01-\uff5e]/.test(D)||/^-|-$/.test(D)||!b.allow_underscores&&/_/.test(D))})}t.exports=o.default,t.exports.default=o.default}(ne,ne.exports)),ne.exports}var ma=fa();const xe=He(ma),va={class:"order-action-form"},ga={class:"inline-field"},_a={class:"inline-field"},ya={class:"order-action-footer"},ba=fe({__name:"action",props:{visible:{type:Boolean,default:!1},actionType:{type:String,default:""},orderId:{type:Number,default:0}},emits:["update:visible","success","close"],setup(t,{emit:o}){const r=t,l=o,{dialogSize:_}=ea(),u=V(),y=V(),d=V(!1),b=V([]),e=be({}),O=V([]),D=V([]),I=L(()=>{var n;return(n=e.product)==null?void 0:n.encryption_alg.map(a=>({label:a.toUpperCase(),value:a.toLowerCase()}))}),ee=L(()=>e.encryption.alg==="rsa"?[{label:"2048",value:2048},{label:"4096",value:4096}]:[{label:"256",value:256},{label:"384",value:384},{label:"512",value:512}]),se=L(()=>{var n;return(n=e.product)==null?void 0:n.signature_digest_alg.map(a=>({label:a.toUpperCase(),value:a.toLowerCase()}))}),P=L(()=>r.actionType==="batchApply"),U=L(()=>{var n;return(((n=e.product)==null?void 0:n.validation_type)||"dv")!=="dv"}),J=V(!1),ae=L(()=>r.actionType==="apply"?"申请证书":r.actionType==="batchApply"?"批量申请":r.actionType==="renew"?"续费证书":r.actionType==="reissue"?"重签证书":""),W=(n,a,v,c)=>{const h=n.slice(0,2)=="*.";if(h&&!a.includes("wildcard"))c[v]=n.slice(2),e.domains=c.join(`
`);else if(Ae(n,4)){if(!a.includes("ipv4"))return n+" 不能为IPV4"}else if(Ae(n,6)){if(!a.includes("ipv6"))return n+" 不能为IPV6"}else if(xe(n)&&!a.includes("standard"))c[v]="*."+n,e.domains=c.join(`
`);else if(!xe(h?n.slice(2):n))return n+" 格式错误";return""},x=be({csr_generate:[{required:!0,message:"请选择CSR生成方式",trigger:"change"}],csr:[{required:!0,message:"请输入CSR",trigger:"blur"}],product_id:[{required:!0,message:"请选择产品",trigger:"change"}],domains:[{required:!0,validator:(n,a,v)=>{var k,M,N;if(!a)return v(new Error("请输入域名"));e.domains=a.replaceAll(" ","").replaceAll("　","").replaceAll("	","").toLowerCase(),e.domains=e.domains.replace(/(\n[\s\t]*\r*\n)/g,`
`).replace(/^[\n\r\t]*|[\n\r\t]*$/g,""),((k=e.product)==null?void 0:k.total_max)===1&&!P.value&&(e.domains=e.domains.split(`
`)[0]);const c=e.domains.split(`
`).filter(q=>q!==""),h=[...new Set(c)];if(c.length!==h.length)return v(new Error("域名重复"));if(!((M=e.product)!=null&&M.common_name_types))return v(new Error("请选择产品"));const E=[];if(c.length>0)if(E.push(W(c[0],e.product.common_name_types,0,c)||""),P.value)c.slice(1).forEach((q,j)=>{E.push(W(q,e.product.common_name_types,j+1,c)||"")});else{if(c.length>1&&!((N=e.product)!=null&&N.alternative_name_types))return v(new Error("请选择产品"));c.length>1&&c.slice(1).forEach((q,j)=>{E.push(W(q,e.product.alternative_name_types,j+1,c)||"")})}const z=E.filter(Boolean);z.length>0?v(new Error(z.join(`
`))):v()},trigger:"blur"}],validation_method:[{required:!0,message:"请选择验证方式",trigger:"change"}],period:[{required:!0,message:"请选择周期",trigger:"change"}]}),te=()=>{e.encryption.bits=e.encryption.alg==="rsa"?2048:256},Q=n=>{n&&Fe(n).then(({data:a})=>{if(e.product=ye(le({},e.product),{total_max:a.total_max,validation_type:a.validation_type,common_name_types:a.common_name_types,alternative_name_types:a.alternative_name_types,encryption_alg:a.encryption_alg,signature_digest_alg:a.signature_digest_alg,name:a.name,brand:a.brand,add_san:a.add_san,replace_san:a.replace_san,renew:a.renew,reissue:a.reissue,reuse_csr:a.reuse_csr,gift_root_domain:a.gift_root_domain,period:{option:[]},validation_method:{option:[]}}),e.period="",O.value=[],a.periods&&a.periods.length>0){const v=a.periods.sort((c,h)=>c-h);O.value=v.map(c=>({label:Ze[c],value:c})),e.period=v[0]}if(e.validation_method="",D.value=[],a.validation_methods&&a.validation_methods.length>0){const v=a.validation_methods.sort((c,h)=>Object.keys(de).indexOf(c)-Object.keys(de).indexOf(h));D.value=v.map(c=>({label:de[c],value:c})),e.validation_method=v[0]}e.product.reuse_csr||(e.csr=""),r.actionType==="reissue"&&e.product.reuse_csr&&(e.csr_generate=0),x.organization=[{required:U.value,message:"请选择组织",trigger:"change"}],x.contact=[{required:U.value&&["apply","batchApply","renew"].includes(r.actionType),message:"请选择联系人",trigger:"change"}]})},ie=n=>{ta(n).then(({data:a})=>{var v,c,h;e.product_id=a.product_id,b.value=["product_id"],(v=a.latest_cert)!=null&&v.alternative_names&&(e.domains=a.latest_cert.alternative_names.replaceAll(",",`
`).trim()),r.actionType==="reissue"&&((c=a.latest_cert)!=null&&c.csr)&&(e.csr=a.latest_cert.csr),((h=a.product)==null?void 0:h.alternative_name_types.length)===0&&(e.domains=a.latest_cert.common_name),e.order_id=n,Q(a.product_id)})},i=()=>{var a,v;const n={csr_generate:e.csr_generate};return e.csr_generate?n.encryption=e.encryption:n.csr=e.csr,["apply","batchApply","renew","reissue"].includes(r.actionType)&&(n.domains=(a=e.domains)==null?void 0:a.replace(/\n/g,","),n.validation_method=e.validation_method),["apply","batchApply","renew"].includes(r.actionType)&&(n.period=e.period),U.value&&r.actionType!=="reissue"&&(n.organization=e.organization,n.contact=e.contact),["apply","batchApply"].includes(r.actionType)&&(n.product_id=e.product_id,n.plus=(v=ue.currentRoute.value.query.plus)!=null?v:1),["renew","reissue"].includes(r.actionType)&&(n.order_id=e.order_id),n},m=()=>X(null,null,function*(){if(u.value)try{if(yield u.value.validate(),d.value=!0,r.actionType==="apply")yield la(i());else if(r.actionType==="batchApply")yield ra(i());else if(r.actionType==="renew")yield na(i());else if(r.actionType==="reissue")yield oa(i());else{we("未知的操作类型",{type:"error"}),d.value=!1;return}we("提交成功",{type:"success"}),l("success"),l("update:visible",!1)}finally{d.value=!1}}),F=()=>{l("update:visible",!1),l("close")},A=n=>{l("update:visible",!1),l("close"),setTimeout(()=>{ue.push(n)},200)},R=()=>{Object.keys(e).forEach(n=>{delete e[n]}),Object.entries(aa).forEach(([n,a])=>{typeof a=="object"&&a!==null?e[n]=JSON.parse(JSON.stringify(a)):e[n]=a}),b.value=[],O.value=[],D.value=[],setTimeout(()=>{var n;(n=u.value)==null||n.clearValidate()},0)};R();const{product_id:S}=ue.currentRoute.value.query;return Y(()=>[r.visible,r.orderId,r.actionType],([n,a,v],c)=>{const[h=!1,E=null,z=null]=Array.isArray(c)?c:[];n&&!h&&(a!==E||v!==z)&&(R(),setTimeout(()=>{if(a&&["renew","reissue"].includes(v)&&ie(a),["batchApply","apply"].includes(v)&&S){const k=Number(S);Fe(k).then(({data:M})=>{setTimeout(()=>{if(y.value){const N={label:M.name,value:M.id};y.value.options||(y.value.options=[]),y.value.options.some(j=>j.value===M.id)||y.value.options.push(N),setTimeout(()=>{e.product_id=k,Q(k)},100)}else e.product_id=k,Q(k)},200)})}},100))}),(n,a)=>{const v=T("el-radio"),c=T("el-radio-group"),h=T("el-form-item"),E=T("el-input"),z=T("el-option"),k=T("el-select"),M=T("el-col"),N=T("el-row"),q=T("el-button"),j=T("el-form"),Re=T("el-dialog");return w(),C(Re,{"model-value":t.visible,title:ae.value,width:$(_),"before-close":F,"destroy-on-close":"","append-to-body":"","onUpdate:modelValue":a[14]||(a[14]=s=>n.$emit("update:visible",s))},{footer:p(()=>[B("div",ya,[f(q,{onClick:F},{default:p(()=>a[17]||(a[17]=[re("取消")])),_:1}),f(q,{type:"primary",loading:d.value,onClick:m},{default:p(()=>a[18]||(a[18]=[re("提交")])),_:1},8,["loading"])])]),default:p(()=>[B("div",va,[f(j,{ref_key:"formRef",ref:u,model:e,"label-position":$(_)=="90%"?"top":"right","label-width":"90px"},{default:p(()=>[f(h,{label:" ",prop:"csr_generate"},{default:p(()=>[f(c,{modelValue:e.csr_generate,"onUpdate:modelValue":a[0]||(a[0]=s=>e.csr_generate=s),disabled:P.value},{default:p(()=>[f(v,{value:1},{default:p(()=>a[15]||(a[15]=[re(pe("自动生成CSR"))])),_:1}),f(v,{value:0},{default:p(()=>a[16]||(a[16]=[re(pe("已有CSR"))])),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),parseInt(e.csr_generate)?Z("",!0):(w(),C(h,{key:0,label:"CSR",prop:"csr",rules:x.csr},{default:p(()=>[f(E,{modelValue:e.csr,"onUpdate:modelValue":a[1]||(a[1]=s=>e.csr=s),type:"textarea",rows:5,placeholder:"请输入CSR"},null,8,["modelValue"])]),_:1},8,["rules"])),["apply","batchApply"].includes(t.actionType)?(w(),C(h,{key:1,label:"产品",prop:"product_id",rules:x.product_id},{default:p(()=>[f($(ce),{ref_key:"productSelectRef",ref:y,modelValue:e.product_id,"onUpdate:modelValue":a[2]||(a[2]=s=>e.product_id=s),uri:"/product",searchField:"quickSearch",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择产品",pageSize:100,showPagination:!1,disabled:b.value.includes("product_id"),queryParams:{domains:P.value?"single":""},onChange:Q},null,8,["modelValue","disabled","queryParams"])]),_:1},8,["rules"])):Z("",!0),f(h,{label:"域名",prop:"domains",rules:x.domains},{default:p(()=>{var s,ve;return[f(E,{modelValue:e.domains,"onUpdate:modelValue":a[3]||(a[3]=De=>e.domains=De),type:P.value||((s=e.product)==null?void 0:s.total_max)>1?"textarea":"text",autosize:{minRows:3,maxRows:10},placeholder:"请输入域名"+(P.value||((ve=e.product)==null?void 0:ve.total_max)>1?"，一行一个":"")},null,8,["modelValue","type","placeholder"])]}),_:1},8,["rules"]),f(N,{gutter:20},{default:p(()=>[f(M,{span:12},{default:p(()=>[f(h,{label:"有效期",prop:"period",rules:x.period},{default:p(()=>[f(k,{modelValue:e.period,"onUpdate:modelValue":a[4]||(a[4]=s=>e.period=s),placeholder:"请选择有效期",style:{width:"100%"}},{default:p(()=>[(w(!0),K(H,null,G(O.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),f(h,{label:"验证方式",prop:"validation_method",rules:x.validation_method},{default:p(()=>[f(k,{modelValue:e.validation_method,"onUpdate:modelValue":a[5]||(a[5]=s=>e.validation_method=s),placeholder:"请选择验证方式",style:{width:"100%"}},{default:p(()=>[(w(!0),K(H,null,G(D.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),U.value&&r.actionType!=="reissue"?(w(),C(h,{key:2,label:"组织",prop:"organization",rules:x.organization},{default:p(()=>[B("div",ga,[f($(ce),{modelValue:e.organization,"onUpdate:modelValue":a[6]||(a[6]=s=>e.organization=s),uri:"/organization",searchField:"name",labelField:"name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择组织",disabled:!e.product_id,style:{flex:"1"}},null,8,["modelValue","disabled"]),f(q,{size:"small",circle:"",icon:$(Te)($(he)),disabled:!e.product_id,class:"ml-auto",onClick:a[7]||(a[7]=s=>A("/organization"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):Z("",!0),U.value&&r.actionType!=="reissue"?(w(),C(h,{key:3,label:"联系人",prop:"contact",rules:x.contact},{default:p(()=>[B("div",_a,[f($(ce),{modelValue:e.contact,"onUpdate:modelValue":a[8]||(a[8]=s=>e.contact=s),uri:"/contact",searchField:"first_name",labelField:"first_name",valueField:"id",itemsField:"items",totalField:"total",placeholder:"请选择联系人",disabled:!e.product_id},null,8,["modelValue","disabled"]),f(q,{size:"small",circle:"",icon:$(Te)($(he)),disabled:!e.product_id,class:"ml-auto",onClick:a[9]||(a[9]=s=>A("/contact"))},null,8,["icon","disabled"])])]),_:1},8,["rules"])):Z("",!0),e.csr_generate===1?(w(),C($(ca),{key:4,modelValue:J.value,"onUpdate:modelValue":a[13]||(a[13]=s=>J.value=s),title:"加密选项",border:!1},{default:p(()=>[f(N,{gutter:20},{default:p(()=>[f(M,{span:12},{default:p(()=>[f(h,{label:"加密算法",prop:"encryption.alg"},{default:p(()=>[f(k,{modelValue:e.encryption.alg,"onUpdate:modelValue":a[10]||(a[10]=s=>e.encryption.alg=s),placeholder:"请选择加密算法",style:{width:"100%"},onChange:te},{default:p(()=>[(w(!0),K(H,null,G(I.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),f(h,{label:"密钥长度",prop:"encryption.bits"},{default:p(()=>[f(k,{modelValue:e.encryption.bits,"onUpdate:modelValue":a[11]||(a[11]=s=>e.encryption.bits=s),placeholder:"请选择密钥长度",style:{width:"100%"}},{default:p(()=>[(w(!0),K(H,null,G(ee.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),f(h,{label:"摘要算法",prop:"encryption.digest_alg"},{default:p(()=>[f(k,{modelValue:e.encryption.digest_alg,"onUpdate:modelValue":a[12]||(a[12]=s=>e.encryption.digest_alg=s),placeholder:"请选择摘要算法",style:{width:"100%"}},{default:p(()=>[(w(!0),K(H,null,G(se.value,s=>(w(),C(z,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):Z("",!0)]),_:1},8,["model","label-position"])])]),_:1},8,["model-value","title","width"])}}}),nt=ke(ba,[["__scopeId","data-v-14811657"]]);function ot(){const t=Ge(),o=Je(),r=We(t.params)?t.query:t.params;function l(u,y){Object.keys(u).forEach(d=>{Xe(u[d])||(u[d]=u[d].toString())}),y==="query"?(Ve().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",query:u,meta:{title:"订单详情",dynamicLevel:10}}),o.push({name:"OrderDetails",query:u})):y==="params"&&(Ve().handleTags("push",{path:`/order/details/${u.ids}`,name:"OrderDetails",params:u,meta:{title:"订单详情"}}),o.push({name:"OrderDetails",params:u}))}return{toDetail:l,initToDetail:u=>{r&&l(r,u)},getParameter:r,router:o}}export{Ga as A,rt as B,Ia as C,ta as D,lt as E,Ma as F,Ra as G,Da as H,Pa as I,nt as O,et as a,Xa as b,Ha as c,at as d,tt as e,Za as f,Ya as g,Wa as h,Ca as i,Ja as j,Ea as k,$a as l,Sa as m,qa as n,za as o,xa as p,Oa as q,ka as r,Qa as s,Ua as t,ot as u,Ba as v,Na as w,ja as x,La as y,Ka as z};
