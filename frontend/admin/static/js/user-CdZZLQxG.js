var m=(s,o,t)=>new Promise((e,a)=>{var i=r=>{try{n(t.next(r))}catch(u){a(u)}},E=r=>{try{n(t.throw(r))}catch(u){a(u)}},n=r=>r.done?e(r.value):Promise.resolve(r.value).then(i,E);n((t=t.apply(s,o)).next())});import{W as S,X as g,$ as h,bq as T,a1 as d,a9 as f,br as p,aI as R,bs as c,bt as l}from"./index-2C-ofHV5.js";import{r as b,l as y}from"./auth-7YzjxY7J.js";const k=S("pure-user",{state:()=>{var s,o,t,e,a,i;return{username:(o=(s=h().getItem(l))==null?void 0:s.username)!=null?o:"",roles:(e=(t=h().getItem(l))==null?void 0:t.roles)!=null?e:[],permissions:(i=(a=h().getItem(l))==null?void 0:a.permissions)!=null?i:[],isRemembered:!1,loginDay:7}},actions:{SET_USERNAME(s){this.username=s},SET_ROLES(s){this.roles=s},SET_PERMS(s){this.permissions=s},SET_ISREMEMBERED(s){this.isRemembered=s},SET_LOGINDAY(s){this.loginDay=Number(s)},loginByAccount(s){return m(this,null,function*(){return new Promise((o,t)=>{y(s).then(e=>{(e==null?void 0:e.code)===1&&c(e.data),o(e)}).catch(e=>{t(e)})})})},handRefreshToken(s){return m(this,null,function*(){return new Promise((o,t)=>{b(s).then(e=>{(e==null?void 0:e.code)===1?(c(e.data),o(e)):this.logOut()}).catch(e=>{t(e)})})})},logOut(){this.username="",this.roles=[],this.permissions=[],T(),d().handleTags("equal",[...f]),p(),R.push("/login")}}});function A(){return k(g)}export{A as u};
