import{r as f,o as h,g as v,u as x,m as b,a as y,b as V,d as _,c as U,e as C,f as t,w as p,h as R,i as e,j as m}from"./index-4cMHn29j.js";import{p as S}from"./utils-BlIcfP1w.js";import{P as c}from"./index-BrEuR0t-.js";const k=()=>{const s=f({email:"",mobile:""}),o=[{label:"邮箱",prop:"email",valueType:"input",fieldProps:{placeholder:"请输入邮箱"}},{label:"手机号",prop:"mobile",valueType:"input",fieldProps:{placeholder:"请输入手机号"}}],r={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}]};return h(()=>{v().then(u=>{s.value=S(u.data,["email","mobile"])})}),{profileValues:s,profileColumns:o,profileRules:r,handleProfileUpdate:()=>{x(s.value).then(()=>{b("更新成功",{type:"success"})})}}},q=()=>{const s=f({oldPassword:"",newPassword:""});return{passwordValues:s,passwordColumns:[{label:"旧密码",prop:"oldPassword",valueType:"input",fieldProps:{placeholder:"请输入旧密码"}},{label:"新密码",prop:"newPassword",valueType:"input",fieldProps:{placeholder:"请输入新密码"}}],passwordRules:{oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}]},handlePasswordUpdate:()=>{y(s.value).then(()=>{b("更新成功",{type:"success"}),V().logOut()})}}},T={class:"flex flex-col gap-4"},E=_({name:"Me",__name:"me",setup(s){const{profileColumns:o,profileRules:r,profileValues:l,handleProfileUpdate:u}=k(),{passwordColumns:w,passwordRules:g,passwordValues:n,handlePasswordUpdate:P}=q();return(B,a)=>{const i=R("el-card");return C(),U("div",T,[t(i,{shadow:"never",style:{border:"none"}},{default:p(()=>[t(e(c),{modelValue:e(l),"onUpdate:modelValue":a[0]||(a[0]=d=>m(l)?l.value=d:null),columns:e(o),rules:e(r),"submit-text":"保存","reset-text":"重置","label-width":80,"label-position":"right","label-suffix":"",onSubmit:e(u)},null,8,["modelValue","columns","rules","onSubmit"])]),_:1}),t(i,{shadow:"never",style:{border:"none"}},{default:p(()=>[t(e(c),{modelValue:e(n),"onUpdate:modelValue":a[1]||(a[1]=d=>m(n)?n.value=d:null),columns:e(w),rules:e(g),"submit-text":"保存","reset-text":"重置","label-width":80,"label-position":"right","label-suffix":"",onSubmit:e(P)},null,8,["modelValue","columns","rules","onSubmit"])]),_:1})])}}});export{E as default};
