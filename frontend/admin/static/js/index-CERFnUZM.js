var qe=Object.defineProperty,Fe=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var pe=(c,r,e)=>r in c?qe(c,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[r]=e,I=(c,r)=>{for(var e in r||(r={}))Oe.call(r,e)&&pe(c,e,r[e]);if(de)for(var e of de(r))Ae.call(r,e)&&pe(c,e,r[e]);return c},X=(c,r)=>Fe(c,Ue(r));var E=(c,r,e)=>new Promise((f,n)=>{var t=s=>{try{u(e.next(s))}catch(b){n(b)}},_=s=>{try{u(e.throw(s))}catch(b){n(b)}},u=s=>s.done?f(s.value):Promise.resolve(s.value).then(t,_);u((e=e.apply(c,r)).next())});import{P as Be,a as Le}from"./plus-search-Ddeza9d1.js";import{u as Ne}from"./drawer-ay3FHH3-.js";import{b as Me,d as Ee,i as Ye,F as $e,u as je,a as He,s as We,c as Ge,g as Ke,e as Ze,f as Je,h as Qe}from"./product-CbpaFXC-.js";import{r as g,l as _e,q as L,m as j,t as Xe,n as el,p as ll,f as o,h as y,aP as tl,b3 as al,s as ce,d as re,E as B,e as V,w as p,i,c as $,G as me,F as ve,A as k,D as ee,x as be,B as he,y as te,z as ye,_ as we,o as ol,v as le,j as fe}from"./index-2hNLZh7L.js";import{b as H,e as ae,c as oe,n as W,s as ge,d as rl,w as nl,f as sl,g as il,h as ul,p as dl,i as U}from"./dictionary-DFfC0KQQ.js";import{p as pl}from"./utils-DJcWIqxh.js";import{u as cl}from"./dialog-Cr8xxiCQ.js";import{L as ml}from"./levels-CuEItjLL.js";import{u as vl}from"./hooks-DA7uylxy.js";import{C as fl}from"./close-bold--5XrO9rQ.js";import{P as gl}from"./index-BIWxoMG3.js";import"./index-1hLbQr-8.js";import"./epTheme-i6e0-oRO.js";import"./index.vue_vue_type_script_setup_true_lang-B9my04-j.js";import"./userLevel-B8fD8lwk.js";function _l(c){const r=g({}),e=g([]),f=g(!0),n=_e({total:0,pageSize:100,currentPage:1,background:!0,pageSizes:[10,20,50,100],hideOnSinglePage:!0}),t=L(()=>n.total<=n.pageSize);function _(a){n.pageSize=a,l()}function u(a){n.currentPage=a,l()}const s=g(!1),b=g(0),w=a=>{s.value=!0,a?b.value=a:b.value=0},P=a=>{Ee(a).then(()=>{j("删除成功",{type:"success"}),l()})},x=a=>{Me(a).then(()=>{j("删除成功",{type:"success"}),l()})};function l(){f.value=!0;const a=X(I({},Xe(r.value)),{pageSize:n.pageSize,currentPage:n.currentPage});Ye(a).then(({data:v})=>{e.value=v.items,n.total=v.total,n.pageSize=v.pageSize,n.currentPage=v.currentPage,el(()=>{c.value&&c.value.getTableRef().clearSelection()})}).finally(()=>{f.value=!1})}return{loading:f,search:r,dataList:e,pagination:n,isSinglePage:t,handleSizeChange:_,handleCurrentChange:u,onSearch:l,showStore:s,updateId:b,handleStore:w,handleDestroy:P,handleBatchDestroy:x}}const Y=(c,r)=>(e,f)=>{const n=g(e),t=_=>{n.value===_?(n.value=void 0,f(void 0)):(n.value=_,f(_))};return o("div",{class:"flex flex-wrap gap-1 items-center"},[o("div",{class:"flex flex-wrap gap-1"},[c.map(_=>o(y("el-button"),{key:_.value,type:n.value===_.value?"primary":"default",onClick:()=>t(_.value),class:"ml-3 w-28"},{default:()=>[_.label]}))]),(r==null?void 0:r.showToggleButton)&&o(y("el-button"),{type:"primary",link:!0,onClick:r.onToggle,class:"ml-3 flex items-center whitespace-nowrap text-base"},{default:()=>[o(y("el-icon"),{class:"mr-1"},{default:()=>[r.collapsed?o(tl,null,null):o(al,null,null)]}),r.collapsed?"展开":"收起"]})])},bl=c=>{const r=ll(()=>{c()},500),e=g(!0),f=()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)},n=()=>{e.value=!e.value,f()};return{searchColumns:L(()=>[{label:"证书品牌",prop:"brand",valueType:"radio",options:H,renderField:Y(H,{showToggleButton:!0,onToggle:n,collapsed:e.value})},{label:"加密标准",prop:"encryption_standard",valueType:"radio",options:ae,renderField:Y(ae),hideInSearch:e.value},{label:"验证类型",prop:"validation_type",valueType:"radio",options:oe,renderField:Y(oe),hideInSearch:e.value},{label:"域名类型",prop:"name_type",valueType:"radio",options:W,renderField:Y(W),hideInSearch:e.value},{label:"产品状态",prop:"status",valueType:"radio",options:ge,renderField:Y(ge),hideInSearch:e.value},{label:"快速搜索",prop:"quickSearch",valueType:"input",fieldProps:{placeholder:"编码/名称/备注",clearable:!0,style:{width:"240px"},class:"ml-3"},hideInSearch:e.value}]),debouncedSearch:r}},hl=(c,r)=>{const e=g(!1),f=g(),n=g(0),t=g({}),_=[{label:"名称",prop:"name",valueType:"input",fieldProps:{placeholder:"请输入名称"}},{label:"编码",prop:"code",valueType:"input",fieldProps:{placeholder:"请输入编码"}},{label:"API ID",prop:"api_id",valueType:"input",fieldProps:{placeholder:"请输入API ID"}},{label:"来源",prop:"source",valueType:"select",fieldProps:{placeholder:"请选择来源"},options:r},{label:"品牌",prop:"brand",valueType:"select",fieldProps:{placeholder:"请选择品牌"},options:H},{label:"签发机构",prop:"ca",valueType:"select",fieldProps:{placeholder:"请选择签发机构"},options:rl},{label:"保险币种",prop:"warranty_currency",valueType:"select",fieldProps:{placeholder:"请选择保险币种"},options:nl},{label:"保险金额",prop:"warranty",valueType:"input-number",fieldProps:{placeholder:"请输入保险金额",min:0,precision:2,controlsPosition:"right"}},{label:"服务器数量",prop:"server",valueType:"input-number",fieldProps:{placeholder:"请输入限制服务器数量",min:0,precision:0,controlsPosition:"right"},tooltip:"0为不限制"},{label:"加密标准",prop:"encryption_standard",valueType:"radio",fieldProps:{placeholder:"请选择加密标准"},options:ae},{label:"加密算法",prop:"encryption_alg",valueType:"checkbox",fieldProps:{placeholder:"请选择加密算法",multiple:!0},options:sl},{label:"签名摘要算法",prop:"signature_digest_alg",valueType:"checkbox",fieldProps:{placeholder:"请选择签名摘要算法",multiple:!0},options:il},{label:"验证类型",prop:"validation_type",valueType:"radio",fieldProps:{placeholder:"请选择验证类型"},options:oe},{label:"通用名称类型",prop:"common_name_types",valueType:"checkbox",fieldProps:{placeholder:"请选择通用名称类型",multiple:!0},options:W},{label:"备用名称类型",prop:"alternative_name_types",valueType:"checkbox",fieldProps:{placeholder:"请选择备用名称类型",multiple:!0},options:W},{label:"验证方法",prop:"validation_methods",valueType:"checkbox",fieldProps:{placeholder:"请选择验证方法",multiple:!0},options:ul},{label:"周期",prop:"periods",valueType:"checkbox",fieldProps:{placeholder:"请选择周期",multiple:!0},options:dl},{label:"标准域名起始个数",prop:"standard_min",valueType:"input-number",fieldProps:{placeholder:"请输入标准域名起始个数",min:0,precision:0,controlsPosition:"right"}},{label:"标准域名最大个数",prop:"standard_max",valueType:"input-number",fieldProps:{placeholder:"请输入标准域名最大个数",min:0,precision:0,controlsPosition:"right"}},{label:"通配符起始个数",prop:"wildcard_min",valueType:"input-number",fieldProps:{placeholder:"请输入通配符起始个数",min:0,precision:0,controlsPosition:"right"}},{label:"通配符最大个数",prop:"wildcard_max",valueType:"input-number",fieldProps:{placeholder:"请输入通配符最大个数",min:0,precision:0,controlsPosition:"right"}},{label:"总域名起始个数",prop:"total_min",valueType:"input-number",fieldProps:{placeholder:"请输入总域名起始个数",min:0,precision:0,controlsPosition:"right"}},{label:"总域名最大个数",prop:"total_max",valueType:"input-number",fieldProps:{placeholder:"请输入总域名最大个数",min:0,precision:0,controlsPosition:"right"}},{label:"添加SAN",prop:"add_san",valueType:"switch",fieldProps:U},{label:"替换SAN",prop:"replace_san",valueType:"switch",fieldProps:U},{label:"重新签发",prop:"reissue",valueType:"switch",fieldProps:U},{label:"续期",prop:"renew",valueType:"switch",fieldProps:U},{label:"重用CSR",prop:"reuse_csr",valueType:"switch",fieldProps:U},{label:"赠送根域名",prop:"gift_root_domain",valueType:"switch",fieldProps:U},{label:"退款期限",prop:"refund_period",valueType:"input-number",fieldProps:{placeholder:"请输入退款期限",min:0,precision:0,controlsPosition:"right"}},{label:"备注",prop:"remark",valueType:"textarea",fieldProps:{placeholder:"请输入备注",rows:3}},{label:"排序权重",prop:"weight",valueType:"input-number",fieldProps:{placeholder:"请输入排序权重",min:0,precision:0,controlsPosition:"right"},tooltip:"排序权重越小，越靠前"},{label:"状态",prop:"status",valueType:"switch",fieldProps:U},{label:"创建时间",prop:"created_at",hideInForm:L(()=>n.value===0),renderField:a=>a&&typeof a=="string"?ce(a).format("YYYY-MM-DD HH:mm:ss"):""},{label:"更新时间",prop:"updated_at",hideInForm:L(()=>n.value===0),renderField:a=>a&&typeof a=="string"?ce(a).format("YYYY-MM-DD HH:mm:ss"):""}],u={code:[{required:!0,message:"请输入编码"},{max:50,message:"编码长度不能超过50个字符",trigger:"blur"}],name:[{required:!0,message:"请输入名称"},{max:100,message:"名称长度不能超过100个字符",trigger:"blur"}],api_id:[{required:!0,message:"请输入API ID"},{max:128,message:"API ID长度不能超过128个字符",trigger:"blur"}],source:[{required:!0,message:"请选择来源"}],brand:[{required:!0,message:"请选择品牌"}],ca:[{required:!0,message:"请选择签发机构"}],warranty_currency:[{required:!0,message:"请选择保险币种"}],warranty:[{required:!0,message:"请输入保险金额"},{type:"number",min:0,message:"保险金额不能小于0"}],encryption_standard:[{required:!0,message:"请选择加密标准"}],encryption_alg:[{required:!0,message:"请选择加密算法"}],signature_digest_alg:[{required:!0,message:"请选择签名摘要算法"}],validation_type:[{required:!0,message:"请选择验证类型"}],common_name_types:[{required:!0,message:"请选择通用名称类型"}],validation_methods:[{required:!0,message:"请选择验证方法"}],periods:[{required:!0,message:"请选择周期"}],standard_min:[{required:!0,message:"请输入标准域名起始个数"}],standard_max:[{required:!0,message:"请输入标准域名最大个数"}],wildcard_min:[{required:!0,message:"请输入通配符域名起始个数"}],wildcard_max:[{required:!0,message:"请输入通配符域名最大个数"}],total_min:[{required:!0,message:"请输入总域名起始个数"}],total_max:[{required:!0,message:"请输入总域名最大个数"}],refund_period:[{required:!0,message:"请输入退款期限"}],weight:[{required:!0,message:"请输入排序权重"}],remark:[{max:500,message:"备注长度不能超过500个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态"}]};function s(a=0){var v,S;e.value=!0,a>0?n.value!==a&&P(a):((S=(v=f.value)==null?void 0:v.formInstance)==null||S.resetFields(),t.value=Object.fromEntries(Object.entries($e))),n.value=a}function b(){n.value>0?l():x()}function w(){e.value=!1}const P=a=>{We(a).then(({data:v})=>{var S;t.value=pl(v,Ge),t.value.warranty=Number((S=t.value.warranty)!=null?S:0)})},x=()=>{delete t.value.created_at,delete t.value.updated_at,He(t.value).then(()=>{c(),e.value=!1})},l=()=>{delete t.value.created_at,delete t.value.updated_at,je(n.value,t.value).then(()=>{c(),e.value=!1})};return{storeRef:f,showStore:e,storeId:n,storeValues:t,storeColumns:_,rules:u,openStoreForm:s,confirmStoreForm:b,closeStoreForm:w}},yl=c=>{const r=g(),e=g([]);return{tableRef:r,selectedIds:e,handleSelectionChange:u=>{e.value=u.map(s=>s.id),r.value.setAdaptive()},handleSelectionCancel:()=>{var u;(u=r.value)==null||u.getTableRef().clearSelection()},tableColumns:[{label:"勾选列",type:"selection",reserveSelection:!0},{label:"ID",prop:"id",width:50},{label:"来源",prop:"source",width:70,formatter:u=>{var b;const s=(b=c.value)==null?void 0:b.find(w=>w.value===u.source);return s?s.label:u.source.charAt(0).toUpperCase()+u.source.slice(1)}},{label:"名称",prop:"name",minWidth:150},{label:"说明",prop:"remark",minWidth:150},{label:"权重",prop:"weight",width:70},{label:"状态",prop:"status",width:70,cellRenderer:({row:u,props:s})=>o(y("el-tag"),{size:s.size,type:u.status===1?"success":"danger",effect:"plain"},{default:()=>[u.status===1?"启用":"禁用"]})},{label:"操作",fixed:"right",slot:"operation",width:200}],handleRowClick:(u,s,b)=>{var P;const w=b.target;w.tagName==="BUTTON"||w.closest("button")||w.closest(".el-button")||(P=r.value)==null||P.getTableRef().toggleRowSelection(u)}}};function wl(){const c=g([]),r=g(!1);function e(){r.value=!0,Ke().then(({data:f})=>{c.value=f||[]}).catch(()=>{c.value=[]}).finally(()=>{r.value=!1})}return{sourcesList:c,getSourcesList:e}}const Cl=re({name:"ProductImport",__name:"import",props:{visible:{type:Boolean,default:!1},sourcesList:{type:Array,default:()=>[]}},emits:["update:visible","success"],setup(c,{emit:r}){const e=c,f=r,n=g(),t=g(!1),{dialogSize:_}=cl(),u=L({get:()=>e.visible,set:x=>f("update:visible",x)}),s=_e({source:"default",brand:"",apiId:"",type:"update"}),b={source:[{required:!0,message:"请选择来源"}]},w=()=>{f("update:visible",!1)},P=()=>{t.value=!0,Ze(s).then(x=>{x.code===1&&(j("导入产品成功",{type:"success"}),w(),f("success"),s.source="default",s.brand="",s.apiId="",s.type="update")}).finally(()=>{t.value=!1})};return(x,l)=>{const a=y("el-option"),v=y("el-select"),S=y("el-form-item"),T=y("el-input"),O=y("el-form"),A=y("el-button"),N=y("el-dialog");return V(),B(N,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=m=>u.value=m),title:"导入产品",width:i(_),"destroy-on-close":"",onClosed:w},{footer:p(()=>[o(A,{onClick:w},{default:p(()=>l[5]||(l[5]=[k("取消")])),_:1}),o(A,{type:"primary",loading:t.value,onClick:P},{default:p(()=>l[6]||(l[6]=[k(" 确定 ")])),_:1},8,["loading"])]),default:p(()=>[o(O,{ref_key:"formRef",ref:n,model:s,rules:b,"label-width":"80px"},{default:p(()=>[o(S,{label:"来源",prop:"source"},{default:p(()=>[o(v,{modelValue:s.source,"onUpdate:modelValue":l[0]||(l[0]=m=>s.source=m),placeholder:"请选择来源",style:{width:"100%"}},{default:p(()=>[(V(!0),$(ve,null,me(e.sourcesList,m=>(V(),B(a,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(S,{label:"品牌",prop:"brand"},{default:p(()=>[o(v,{modelValue:s.brand,"onUpdate:modelValue":l[1]||(l[1]=m=>s.brand=m),placeholder:"请选择品牌",clearable:"",style:{width:"100%"}},{default:p(()=>[(V(!0),$(ve,null,me(i(H),m=>(V(),B(a,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(S,{label:"接口ID",prop:"apiId"},{default:p(()=>[o(T,{modelValue:s.apiId,"onUpdate:modelValue":l[2]||(l[2]=m=>s.apiId=m),placeholder:"请输入接口ID"},null,8,["modelValue"])]),_:1}),o(S,{label:"类型",prop:"type"},{default:p(()=>[o(v,{modelValue:s.type,"onUpdate:modelValue":l[3]||(l[3]=m=>s.type=m),placeholder:"请选择类型",clearable:"",style:{width:"100%"}},{default:p(()=>[o(a,{key:"new",label:"导入新产品",value:"new"}),o(a,{key:"update",label:"更新产品",value:"update"}),o(a,{key:"all",label:"导入所有产品",value:"all"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","width"])}}}),Pl=re({__name:"cost",props:{visible:{type:Boolean},id:{}},emits:["update:visible","success"],setup(c,{emit:r}){const e=c,f=r,n=g(!1),t=g({price:{},alternative_standard_price:{},alternative_wildcard_price:{}}),_=g([]),u=g([]),s=L({get:()=>e.visible,set:l=>f("update:visible",l)}),b=()=>{const l={price:I({},t.value.price||{})};u.value.includes("standard")&&(l.alternative_standard_price=I({},t.value.alternative_standard_price||{})),u.value.includes("wildcard")&&(l.alternative_wildcard_price=I({},t.value.alternative_wildcard_price||{})),_.value.forEach(a=>{const v=a.toString();l.price[v]||(l.price[v]=0),u.value.includes("standard")&&l.alternative_standard_price&&(l.alternative_standard_price[v]||(l.alternative_standard_price[v]=0)),u.value.includes("wildcard")&&l.alternative_wildcard_price&&(l.alternative_wildcard_price[v]||(l.alternative_wildcard_price[v]=0))}),t.value=l};ee(()=>e.visible,l=>E(null,null,function*(){l&&e.id>0&&(yield w())})),ee(()=>e.id,l=>E(null,null,function*(){l&&e.visible&&(yield w())})),ee([()=>_.value,()=>u.value],()=>{b()});const w=()=>E(null,null,function*(){n.value=!0;try{Qe(e.id).then(({data:l})=>{_.value=l.periods||[],u.value=l.alternative_name_types||[];const a=I({price:{}},l.cost||{});a.price||(a.price={}),t.value=a,b()})}finally{n.value=!1}}),P=()=>{f("update:visible",!1)},x=()=>E(null,null,function*(){n.value=!0;const l={price:I({},t.value.price)};u.value.includes("standard")&&t.value.alternative_standard_price&&(l.alternative_standard_price=I({},t.value.alternative_standard_price)),u.value.includes("wildcard")&&t.value.alternative_wildcard_price&&(l.alternative_wildcard_price=I({},t.value.alternative_wildcard_price)),Je(e.id,l).then(()=>{j("更新成本成功",{type:"success"}),P(),f("success")}).finally(()=>{n.value=!1})});return(l,a)=>{const v=y("el-table-column"),S=y("el-input-number"),T=y("el-table"),O=y("el-button"),A=y("el-dialog"),N=he("loading");return V(),B(A,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=m=>s.value=m),title:"编辑成本",width:"800px","destroy-on-close":"",onClosed:P},{footer:p(()=>[o(O,{onClick:P},{default:p(()=>a[1]||(a[1]=[k("取消")])),_:1}),o(O,{type:"primary",loading:n.value,onClick:x},{default:p(()=>a[2]||(a[2]=[k(" 确定 ")])),_:1},8,["loading"])]),default:p(()=>[be((V(),$("div",null,[o(T,{data:_.value,border:"",style:{width:"100%"}},{default:p(()=>[o(v,{label:"周期",width:"100",align:"center"},{default:p(({row:m})=>[k(ye(m)+"个月 ",1)]),_:1}),o(v,{label:"基础价格",align:"center"},{default:p(({row:m})=>[o(S,{modelValue:t.value.price[m],"onUpdate:modelValue":z=>t.value.price[m]=z,min:0,precision:2,"controls-position":"right",style:{width:"160px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),u.value.includes("standard")?(V(),B(v,{key:0,label:"附加标准域名价格",align:"center"},{default:p(({row:m})=>{var z;return[o(S,{"model-value":((z=t.value.alternative_standard_price)==null?void 0:z[m])||0,min:0,precision:2,"controls-position":"right",style:{width:"160px"},"onUpdate:modelValue":M=>{t.value.alternative_standard_price||(t.value.alternative_standard_price={}),t.value.alternative_standard_price[m]=M}},null,8,["model-value","onUpdate:modelValue"])]}),_:1})):te("",!0),u.value.includes("wildcard")?(V(),B(v,{key:1,label:"附加通配符价格",align:"center"},{default:p(({row:m})=>{var z;return[o(S,{"model-value":((z=t.value.alternative_wildcard_price)==null?void 0:z[m])||0,min:0,precision:2,"controls-position":"right",style:{width:"160px"},"onUpdate:modelValue":M=>{t.value.alternative_wildcard_price||(t.value.alternative_wildcard_price={}),t.value.alternative_wildcard_price[m]=M}},null,8,["model-value","onUpdate:modelValue"])]}),_:1})):te("",!0)]),_:1},8,["data"])])),[[N,n.value]])]),_:1},8,["modelValue"])}}}),Sl=we(Pl,[["__scopeId","data-v-1cb892b8"]]),xl={class:"main"},kl={class:"search bg-bg_color w-[99/100] pl-4 pr-4 pt-[24px] pb-[12px] overflow-auto"},Tl={key:0,class:"bg-[var(--el-fill-color-light)] w-full h-[46px] mb-2 pl-3 pr-2 flex items-center"},Vl={class:"flex-auto"},Il={style:{"font-size":"var(--el-font-size-base)"},class:"text-[rgba(42,46,54,0.5)] dark:text-[rgba(220,220,242,0.5)] ml-2"},zl=re({name:"Product",__name:"index",setup(c){const{drawerSize:r}=Ne(),{sourcesList:e,getSourcesList:f}=wl(),{tableRef:n,selectedIds:t,handleSelectionChange:_,handleSelectionCancel:u,tableColumns:s,handleRowClick:b}=yl(e),{loading:w,search:P,dataList:x,pagination:l,isSinglePage:a,handleSizeChange:v,handleCurrentChange:S,onSearch:T,handleDestroy:O,handleBatchDestroy:A}=_l(n),{searchColumns:N,debouncedSearch:m}=bl(()=>T()),{storeRef:z,showStore:M,storeId:Ce,storeColumns:Pe,rules:Se,storeValues:G,openStoreForm:ne,confirmStoreForm:xe,closeStoreForm:ke}=hl(()=>T(),e),K=g(!1),Te=()=>{K.value=!0},Z=g(!1),se=g(0),Ve=D=>{se.value=D.id,Z.value=!0},J=g(!1),ie=g(null),Ie=D=>{var d;ie.value=(d=D==null?void 0:D.id)!=null?d:null,J.value=!0},ue=D=>{const d=h=>{if(h==null)return!0;if(typeof h=="number")return h===0;if(typeof h=="string"){const R=h.trim();if(R==="")return!0;const q=Number(R);return!Number.isNaN(q)&&q===0}if(Array.isArray(h))return h.length===0?!0:h.every(R=>d(R));if(typeof h=="object"){const R=Object.values(h!=null?h:{});return R.length===0?!0:R.every(q=>d(q))}return!1};return d(D)};return ol(()=>{f(),T()}),(D,d)=>{const h=y("el-button"),R=y("el-tooltip"),q=y("el-popconfirm"),ze=y("pure-table"),Re=he("motion-fade");return V(),$("div",xl,[le("div",kl,[o(i(Be),{modelValue:i(P),"onUpdate:modelValue":d[0]||(d[0]=C=>fe(P)?P.value=C:null),columns:i(N),"show-number":6,"col-props":{xs:24,sm:24,md:24,lg:24,xl:24},"label-width":"80","label-position":"right","label-suffix":"","has-footer":!1,onChange:i(m)},null,8,["modelValue","columns","onChange"])]),o(i(Le),{title:"产品管理",columns:i(s),onRefresh:i(T)},{buttons:p(()=>[o(h,{type:"primary",onClick:Te},{default:p(()=>d[7]||(d[7]=[k("导入产品")])),_:1}),o(h,{type:"primary",onClick:d[1]||(d[1]=C=>i(ne)())},{default:p(()=>d[8]||(d[8]=[k("新增产品")])),_:1})]),default:p(({size:C,dynamicColumns:De})=>[i(t).length>0?be((V(),$("div",Tl,[le("div",Vl,[o(R,{placement:"top",content:"取消选择"},{default:p(()=>[o(h,{type:"primary",size:"small",class:"!w-[15px] !p-0 !h-[15px] !rounded-[3px]",icon:i(vl)(i(fl)),onClick:i(u)},null,8,["icon","onClick"])]),_:1}),le("span",Il," 已选 "+ye(i(t).length)+" 项 ",1)]),o(q,{title:"确定要删除吗？",width:"160px",onConfirm:d[2]||(d[2]=F=>i(A)(i(t)))},{reference:p(()=>[o(h,{type:"danger",size:"small"},{default:p(()=>d[9]||(d[9]=[k(" 批量删除 ")])),_:1})]),_:1})])),[[Re]]):te("",!0),o(ze,{ref_key:"tableRef",ref:n,"row-key":"id","align-whole":"left","table-layout":"auto",loading:i(w),size:C,adaptive:"",adaptiveConfig:{offsetBottom:i(a)?44:108},data:i(x),columns:De,pagination:X(I({},i(l)),{size:C}),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onRowClick:i(b),onSelectionChange:i(_),onPageSizeChange:i(v),onPageCurrentChange:i(S)},{operation:p(({row:F})=>[o(h,{class:"reset-margin !outline-none",type:"primary",link:"",size:C,onClick:Q=>i(ne)(F.id)},{default:p(()=>d[10]||(d[10]=[k(" 编辑 ")])),_:2},1032,["size","onClick"]),o(h,{class:"reset-margin !outline-none",type:ue(F.cost)?"danger":"primary",link:"",size:C,onClick:Q=>Ve(F)},{default:p(()=>d[11]||(d[11]=[k(" 成本 ")])),_:2},1032,["type","size","onClick"]),o(h,{class:"reset-margin !outline-none",type:ue(F.prices)?"danger":"primary",link:"",size:C,onClick:Q=>Ie(F)},{default:p(()=>d[12]||(d[12]=[k(" 价格 ")])),_:2},1032,["type","size","onClick"]),o(q,{title:"确定要删除吗？",width:"160px",onConfirm:Q=>i(O)(F.id)},{reference:p(()=>[o(h,{class:"reset-margin !outline-none",link:"",type:"danger",size:C},{default:p(()=>d[13]||(d[13]=[k(" 删除 ")])),_:2},1032,["size"])]),_:2},1032,["onConfirm"])]),_:2},1032,["loading","size","adaptiveConfig","data","columns","pagination","onRowClick","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["columns","onRefresh"]),o(i(gl),{ref_key:"storeRef",ref:z,modelValue:i(G),"onUpdate:modelValue":d[3]||(d[3]=C=>fe(G)?G.value=C:null),visible:i(M),form:{columns:i(Pe),rules:i(Se),labelPosition:"right",labelSuffix:"",labelWidth:"150px"},size:i(r),closeOnClickModal:!0,title:i(Ce)>0?"编辑产品":"新增产品",confirmText:"提交",cancelText:"取消",onConfirm:i(xe),onCancel:i(ke)},null,8,["modelValue","visible","form","size","title","onConfirm","onCancel"]),o(Cl,{visible:K.value,"onUpdate:visible":d[4]||(d[4]=C=>K.value=C),"sources-list":i(e),onSuccess:i(T)},null,8,["visible","sources-list","onSuccess"]),o(Sl,{id:se.value,visible:Z.value,"onUpdate:visible":d[5]||(d[5]=C=>Z.value=C),onSuccess:i(T)},null,8,["id","visible","onSuccess"]),o(ml,{modelValue:J.value,"onUpdate:modelValue":d[6]||(d[6]=C=>J.value=C),"product-id":ie.value,onSaved:i(T)},null,8,["modelValue","product-id","onSaved"])])}}}),Wl=we(zl,[["__scopeId","data-v-08ddb492"]]);export{Wl as default};
