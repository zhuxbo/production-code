var C=(b,y,f)=>new Promise((p,t)=>{var m=r=>{try{c(f.next(r))}catch(i){t(i)}},h=r=>{try{c(f.throw(r))}catch(i){t(i)}},c=r=>r.done?p(r.value):Promise.resolve(r.value).then(m,h);c((f=f.apply(b,y)).next())});import{u as U,f as S,P as q,i as G,g as M,a as R,b as x,_ as J}from"./index-4IH4PzWT.js";import{d as K,r as V,q as Q,ax as W,D as E,E as X,e as Y,aT as P,w as s,al as u,v as Z,aA as g,aB as w,f as T,i as l,aH as z,A as I,z as D,az as N,G as k,H as ee,b7 as L}from"./index-CCAdPrhE.js";const ae={class:"plus-drawer-form__footer"};var oe=K({name:"PlusDrawerForm",__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},drawer:{default:()=>({})},size:{default:"540px"},form:{default:()=>({})},hasFooter:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},confirmLoading:{type:Boolean,default:!1},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(b,{expose:y,emit:f}){const p=b,t=f,{t:m}=U(),h=V(null),c=Q(()=>{var e;return(e=h.value)==null?void 0:e.formInstance}),r=V(),i=V({}),v=V(!1),$=W(),_=S($,M()),A=S($,R()),j=S($,x());E(()=>p.visible,e=>{v.value=e},{immediate:!0}),E(()=>p.modelValue,e=>{i.value=e},{immediate:!0});const H=(e,n)=>{t("update:modelValue",e),t("change",e,n)},B=()=>C(null,null,function*(){var e,n,o;try{(yield(e=c.value)==null?void 0:e.validate())&&t("confirm",i.value)}catch(a){if(p.hasErrorTip){L.closeAll();const d=G(a)&&Object.values(a),O=d?(o=(n=d[0])==null?void 0:n[0])==null?void 0:o.message:void 0;L.warning(O||m("plus.form.errorTip"))}t("confirmError",a)}}),F=()=>{v.value=!1,t("update:visible",v.value),t("cancel")};return y({drawerInstance:r,formInstance:c}),(e,n)=>(Y(),X(l(ee),N({ref_key:"drawerInstance",ref:r,modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=o=>v.value=o),class:"plus-drawer-form",size:e.size||"540px",title:l(m)("plus.drawerForm.title"),"close-on-click-modal":!1,"close-on-press-escape":!1},e.$attrs,{onClose:F}),P({default:s(()=>[T(l(q),N({ref_key:"formInstance",ref:h,modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=o=>i.value=o),"has-footer":!1},e.form,{onChange:H}),P({_:2},[e.$slots["form-footer"]?{name:"footer",fn:s(()=>[u(e.$slots,"form-footer")]),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:s(o=>[u(e.$slots,"form-group-header",g(w(o)))]),key:"1"}:void 0,k(l(_),(o,a)=>({name:a,fn:s(d=>[u(e.$slots,a,g(w(d)))])})),k(l(A),(o,a)=>({name:a,fn:s(d=>[u(e.$slots,a,g(w(d)))])})),k(l(j),(o,a)=>({name:a,fn:s(d=>[u(e.$slots,a,g(w(d)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:s(()=>[u(e.$slots,"tooltip-icon")]),key:"2"}:void 0]),1040,["modelValue"])]),_:2},[e.$slots["drawer-header"]?{name:"header",fn:s(()=>[u(e.$slots,"drawer-header")]),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:s(()=>[Z("div",ae,[u(e.$slots,"drawer-footer",g(w({handleConfirm:B,handleCancel:F})),()=>[T(l(z),{onClick:F},{default:s(()=>[I(D(e.cancelText||l(m)("plus.drawerForm.cancelText")),1)]),_:1}),T(l(z),{type:"primary",loading:e.confirmLoading,onClick:B},{default:s(()=>[I(D(e.confirmText||l(m)("plus.drawerForm.confirmText")),1)]),_:1},8,["loading"])])])]),key:"1"}:void 0]),1040,["modelValue","size","title"]))}}),se=J(oe,[["__file","index.vue"]]);const ne=se;export{ne as P};
