var Ie=Object.defineProperty,ze=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var se=(p,r,e)=>r in p?Ie(p,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):p[r]=e,I=(p,r)=>{for(var e in r||(r={}))De.call(r,e)&&se(p,e,r[e]);if(ne)for(var e of ne(r))qe.call(r,e)&&se(p,e,r[e]);return p},G=(p,r)=>ze(p,Re(r));var B=(p,r,e)=>new Promise((m,n)=>{var a=s=>{try{u(e.next(s))}catch(b){n(b)}},f=s=>{try{u(e.throw(s))}catch(b){n(b)}},u=s=>s.done?m(s.value):Promise.resolve(s.value).then(a,f);u((e=e.apply(p,r)).next())});import{P as Fe,a as Ue}from"./plus-search-B_b347ed.js";import{u as Oe}from"./drawer-Buoy5E4X.js";import{b as Ae,d as Be,i as Le,F as Me,u as Ne,a as Ye,s as Ee,c as $e,g as je,e as He,f as We,h as Ge}from"./product-CGGgC3iO.js";import{r as g,l as me,q as U,m as Y,t as Ke,n as Je,p as Qe,f as o,h,aP as Xe,b3 as Ze,s as ie,d as ee,E as F,e as k,w as d,i,c as M,G as ue,F as de,A as T,D as K,x as ve,B as fe,y as Q,z as _e,_ as ge,o as el,v as J,j as pe}from"./index-Czs_s45H.js";import{b as E,e as X,c as Z,n as $,s as ce,d as ll,w as al,f as tl,g as ol,h as rl,p as nl,i as R}from"./dictionary-Bumd2V0E.js";import{p as sl}from"./utils-BFFS1riR.js";import{u as il}from"./dialog-BIS1cz9y.js";import{u as ul}from"./hooks-BC8gGHVq.js";import{C as dl}from"./close-bold-CJxBGuFX.js";import{P as pl}from"./index-DJVwwjTC.js";import"./index-CMrlkQOr.js";import"./epTheme-NuZyHsuP.js";function cl(p){const r=g({}),e=g([]),m=g(!0),n=me({total:0,pageSize:100,currentPage:1,background:!0,pageSizes:[10,20,50,100],hideOnSinglePage:!0}),a=U(()=>n.total<=n.pageSize);function f(t){n.pageSize=t,l()}function u(t){n.currentPage=t,l()}const s=g(!1),b=g(0),y=t=>{s.value=!0,t?b.value=t:b.value=0},w=t=>{Be(t).then(()=>{Y("删除成功",{type:"success"}),l()})},x=t=>{Ae(t).then(()=>{Y("删除成功",{type:"success"}),l()})};function l(){m.value=!0;const t=G(I({},Ke(r.value)),{pageSize:n.pageSize,currentPage:n.currentPage});Le(t).then(({data:v})=>{e.value=v.items,n.total=v.total,n.pageSize=v.pageSize,n.currentPage=v.currentPage,Je(()=>{p.value&&p.value.getTableRef().clearSelection()})}).finally(()=>{m.value=!1})}return{loading:m,search:r,dataList:e,pagination:n,isSinglePage:a,handleSizeChange:f,handleCurrentChange:u,onSearch:l,showStore:s,updateId:b,handleStore:y,handleDestroy:w,handleBatchDestroy:x}}const L=(p,r)=>(e,m)=>{const n=g(e),a=f=>{n.value===f?(n.value=void 0,m(void 0)):(n.value=f,m(f))};return o("div",{class:"flex flex-wrap gap-1 items-center"},[o("div",{class:"flex flex-wrap gap-1"},[p.map(f=>o(h("el-button"),{key:f.value,type:n.value===f.value?"primary":"default",onClick:()=>a(f.value),class:"ml-3 w-28"},{default:()=>[f.label]}))]),(r==null?void 0:r.showToggleButton)&&o(h("el-button"),{type:"primary",link:!0,onClick:r.onToggle,class:"ml-3 flex items-center whitespace-nowrap text-base"},{default:()=>[o(h("el-icon"),{class:"mr-1"},{default:()=>[r.collapsed?o(Xe,null,null):o(Ze,null,null)]}),r.collapsed?"展开":"收起"]})])},ml=p=>{const r=Qe(()=>{p()},500),e=g(!0),m=()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)},n=()=>{e.value=!e.value,m()};return{searchColumns:U(()=>[{label:"证书品牌",prop:"brand",valueType:"radio",options:E,renderField:L(E,{showToggleButton:!0,onToggle:n,collapsed:e.value})},{label:"加密标准",prop:"encryption_standard",valueType:"radio",options:X,renderField:L(X),hideInSearch:e.value},{label:"验证类型",prop:"validation_type",valueType:"radio",options:Z,renderField:L(Z),hideInSearch:e.value},{label:"域名类型",prop:"name_type",valueType:"radio",options:$,renderField:L($),hideInSearch:e.value},{label:"产品状态",prop:"status",valueType:"radio",options:ce,renderField:L(ce),hideInSearch:e.value},{label:"快速搜索",prop:"quickSearch",valueType:"input",fieldProps:{placeholder:"编码/名称/备注",clearable:!0,style:{width:"240px"},class:"ml-3"},hideInSearch:e.value}]),debouncedSearch:r}},vl=(p,r)=>{const e=g(!1),m=g(),n=g(0),a=g({}),f=[{label:"名称",prop:"name",valueType:"input",fieldProps:{placeholder:"请输入名称"}},{label:"编码",prop:"code",valueType:"input",fieldProps:{placeholder:"请输入编码"}},{label:"API ID",prop:"api_id",valueType:"input",fieldProps:{placeholder:"请输入API ID"}},{label:"来源",prop:"source",valueType:"select",fieldProps:{placeholder:"请选择来源"},options:r},{label:"品牌",prop:"brand",valueType:"select",fieldProps:{placeholder:"请选择品牌"},options:E},{label:"签发机构",prop:"ca",valueType:"select",fieldProps:{placeholder:"请选择签发机构"},options:ll},{label:"保险币种",prop:"warranty_currency",valueType:"select",fieldProps:{placeholder:"请选择保险币种"},options:al},{label:"保险金额",prop:"warranty",valueType:"input-number",fieldProps:{placeholder:"请输入保险金额",min:0,precision:2,controlsPosition:"right"}},{label:"服务器数量",prop:"server",valueType:"input-number",fieldProps:{placeholder:"请输入限制服务器数量",min:0,precision:0,controlsPosition:"right"},tooltip:"0为不限制"},{label:"加密标准",prop:"encryption_standard",valueType:"radio",fieldProps:{placeholder:"请选择加密标准"},options:X},{label:"加密算法",prop:"encryption_alg",valueType:"checkbox",fieldProps:{placeholder:"请选择加密算法",multiple:!0},options:tl},{label:"签名摘要算法",prop:"signature_digest_alg",valueType:"checkbox",fieldProps:{placeholder:"请选择签名摘要算法",multiple:!0},options:ol},{label:"验证类型",prop:"validation_type",valueType:"radio",fieldProps:{placeholder:"请选择验证类型"},options:Z},{label:"通用名称类型",prop:"common_name_types",valueType:"checkbox",fieldProps:{placeholder:"请选择通用名称类型",multiple:!0},options:$},{label:"备用名称类型",prop:"alternative_name_types",valueType:"checkbox",fieldProps:{placeholder:"请选择备用名称类型",multiple:!0},options:$},{label:"验证方法",prop:"validation_methods",valueType:"checkbox",fieldProps:{placeholder:"请选择验证方法",multiple:!0},options:rl},{label:"周期",prop:"periods",valueType:"checkbox",fieldProps:{placeholder:"请选择周期",multiple:!0},options:nl},{label:"标准域名起始个数",prop:"standard_min",valueType:"input-number",fieldProps:{placeholder:"请输入标准域名起始个数",min:0,precision:0,controlsPosition:"right"}},{label:"标准域名最大个数",prop:"standard_max",valueType:"input-number",fieldProps:{placeholder:"请输入标准域名最大个数",min:0,precision:0,controlsPosition:"right"}},{label:"通配符起始个数",prop:"wildcard_min",valueType:"input-number",fieldProps:{placeholder:"请输入通配符起始个数",min:0,precision:0,controlsPosition:"right"}},{label:"通配符最大个数",prop:"wildcard_max",valueType:"input-number",fieldProps:{placeholder:"请输入通配符最大个数",min:0,precision:0,controlsPosition:"right"}},{label:"总域名起始个数",prop:"total_min",valueType:"input-number",fieldProps:{placeholder:"请输入总域名起始个数",min:0,precision:0,controlsPosition:"right"}},{label:"总域名最大个数",prop:"total_max",valueType:"input-number",fieldProps:{placeholder:"请输入总域名最大个数",min:0,precision:0,controlsPosition:"right"}},{label:"添加SAN",prop:"add_san",valueType:"switch",fieldProps:R},{label:"替换SAN",prop:"replace_san",valueType:"switch",fieldProps:R},{label:"重新签发",prop:"reissue",valueType:"switch",fieldProps:R},{label:"续期",prop:"renew",valueType:"switch",fieldProps:R},{label:"重用CSR",prop:"reuse_csr",valueType:"switch",fieldProps:R},{label:"赠送根域名",prop:"gift_root_domain",valueType:"switch",fieldProps:R},{label:"退款期限",prop:"refund_period",valueType:"input-number",fieldProps:{placeholder:"请输入退款期限",min:0,precision:0,controlsPosition:"right"}},{label:"备注",prop:"remark",valueType:"textarea",fieldProps:{placeholder:"请输入备注",rows:3}},{label:"排序权重",prop:"weight",valueType:"input-number",fieldProps:{placeholder:"请输入排序权重",min:0,precision:0,controlsPosition:"right"},tooltip:"排序权重越小，越靠前"},{label:"状态",prop:"status",valueType:"switch",fieldProps:R},{label:"创建时间",prop:"created_at",hideInForm:U(()=>n.value===0),renderField:t=>t&&typeof t=="string"?ie(t).format("YYYY-MM-DD HH:mm:ss"):""},{label:"更新时间",prop:"updated_at",hideInForm:U(()=>n.value===0),renderField:t=>t&&typeof t=="string"?ie(t).format("YYYY-MM-DD HH:mm:ss"):""}],u={code:[{required:!0,message:"请输入编码"},{max:50,message:"编码长度不能超过50个字符",trigger:"blur"}],name:[{required:!0,message:"请输入名称"},{max:100,message:"名称长度不能超过100个字符",trigger:"blur"}],api_id:[{required:!0,message:"请输入API ID"},{max:128,message:"API ID长度不能超过128个字符",trigger:"blur"}],source:[{required:!0,message:"请选择来源"}],brand:[{required:!0,message:"请选择品牌"}],ca:[{required:!0,message:"请选择签发机构"}],warranty_currency:[{required:!0,message:"请选择保险币种"}],warranty:[{required:!0,message:"请输入保险金额"},{type:"number",min:0,message:"保险金额不能小于0"}],encryption_standard:[{required:!0,message:"请选择加密标准"}],encryption_alg:[{required:!0,message:"请选择加密算法"}],signature_digest_alg:[{required:!0,message:"请选择签名摘要算法"}],validation_type:[{required:!0,message:"请选择验证类型"}],common_name_types:[{required:!0,message:"请选择通用名称类型"}],validation_methods:[{required:!0,message:"请选择验证方法"}],periods:[{required:!0,message:"请选择周期"}],standard_min:[{required:!0,message:"请输入标准域名起始个数"}],standard_max:[{required:!0,message:"请输入标准域名最大个数"}],wildcard_min:[{required:!0,message:"请输入通配符域名起始个数"}],wildcard_max:[{required:!0,message:"请输入通配符域名最大个数"}],total_min:[{required:!0,message:"请输入总域名起始个数"}],total_max:[{required:!0,message:"请输入总域名最大个数"}],refund_period:[{required:!0,message:"请输入退款期限"}],weight:[{required:!0,message:"请输入排序权重"}],remark:[{max:500,message:"备注长度不能超过500个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态"}]};function s(t=0){var v,C;e.value=!0,t>0?n.value!==t&&w(t):((C=(v=m.value)==null?void 0:v.formInstance)==null||C.resetFields(),a.value=Object.fromEntries(Object.entries(Me))),n.value=t}function b(){n.value>0?l():x()}function y(){e.value=!1}const w=t=>{Ee(t).then(({data:v})=>{var C;a.value=sl(v,$e),a.value.warranty=Number((C=a.value.warranty)!=null?C:0)})},x=()=>{delete a.value.created_at,delete a.value.updated_at,Ye(a.value).then(()=>{p(),e.value=!1})},l=()=>{delete a.value.created_at,delete a.value.updated_at,Ne(n.value,a.value).then(()=>{p(),e.value=!1})};return{storeRef:m,showStore:e,storeId:n,storeValues:a,storeColumns:f,rules:u,openStoreForm:s,confirmStoreForm:b,closeStoreForm:y}},fl=p=>{const r=g(),e=g([]);return{tableRef:r,selectedIds:e,handleSelectionChange:u=>{e.value=u.map(s=>s.id),r.value.setAdaptive()},handleSelectionCancel:()=>{var u;(u=r.value)==null||u.getTableRef().clearSelection()},tableColumns:[{label:"勾选列",type:"selection",reserveSelection:!0},{label:"ID",prop:"id",width:50},{label:"来源",prop:"source",width:70,formatter:u=>{var b;const s=(b=p.value)==null?void 0:b.find(y=>y.value===u.source);return s?s.label:u.source.charAt(0).toUpperCase()+u.source.slice(1)}},{label:"名称",prop:"name",minWidth:150},{label:"说明",prop:"remark",minWidth:150},{label:"权重",prop:"weight",width:70},{label:"状态",prop:"status",width:70,cellRenderer:({row:u,props:s})=>o(h("el-tag"),{size:s.size,type:u.status===1?"success":"danger",effect:"plain"},{default:()=>[u.status===1?"启用":"禁用"]})},{label:"操作",fixed:"right",slot:"operation",width:160}],handleRowClick:(u,s,b)=>{var w;const y=b.target;y.tagName==="BUTTON"||y.closest("button")||y.closest(".el-button")||(w=r.value)==null||w.getTableRef().toggleRowSelection(u)}}};function _l(){const p=g([]),r=g(!1);function e(){r.value=!0,je().then(({data:m})=>{p.value=m||[]}).catch(()=>{p.value=[]}).finally(()=>{r.value=!1})}return{sourcesList:p,getSourcesList:e}}const gl=ee({name:"ProductImport",__name:"import",props:{visible:{type:Boolean,default:!1},sourcesList:{type:Array,default:()=>[]}},emits:["update:visible","success"],setup(p,{emit:r}){const e=p,m=r,n=g(),a=g(!1),{dialogSize:f}=il(),u=U({get:()=>e.visible,set:x=>m("update:visible",x)}),s=me({source:"default",brand:"",apiId:"",forceUpdate:!1}),b={source:[{required:!0,message:"请选择来源"}]},y=()=>{m("update:visible",!1)},w=()=>{a.value=!0,He(s).then(x=>{x.code===1&&(Y("导入产品成功",{type:"success"}),y(),m("success"),s.source="default",s.brand="",s.apiId="")}).finally(()=>{a.value=!1})};return(x,l)=>{const t=h("el-option"),v=h("el-select"),C=h("el-form-item"),V=h("el-input"),D=h("el-checkbox"),O=h("el-form"),q=h("el-button"),P=h("el-dialog");return k(),F(P,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=c=>u.value=c),title:"导入产品",width:i(f),"destroy-on-close":"",onClosed:y},{footer:d(()=>[o(q,{onClick:y},{default:d(()=>l[6]||(l[6]=[T("取消")])),_:1}),o(q,{type:"primary",loading:a.value,onClick:w},{default:d(()=>l[7]||(l[7]=[T(" 确定 ")])),_:1},8,["loading"])]),default:d(()=>[o(O,{ref_key:"formRef",ref:n,model:s,rules:b,"label-width":"80px"},{default:d(()=>[o(C,{label:"来源",prop:"source"},{default:d(()=>[o(v,{modelValue:s.source,"onUpdate:modelValue":l[0]||(l[0]=c=>s.source=c),placeholder:"请选择来源",style:{width:"100%"}},{default:d(()=>[(k(!0),M(de,null,ue(e.sourcesList,c=>(k(),F(t,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(C,{label:"品牌",prop:"brand"},{default:d(()=>[o(v,{modelValue:s.brand,"onUpdate:modelValue":l[1]||(l[1]=c=>s.brand=c),placeholder:"请选择品牌",clearable:"",style:{width:"100%"}},{default:d(()=>[(k(!0),M(de,null,ue(i(E),c=>(k(),F(t,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(C,{label:"接口ID",prop:"apiId"},{default:d(()=>[o(V,{modelValue:s.apiId,"onUpdate:modelValue":l[2]||(l[2]=c=>s.apiId=c),placeholder:"请输入接口ID"},null,8,["modelValue"])]),_:1}),o(C,null,{default:d(()=>[o(D,{modelValue:s.forceUpdate,"onUpdate:modelValue":l[3]||(l[3]=c=>s.forceUpdate=c)},{default:d(()=>l[5]||(l[5]=[T("强制更新已存在产品")])),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","width"])}}}),bl=ee({__name:"cost",props:{visible:{type:Boolean},id:{}},emits:["update:visible","success"],setup(p,{emit:r}){const e=p,m=r,n=g(!1),a=g({price:{},alternative_standard_price:{},alternative_wildcard_price:{}}),f=g([]),u=g([]),s=U({get:()=>e.visible,set:l=>m("update:visible",l)}),b=()=>{const l={price:I({},a.value.price||{})};u.value.includes("standard")&&(l.alternative_standard_price=I({},a.value.alternative_standard_price||{})),u.value.includes("wildcard")&&(l.alternative_wildcard_price=I({},a.value.alternative_wildcard_price||{})),f.value.forEach(t=>{const v=t.toString();l.price[v]||(l.price[v]=0),u.value.includes("standard")&&l.alternative_standard_price&&(l.alternative_standard_price[v]||(l.alternative_standard_price[v]=0)),u.value.includes("wildcard")&&l.alternative_wildcard_price&&(l.alternative_wildcard_price[v]||(l.alternative_wildcard_price[v]=0))}),a.value=l};K(()=>e.visible,l=>B(null,null,function*(){l&&e.id>0&&(yield y())})),K(()=>e.id,l=>B(null,null,function*(){l&&e.visible&&(yield y())})),K([()=>f.value,()=>u.value],()=>{b()});const y=()=>B(null,null,function*(){n.value=!0;try{Ge(e.id).then(({data:l})=>{f.value=l.periods||[],u.value=l.alternative_name_types||[];const t=I({price:{}},l.cost||{});t.price||(t.price={}),a.value=t,b()})}finally{n.value=!1}}),w=()=>{m("update:visible",!1)},x=()=>B(null,null,function*(){n.value=!0;const l={price:I({},a.value.price)};u.value.includes("standard")&&a.value.alternative_standard_price&&(l.alternative_standard_price=I({},a.value.alternative_standard_price)),u.value.includes("wildcard")&&a.value.alternative_wildcard_price&&(l.alternative_wildcard_price=I({},a.value.alternative_wildcard_price)),We(e.id,l).then(()=>{Y("更新成本成功",{type:"success"}),w(),m("success")}).finally(()=>{n.value=!1})});return(l,t)=>{const v=h("el-table-column"),C=h("el-input-number"),V=h("el-table"),D=h("el-button"),O=h("el-dialog"),q=fe("loading");return k(),F(O,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=P=>s.value=P),title:"编辑成本",width:"800px","destroy-on-close":"",onClosed:w},{footer:d(()=>[o(D,{onClick:w},{default:d(()=>t[1]||(t[1]=[T("取消")])),_:1}),o(D,{type:"primary",loading:n.value,onClick:x},{default:d(()=>t[2]||(t[2]=[T(" 确定 ")])),_:1},8,["loading"])]),default:d(()=>[ve((k(),M("div",null,[o(V,{data:f.value,border:"",style:{width:"100%"}},{default:d(()=>[o(v,{label:"周期",width:"100",align:"center"},{default:d(({row:P})=>[T(_e(P)+"个月 ",1)]),_:1}),o(v,{label:"基础价格",align:"center"},{default:d(({row:P})=>[o(C,{modelValue:a.value.price[P],"onUpdate:modelValue":c=>a.value.price[P]=c,min:0,precision:2,"controls-position":"right",style:{width:"160px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),u.value.includes("standard")?(k(),F(v,{key:0,label:"附加标准域名价格",align:"center"},{default:d(({row:P})=>{var c;return[o(C,{"model-value":((c=a.value.alternative_standard_price)==null?void 0:c[P])||0,min:0,precision:2,"controls-position":"right",style:{width:"160px"},"onUpdate:modelValue":A=>{a.value.alternative_standard_price||(a.value.alternative_standard_price={}),a.value.alternative_standard_price[P]=A}},null,8,["model-value","onUpdate:modelValue"])]}),_:1})):Q("",!0),u.value.includes("wildcard")?(k(),F(v,{key:1,label:"附加通配符价格",align:"center"},{default:d(({row:P})=>{var c;return[o(C,{"model-value":((c=a.value.alternative_wildcard_price)==null?void 0:c[P])||0,min:0,precision:2,"controls-position":"right",style:{width:"160px"},"onUpdate:modelValue":A=>{a.value.alternative_wildcard_price||(a.value.alternative_wildcard_price={}),a.value.alternative_wildcard_price[P]=A}},null,8,["model-value","onUpdate:modelValue"])]}),_:1})):Q("",!0)]),_:1},8,["data"])])),[[q,n.value]])]),_:1},8,["modelValue"])}}}),hl=ge(bl,[["__scopeId","data-v-1cb892b8"]]),yl={class:"main"},wl={class:"search bg-bg_color w-[99/100] pl-4 pr-4 pt-[24px] pb-[12px] overflow-auto"},Cl={key:0,class:"bg-[var(--el-fill-color-light)] w-full h-[46px] mb-2 pl-3 pr-2 flex items-center"},Pl={class:"flex-auto"},Sl={style:{"font-size":"var(--el-font-size-base)"},class:"text-[rgba(42,46,54,0.5)] dark:text-[rgba(220,220,242,0.5)] ml-2"},xl=ee({name:"Product",__name:"index",setup(p){const{drawerSize:r}=Oe(),{sourcesList:e,getSourcesList:m}=_l(),{tableRef:n,selectedIds:a,handleSelectionChange:f,handleSelectionCancel:u,tableColumns:s,handleRowClick:b}=fl(e),{loading:y,search:w,dataList:x,pagination:l,isSinglePage:t,handleSizeChange:v,handleCurrentChange:C,onSearch:V,handleDestroy:D,handleBatchDestroy:O}=cl(n),{searchColumns:q,debouncedSearch:P}=ml(()=>V()),{storeRef:c,showStore:A,storeId:be,storeColumns:he,rules:ye,storeValues:j,openStoreForm:le,confirmStoreForm:we,closeStoreForm:Ce}=vl(()=>V(),e),H=g(!1),Pe=()=>{H.value=!0},W=g(!1),ae=g(0),Se=te=>{ae.value=te.id,W.value=!0};return el(()=>{m(),V()}),(te,_)=>{const z=h("el-button"),xe=h("el-tooltip"),oe=h("el-popconfirm"),Te=h("pure-table"),ke=fe("motion-fade");return k(),M("div",yl,[J("div",wl,[o(i(Fe),{modelValue:i(w),"onUpdate:modelValue":_[0]||(_[0]=S=>pe(w)?w.value=S:null),columns:i(q),"show-number":6,"col-props":{xs:24,sm:24,md:24,lg:24,xl:24},"label-width":"80","label-position":"right","label-suffix":"","has-footer":!1,onChange:i(P)},null,8,["modelValue","columns","onChange"])]),o(i(Ue),{title:"产品管理",columns:i(s),onRefresh:i(V)},{buttons:d(()=>[o(z,{type:"primary",onClick:Pe},{default:d(()=>_[6]||(_[6]=[T("导入产品")])),_:1}),o(z,{type:"primary",onClick:_[1]||(_[1]=S=>i(le)())},{default:d(()=>_[7]||(_[7]=[T("新增产品")])),_:1})]),default:d(({size:S,dynamicColumns:Ve})=>[i(a).length>0?ve((k(),M("div",Cl,[J("div",Pl,[o(xe,{placement:"top",content:"取消选择"},{default:d(()=>[o(z,{type:"primary",size:"small",class:"!w-[15px] !p-0 !h-[15px] !rounded-[3px]",icon:i(ul)(i(dl)),onClick:i(u)},null,8,["icon","onClick"])]),_:1}),J("span",Sl," 已选 "+_e(i(a).length)+" 项 ",1)]),o(oe,{title:"确定要删除吗？",width:"160px",onConfirm:_[2]||(_[2]=N=>i(O)(i(a)))},{reference:d(()=>[o(z,{type:"danger",size:"small"},{default:d(()=>_[8]||(_[8]=[T(" 批量删除 ")])),_:1})]),_:1})])),[[ke]]):Q("",!0),o(Te,{ref_key:"tableRef",ref:n,"row-key":"id","align-whole":"left","table-layout":"auto",loading:i(y),size:S,adaptive:"",adaptiveConfig:{offsetBottom:i(t)?44:108},data:i(x),columns:Ve,pagination:G(I({},i(l)),{size:S}),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onRowClick:i(b),onSelectionChange:i(f),onPageSizeChange:i(v),onPageCurrentChange:i(C)},{operation:d(({row:N})=>[o(z,{class:"reset-margin !outline-none",type:"primary",link:"",size:S,onClick:re=>i(le)(N.id)},{default:d(()=>_[9]||(_[9]=[T(" 编辑 ")])),_:2},1032,["size","onClick"]),o(z,{class:"reset-margin !outline-none",type:"primary",link:"",size:S,onClick:re=>Se(N)},{default:d(()=>_[10]||(_[10]=[T(" 成本 ")])),_:2},1032,["size","onClick"]),o(oe,{title:"确定要删除吗？",width:"160px",onConfirm:re=>i(D)(N.id)},{reference:d(()=>[o(z,{class:"reset-margin !outline-none",link:"",type:"danger",size:S},{default:d(()=>_[11]||(_[11]=[T(" 删除 ")])),_:2},1032,["size"])]),_:2},1032,["onConfirm"])]),_:2},1032,["loading","size","adaptiveConfig","data","columns","pagination","onRowClick","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["columns","onRefresh"]),o(i(pl),{ref_key:"storeRef",ref:c,modelValue:i(j),"onUpdate:modelValue":_[3]||(_[3]=S=>pe(j)?j.value=S:null),visible:i(A),form:{columns:i(he),rules:i(ye),labelPosition:"right",labelSuffix:"",labelWidth:"150px"},size:i(r),closeOnClickModal:!0,title:i(be)>0?"编辑产品":"新增产品",confirmText:"提交",cancelText:"取消",onConfirm:i(we),onCancel:i(Ce)},null,8,["modelValue","visible","form","size","title","onConfirm","onCancel"]),o(gl,{visible:H.value,"onUpdate:visible":_[4]||(_[4]=S=>H.value=S),"sources-list":i(e),onSuccess:i(V)},null,8,["visible","sources-list","onSuccess"]),o(hl,{id:ae.value,visible:W.value,"onUpdate:visible":_[5]||(_[5]=S=>W.value=S),onSuccess:i(V)},null,8,["id","visible","onSuccess"])])}}}),Ll=ge(xl,[["__scopeId","data-v-f0a4859c"]]);export{Ll as default};
